(self.webpackChunkangular_list_person_app=self.webpackChunkangular_list_person_app||[]).push([[179],{255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=255,t.exports=e},934:(t,e,n)=>{"use strict";var r=n(62),i=n(119),o=n(762),s=n(250),a=n(308);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenListeners:[]},g={enabled:!1};function v(t){return d.get(t)||p}function m(t,e){d.set(t,e)}function y(){return g}function _(){return self.grecaptcha}function b(t){if(!v(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:return b(t),[4,v(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise(function(n,r){var i=v(t).reCAPTCHAState;e.ready(function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function T(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=v(t);m(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var I="https://content-firebaseappcheck.googleapis.com/v1beta",E=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise(function(t){setTimeout(t,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function C(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,function(){var t,i,s,a,u,c,l,h,d,p;return o.__generator(this,function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function S(t,e){var n=t.options;return{url:I+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function k(t,e){var n=t.options;return{url:I+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var A="firebase-app-check-store",x="debug-token",N=null;function P(){return N||(N=new Promise(function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(A,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}}))}function R(t){return D(M(t))}function O(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,P()];case 1:return n=o.sent(),r=n.transaction(A,"readwrite"),i=r.objectStore(A),s=i.put({compositeKey:t,value:e}),[2,new Promise(function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function D(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,P()];case 1:return e=o.sent(),n=e.transaction(A,"readonly"),r=n.objectStore(A),i=r.get(t),[2,new Promise(function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})]}})})}function M(t){return t.options.appId+"-"+t.name}var L=new a.Logger("@firebase/app-check");function F(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,R(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),L.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function U(t,e){return s.isIndexedDBAvailable()?function(t,e){return O(M(t),e)}(t,e).catch(function(t){L.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function j(){return y().enabled}function V(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var q={error:"UNKNOWN_ERROR"};function B(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,d,p,g,y,_,T;return o.__generator(this,function(I){switch(I.label){case 0:return b(t),j()?(r=C,i=k,a=[t],[4,V()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,a.concat([I.sent()])),e])];case 2:return[2,{token:I.sent().token}];case 3:return u=v(t),l=void 0,(c=u.token)?[3,5]:[4,F(t)];case 4:(h=I.sent())&&K(h)&&(c=h,m(t,o.__assign(o.__assign({},u),{token:c})),H(t,{token:c.token})),I.label=5;case 5:if(!n&&c&&K(c))return[2,{token:c.token}];I.label=6;case 6:return I.trys.push([6,12,,13]),u.customProvider?[4,u.customProvider.getToken()]:[3,8];case 7:return d=I.sent(),p=s.issuedAtTime(d.token),g=null!==p&&p<Date.now()&&p>0?1e3*p:Date.now(),c=o.__assign(o.__assign({},d),{issuedAtTimeMillis:g}),[3,11];case 8:return[4,w(t).catch(function(t){throw f.create("recaptcha-error")})];case 9:return y=I.sent(),[4,C(S(t,y),e)];case 10:c=I.sent(),I.label=11;case 11:return[3,13];case 12:return _=I.sent(),L.error(_),l=_,[3,13];case 13:return c?[3,14]:(T=function(t){return{token:(e=q,s.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(l),[3,16]);case 14:return T={token:c.token},m(t,o.__assign(o.__assign({},u),{token:c})),[4,U(t,c)];case 15:I.sent(),I.label=16;case 16:return H(t,T),[2,T]}})})}function H(t,e){for(var n=0,r=v(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(o){}}}function K(t){return t.expireTimeMillis-Date.now()>0}var z="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",function(t){return e=t.getProvider("app").getImmediate(),{activate:function(t,n){return function(t,e,n){var r=v(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,m(t,i),i.siteKey&&function(t,e){var n=v(t),r=new s.Deferred;m(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=_();return l?l.ready(function(){T(t,e,l,i),r.resolve(l)}):(u=function(){var n=_();if(!n)throw new Error("no recaptcha");n.ready(function(){T(t,e,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,i.siteKey).catch(function(){})}(e,t,n)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=v(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),m(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)}};var e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(z).initialize()})),t.INTERNAL.registerComponent(new i.Component(z,function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return B(e,n,t)},addTokenListener:function(t){return function(t,e,n){var r=v(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(j()){var s=y();s.enabled&&s.token&&s.token.promise.then(function(t){return n({token:t})}).catch(function(){})}else{if(!i.tokenRefresher){var a=function(t,e){var n=this;return new E(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return v(t).token?[3,2]:[4,B(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,B(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var e=v(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(t,e);i.tokenRefresher=a}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&K(r.token)){var u=r.token;Promise.resolve().then(function(){return n({token:u.token})}).catch(function(){})}}m(t,i)}(e,n,t)},removeTokenListener:function(t){return function(t,e){var n=v(t),r=n.tokenListeners.filter(function(t){return t!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}(e,t)}};var e,n},"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.1.4")}(l.default),function(){var t=s.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new s.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var t,e;return o.__generator(this,function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D(x)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),O(x,r)).catch(function(t){return L.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r})})}())}}()},62:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>w,firebase:()=>b});var r,i,o=n(762),s=n(250),a=n(119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.contains)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.contains)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.__assign)((0,o.__assign)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.27",void 0),t.registerVersion("fire-js","")}(b);const w=b},119:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Component:()=>o,ComponentContainer:()=>u,Provider:()=>a});var r=n(762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var t;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.__read)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,s),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.__values)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},107:(t,e,n)=>{"use strict";var r=n(62),i=n(119),o=n(250),s=n(762),a=n(308);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),f=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new f},p=d("localStorage"),g=d("sessionStorage"),v=new a.Logger("@firebase/database"),m=(l=1,function(){return l++}),y=function(t){var e=(0,o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.stringify)(i):i,n+=" "}return n},b=null,w=!0,T=function(t,e){(0,o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.LogLevel.VERBOSE,b=v.log.bind(v),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&T(!0)),b){var n=_.apply(null,t);b(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I.apply(void 0,(0,s.__spreadArray)([t],(0,s.__read)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));throw v.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(t)));v.warn(n)},A=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",N="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===x||e===N)return-1;if(e===x||t===N)return 1;var n=j(t),r=j(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},O=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.stringify)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},M=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F=function(t){var e,n,r,i,s;(0,o.assert)(!A(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},U=new RegExp("^-?(0*)\\d{1,10}$"),j=function(t){if(U.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw k("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),H=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';k(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),K=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",G="long_polling",$=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function Q(t,e,n){var r;if((0,o.assert)("string"==typeof e,"typeof type must == string"),(0,o.assert)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==G)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Y=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},t}(),X={},J={};function Z(t){var e=t.toString();return X[e]||(X[e]=new Y),X[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=Z(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Q(e,G,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.__read)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.base64Encode)(e),r=M(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){I("frame writing exception"),u.stack&&I(u.stack),I(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||I("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){I("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=Z(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Q(t,W,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=M(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=O("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.__spreadArray)([],(0,s.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.assert)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),ft=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ft("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function vt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ft(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ft(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ft)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ft(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function Tt(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Tt(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function It(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Et(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ct(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);kt(this)}}();function kt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+At(t))}function At(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,Nt,Pt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Rt=1e3,Ot=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=E("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Rt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.contains)(t,"w")){var n=(0,o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,f,d,p,g,v=this;return(0,s.__generator)(this,function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=s.__read.apply(void 0,[m.sent(),2]),d=f[0],p=f[1],u?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){k(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")},a)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Rt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ft(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?t["framework.cordova"]=1:(0,o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Mt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(x,t),r=new Dt(x,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(N,xt)},e.prototype.makePost=function(t,e){return(0,o.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,xt)},e.prototype.toString=function(){return".key"},e}(Mt),Ft=new Lt,Ut=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:qt.EMPTY_NODE,this.right=null!=o?o:qt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return qt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return qt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),qt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ut(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ut(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function Bt(t,e){return P(t.name,e.name)}function Ht(t,e){return P(t,e)}var Kt,zt,Wt,Gt,$t,Qt=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Yt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.contains)(e,".sv"),"Priority must be a string or number.")}else(0,o.assert)(t===Nt||t.isEmpty(),"priority of unexpected type.");(0,o.assert)(t===Nt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Xt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return wt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(N,new Xt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Dt(e,new Xt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Mt)),Zt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Zt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new jt(s,o.node,jt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new jt(s,o.node,jt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new jt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,jt.BLACK):(a(h,jt.BLACK),a(h,jt.RED))}return o}(new te(t.length));return new qt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.assert)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Gt=Gt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof qt?e:null},t.prototype.hasIndex=function(t){return(0,o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.assert)(e!==Ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.__assign)({},this.indexSet_);h[l]=e;var f=(0,s.__assign)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.map)(this.indexes_,function(t,i){var s=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.map)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return $t||($t=new t(new qt(Ht),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||$t},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$t:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(vt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?$t:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.assert)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(vt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Qt(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ft||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ft||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ft?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new qt(Ht),ie.EMPTY_NODE,re.Default)||this}return(0,s.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Xt(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return L(t,function(e,r){if((0,o.contains)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(L(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Bt,function(t){return t.name},Ht);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(x,ie.EMPTY_NODE)},MAX:{value:new Dt(N,oe)}}),Lt.__EMPTY_NODE=ie.EMPTY_NODE,Xt.__childrenNodeConstructor=ie,Nt=oe,Wt=oe,zt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.assert)(!wt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(N,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Mt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Mt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fe=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.assert)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.assert)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=j(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return N;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return x;var e=j(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function ve(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):(0,o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ve(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(ve(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,f));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ve(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(me(l.name,l.node)),i.trackChildChange(ve(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Te=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ie(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ce(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Ft?e="$key":((0,o.assert)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.stringify)(e),t.startSet_&&(n.startAt=(0,o.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function ke(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Ae=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=E("p:rest:"),o.listens_={},o}return(0,s.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.safeGet)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.__read)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.jsonEval)(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),xe=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ne(){return{value:null,children:new Map}}function Pe(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Ne()),Pe(t.children.get(r),e=vt(e),n)}}function Re(t,e){if(wt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Pe(t,new ft(e),n)}),Re(t,e)}if(t.children.size>0){var r=pt(e);return e=vt(e),t.children.has(r)&&Re(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Oe(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Oe(r,new ft(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.__assign)({},t);return this.last_&&L(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Me=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,function(e,i){i>0&&(0,o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Fe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,je=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Le.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ft(e));return new t(dt(),n,this.revert)}return(0,o.assert)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(vt(this.path),this.affectedTree,this.revert)},t}(),Ve=function(){function t(t,e){this.source=t,this.path=e,this.type=Le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,dt()):new t(this.source,vt(this.path))},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Le.OVERWRITE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,vt(this.path),this.snap)},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Le.MERGE}return t.prototype.operationForChild=function(e){if(wt(this.path)){var n=this.children.subtree(new ft(e));return n.isEmpty()?null:n.value?new qe(this.source,dt(),n.value):new t(this.source,dt(),n)}return(0,o.assert)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,vt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),He=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(wt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ke=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function Ge(t,e,n,r){return We(new He(e,n,r),t.serverCache)}function $e(t,e,n,r){return We(t.eventCache,new He(e,n,r))}function Qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ye(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Xe=function(){function t(t,e){void 0===e&&(Ue||(Ue=new qt(R)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,function(t,e){n=n.set(new ft(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(wt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(vt(t),e);return null!=i?{path:bt(new ft(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(wt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(vt(e)):new t(null)},t.prototype.set=function(e,n){if(wt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(vt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(wt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(vt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(wt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(vt(t)):null},t.prototype.setTree=function(e,n){if(wt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(vt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(wt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(vt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(wt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(vt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Xe(null))},t}();function Ze(t,e,n){if(wt(e))return new Je(new Xe(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Tt(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new Xe(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return L(n,function(t,n){r=Ze(r,bt(e,t),n)}),r}function en(t,e){if(wt(e))return Je.empty();var n=t.writeTree_.setTree(e,new Xe(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Tt(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(wt(e))return t;var n=rn(t,e);return new Je(null!=n?new Xe(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(dt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Ct(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ct(bt(t.path,n),e))return!0;return!1}function fn(t){return t.visible}function dn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ct(n,a)?r=Ze(r,u=Tt(n,a),s.snap):Ct(a,n)&&(u=Tt(a,n),r=Ze(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(Ct(n,a))r=tn(r,u=Tt(n,a),s.children);else if(Ct(a,n))if(wt(u=Tt(a,n)))r=tn(r,dt(),s.children);else{var c=(0,o.safeGet)(s.children,pt(u));if(c){var l=c.getChild(vt(u));r=Ze(r,dt(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,dt())?un(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ct(t.path,e)||Ct(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,dt())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new ft(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Tn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ve(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),In=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new He(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ye(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,i,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(wt(n))if((0,o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ye(e),h=vn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var f=gn(r,Ye(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=pt(n);if(".priority"===d){(0,o.assert)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var v=vt(n),m=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var y=mn(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(d).updateChild(v,y):a.getNode().getImmediateChild(d)}else m=_n(r,d,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),d,m,v,i,s):a.getNode()}}return Ge(e,u,a.isFullyInitialized()||wt(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(wt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var d=vt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,In,null)}var g=$e(e,u,c.isFullyInitialized()||wt(n),l.filtersNodes());return Cn(t,g,n,i,new En(i,g,o),a)}function kn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new En(i,e,o);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ge(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ge(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=vt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(wt(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(f)&&g.getChild(_t(f)).isEmpty()?g:g.updateChild(f,r):ie.EMPTY_NODE}a=d.equals(p)?e:Ge(e,t.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function An(t,e){return t.eventCache.isCompleteForChild(e)}function xn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Nn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=wt(n)?r:new Xe(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ft(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ft(n),h,i,o,s,a)}}),c}var Pn,Rn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new He(u,s.isFullyInitialized(),i.filtersNodes()),h=new He(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new Ke(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function On(t,e){var n=Ye(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Mn(t,e,n){var r=[];if(n){(0,o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Ln(t,e,n,r){e.type===Le.MERGE&&null!==e.source.queryId&&((0,o.assert)(Ye(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)(Qe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Tn;if(n.type===Le.OVERWRITE){var c=n;c.source.fromUser?s=kn(t,e,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!wt(c.path),s=Sn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Le.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);An(e,pt(c))&&(a=kn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);An(e,pt(c))||(a=kn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Nn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Le.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=yn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(wt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Ye(e));else{var f=e.serverCache.getNode();(0,o.assert)(f instanceof ie,"serverChildren would be complete if leaf node"),h=vn(r,f)}l=t.filter.updateFullNode(c,h=h,s)}else{var d=pt(n),p=_n(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,vt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,ie.EMPTY_NODE,vt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Ye(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,dt()),Ge(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(wt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(wt(n)){var c=new Xe(null);return u.getNode().forEachChild(Ft,function(t,e){c=c.set(new ft(t),e)}),Nn(t,e,n,c,i,o,a,s)}return e}var l=new Xe(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Nn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Le.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Cn(t,$e(e,o.getNode(),o.isFullyInitialized()||wt(n),o.isFiltered()),n,r,In,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge(Qe(e)))}}(e,s,f),{viewCache:s,changes:f}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.assert)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Fn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Fn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Un,jn=function(){return function(){this.views=new Map}}();function Vn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Ln(c,e,n,r)}var l=[];try{for(var h=(0,s.__values)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Ln(c=f.value,e,n,r))}catch(d){i={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function qn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=vn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=We(new He(s,a,!1),new He(r,i,!1));return new Rn(e,u)}return o}function Bn(t){var e,n,r=[];try{for(var i=(0,s.__values)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hn(t,e){var n,r,i=null;try{for(var o=(0,s.__values)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||On(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Kn(t,e){return e._queryParams.loadsAllData()?Gn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Kn(t,e)}function Wn(t){return null!=Gn(t)}function Gn(t){var e,n;try{for(var r=(0,s.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var $n=1,Qn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Xe(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Yn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ze(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Xn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Ct(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=dn(t.allWrites,fn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):L(r.children,function(e){t.visibleWrites=en(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Xe(null);return null!=r.snap?i=i.set(dt(),!0):L(r.children,function(t){i=i.set(new ft(t),!0)}),nr(t,new je(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Zn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var f=(0,s.__values)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=(0,s.__read)(d.value,2),v=g[0];l=l.concat(Mn(p=g[1],n,r)),Dn(p)&&(t.views.delete(v),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Mn(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new((0,o.assert)(Pn,"Reference.ts has not been loaded"),Pn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(i,function(t,e){return Wn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Gn(e)];var r=[];return e&&(r=Bn(e)),L(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var v=p[g],m=v.query,y=or(t,v);t.listenProvider_.startListening(hr(m),sr(t,m),y.hashFn,y.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Tt(t,r);i=i||Hn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),i=i||Hn(u,dt())):(u=new jn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Hn(e,dt());n&&(i=i.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=$n++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=qn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(ve(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Fn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var d=Kn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.assert)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!wt(t)&&e&&Wn(e))return[Gn(e).query];var r=[];return e&&(r=r.concat(Bn(e).map(function(t){return t.query}))),L(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,d))}return f}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Hn(n,Tt(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,dt()))}function rr(t,e,n,r){if(wt(t.path))return ir(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Hn(i,dt()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Vn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Hn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Vn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Tt(o,e);return lr(t,o,new Ve(Fe(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Zn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ft(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.assert)(Un,"Reference.ts has not been loaded"),Un)(t._repo,t._path):t}var fr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?vr(t[".sv"],e):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.assert)(!1,"Unexpected server value: "+t)}},vr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return _r(e,new dr(n,t),r)},yr=function(t,e,n){return _r(t,new fr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Xt(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Xt(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function wr(t,e){for(var n=e instanceof ft?e:new ft(e),r=t,i=pt(n);null!==i;){var s=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=pt(n=vt(n))}return r}function Tr(t){return t.node.value}function Ir(t,e){t.node.value=e,Ar(t)}function Er(t){return t.node.childCount>0}function Cr(t,e){L(t.node.children,function(n,r){e(new br(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Cr(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function kr(t){return new ft(null===t.parent?t.name:kr(t.parent)+"/"+t.name)}function Ar(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Tr(t)&&!Er(t)}(n),i=(0,o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ar(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ar(t))}(t.parent,t.name,t)}var xr=/[\[\].#$\/\u0000-\u001F\u007F]/,Nr=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10485760,Rr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Or=function(t){return"string"==typeof t&&0!==t.length&&!Nr.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!A(t)||t&&"object"==typeof t&&(0,o.contains)(t,".sv")},Mr=function(t,e,n,r){r&&void 0===e||Lr((0,o.errorPrefix)(t,"value"),e,n)},Lr=function(t,e,n){var r=n instanceof ft?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+At(r));if("function"==typeof e)throw new Error(t+"contains a function "+At(r)+" with contents = "+e.toString());if(A(e))throw new Error(t+"contains "+e.toString()+" "+At(r));if("string"==typeof e&&e.length>Pr/3&&(0,o.stringLength)(e)>Pr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+At(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(L(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Rr(e)))throw new Error(t+" contains an invalid key ("+e+") "+At(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.stringLength)(e),kt(t)}(r,e),Lr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+At(r)+" in addition to actual children.")}},Fr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];L(e,function(t,e){var r=new ft(t);if(Lr(i,e,bt(n,r)),".priority"===mt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Rr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(It);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ct(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Ur=function(t,e,n){if(!n||void 0!==e){if(A(e))throw new Error((0,o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},jr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qr=function(t,e,n,r){if(!(r&&void 0===n||Or(n)))throw new Error((0,o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Hr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Rr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Or(t)}(n))throw new Error((0,o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Kr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.errorPrefix)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Et(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Gr(t,e,n){Wr(t,n),Qr(t,function(t){return Et(t,e)})}function $r(t,e,n){Wr(t,n),Qr(t,function(t){return Ct(t,e)||Ct(e,t)})}function Qr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Yr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&I("event: "+n.toString()),V(r)}}}var Xr="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ne(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Zr(t){var e=t.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Zr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new ft(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e),c=Xe.fromObject(n);return lr(t,s,new Be(Fe(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Tt(s,e);return lr(t,s,new qe(Fe(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.map)(n,function(t){return se(t)});a=function(t,e,n){var r=Xe.fromObject(n);return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=pi(t,s)),$r(t.eventQueue_,f,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Ne();Oe(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];Oe(n,dt(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=Ne(),$r(t.eventQueue_,dt(),r)}(t)}function ri(t,e,n){var r=new ft("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);$r(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=yr(s,a,o),c=ii(t),l=Yn(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var s=Xn(t.serverSyncTree_,c,!o);$r(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),$r(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Re(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Xr)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),I.apply(void 0,(0,s.__spreadArray)([r],(0,s.__read)(e)))}function hi(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function fi(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),Tr(e)){var n=vi(t,e);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=fi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Tt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){li(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Xn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,wr(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),$r(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(k("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,kr(e),n)}else Er(e)&&Cr(e,function(e){di(t,e)})}function pi(t,e){var n=gi(t,e),r=kr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Tt(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=fi(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Lr("transaction failed: Data returned ",d,c.path);var p=se(d);"object"==typeof d&&null!=d&&(0,o.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,v=ti(t),m=yr(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Yn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Xn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Xn(t.serverSyncTree_,c.currentWriteId,!0))}$r(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);di(t,t.transactionQueueTree_)}}(t,vi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Tr(r);)r=wr(r,n),n=pt(e=vt(e));return r}function vi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=Tr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Cr(e,function(e){mi(t,e,n)})}function yi(t,e){var n=Tr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Ir(e,n.length>0?n:void 0)}Cr(e,function(e){yi(t,e)})}function _i(t,e){var n=kr(gi(t,e)),r=wr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Sr(r,function(e){bi(t,e)}),n}function bi(t,e){var n=Tr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Xn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Ir(e,void 0):n.length=s+1,$r(t.eventQueue_,kr(e),i),a=0;a<r.length;a++)V(r[a])}}var wi=function(t,e){var n=Ti(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ft(n.pathString)}},Ti=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.__values)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ii=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},t}(),Ei=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var t=new o.Deferred;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Br("OnDisconnect.set",this._path),Mr("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Br("OnDisconnect.setWithPriority",this._path),Mr("OnDisconnect.setWithPriority",t,this._path,!1),Ur("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Br("OnDisconnect.update",this._path),Fr("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return function(t,e,n,r){if((0,o.isEmpty)(n))return I("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&L(n,function(n,r){var i=se(r);Pe(t.onDisconnect_,bt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),ki=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return wt(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=ke(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return ke(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Et(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ai(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ft){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ni(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pi=function(t){function e(e,n){return t.call(this,e,n,new Te,!1)||this}return(0,s.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ki),Ri=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ft(e),r=Mi(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Mi(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new ft(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Oi(t,e){return(t=(0,o.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Mi(t._root,e):t._root}function Di(t,e){(t=(0,o.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=wi(e,t._repo.repoInfo_.nodeAdmin);Hr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Oi(t,n.path.toString())}function Mi(t,e){var n;return null===pt((t=(0,o.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qr("child","path",n,!1)):qr("child","path",e,!1),new Pi(t._repo,bt(t._path,e))}function Li(t,e){t=(0,o.getModularInstance)(t),Br("push",t._path),Mr("push",e,t._path,!0);var n,r=Zr(t._repo),i=fe(r),s=Mi(t,i),a=Mi(t,i);return n=null!=e?Ui(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Fi(t){return Br("remove",t._path),Ui(t,null)}function Ui(t,e){t=(0,o.getModularInstance)(t),Br("set",t._path),Mr("set",e,t._path,!1);var n=new o.Deferred;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function ji(t,e){t=(0,o.getModularInstance)(t),Br("setPriority",t._path),Ur("setPriority",e,!1);var n=new o.Deferred;return oi(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Vi(t,e,n){if(Br("setWithPriority",t._path),Mr("setWithPriority",e,t._path,!1),Ur("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function qi(t,e){Fr("update",e,t._path,!1);var n=new o.Deferred;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(L(n,function(n,r){i=!1,a[n]=mr(bt(e,n),se(r),t.serverSyncTree_,s)}),i)I("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Xe.fromObject(n);return nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var s=Xn(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;$r(t.eventQueue_,a,s),hi(0,r,n,i)}),L(n,function(n){var r=_i(t,bt(e,n));pi(t,r)}),$r(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Bi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ii("value",this,new Ri(t.snapshotNode,new Pi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Hi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.assert)(null!=t.childName,"Child events should have a childName.");var n=Mi(new Pi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ii(t.type,this,new Ri(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Ki(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ci(n,o||void 0),c="value"===e?new Bi(u):new Hi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function zi(t,e,n,r){return Ki(t,"value",e,n,r)}function Wi(t,e,n,r){return Ki(t,"child_added",e,n,r)}function Gi(t,e,n,r){return Ki(t,"child_changed",e,n,r)}function $i(t,e,n,r){return Ki(t,"child_moved",e,n,r)}function Qi(t,e,n,r){return Ki(t,"child_removed",e,n,r)}function Yi(t,e,n){var r=null,i=n?new Ci(n):null;"value"===e?r=new Bi(i):e&&(r=new Hi(e,i)),ui(t._repo,t,r)}var Xi=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("endAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(Ni(e),xi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}(Xi);function Zi(t,e){return Vr("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=pe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?x:pe(r)),i.endBeforeSet_=!0,i);if(Ni(o),xi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}(Xi);function eo(t,e){return Vr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("startAt",this._value,t._path,!0);var e=Ie(t._queryParams,this._value,this._key);if(Ni(e),xi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ki(t._repo,t._path,e,t._orderByCalled)},e}(Xi);function ro(t,e){return void 0===t&&(t=null),Vr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Mr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=de(n)),i=Ie(e,n,r)):i=Ie(e,n,null==r?N:de(r)),i.startAfterSet_=!0,i);if(Ni(o),xi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ki(t._repo,t._path,o,t._orderByCalled)},e}(Xi);function oo(t,e){return Vr("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Xi);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ki(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Xi);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByChild");var e=new ft(this._path);if(wt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ce(t._queryParams,n);return xi(r),new ki(t._repo,t._path,r,!0)},e}(Xi);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByKey");var e=Ce(t._queryParams,Ft);return xi(e),new ki(t._repo,t._path,e,!0)},e}(Xi);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByPriority");var e=Ce(t._queryParams,Jt);return xi(e),new ki(t._repo,t._path,e,!0)},e}(Xi);function vo(){return new go}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.__extends)(e,t),e.prototype._apply=function(t){Ai(t,"orderByValue");var e=Ce(t._queryParams,le);return xi(e),new ki(t._repo,t._path,e,!0)},e}(Xi);function yo(){return new mo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.__extends)(e,t),e.prototype._apply=function(t){if(Mr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}(Xi);function bo(t,e){return Vr("equalTo","key",e,!0),new _o(t,e)}function wo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(t);try{for(var u=(0,s.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.assert)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Pi),function(t){(0,o.assert)(!Un,"__referenceConstructor has already been defined"),Un=t}(Pi);var To={},Io=!1;function Eo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new K(K.OWNER):new H(t.name,t.options,e);Hr("Invalid Firebase Database URL",a),wt(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=To[e.name];i||(To[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,Io,n,r),i[t.toURLString()]=o,o}(u,t,l,new B(t.name,n));return new Co(h,t)}var Co=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Z(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ae(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Ot(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){L(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Me(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new xe,t.infoSyncTree_=new Qn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Qn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);$r(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=To[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function ko(t){var e;(t=(0,o.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Xr)}var Ao={".sv":"timestamp"},xo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function No(t,e,n){var r;if(t=(0,o.getModularInstance)(t),Br("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.Deferred,a=zi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ri(r,new Pi(t._repo,t._path),Jt),s.resolve(new xo(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=fi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Lr("transaction failed: Data returned ",h,c.path),c.status=0;var f=wr(e.transactionQueueTree_,n),d=Tr(f)||[];d.push(c),Ir(f,d);var p=void 0;"object"==typeof h&&null!==h&&(0,o.contains)(h,".priority")?(p=(0,o.safeGet)(h,".priority"),(0,o.assert)(Dr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),v=se(h,p),y=yr(v,l,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(e);var _=Yn(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);$r(e.eventQueue_,n,_),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Po=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Ro=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Oo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),qr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),qr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Mo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Oo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return Qi(this._delegate,c,l),n;case"child_changed":return Gi(this._delegate,c,l),n;case"child_moved":return $i(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),jr("Query.off",t,!0),(0,o.validateCallback)("Query.off","callback",e,!0),(0,o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Yi(this._delegate,t,r)}else Yi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Tt(t,n);r=r||Hn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Hn(i,dt()):(i=new jn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new He(r,!0,!1):null;return Qe(qn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n).withIndex(e._queryParams.getIndex()),i=Jn(t.serverSyncTree_,e._path,r);return Gr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.getModularInstance)(t))._repo,t).then(function(e){return new Ri(e,new Pi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Oo(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Oo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Gi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":$i(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,wo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,wo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,wo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,wo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,wo(this._delegate,vo()))},t.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,wo(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,wo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,wo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,wo(this._delegate,Zi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,wo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,wo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Mo(this.database,new Pi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Mo=function(t){function e(e,n){var r=t.call(this,e,new ki(n._repo,n._path,new Te,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.__extends)(e,t),e.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Mi(this._delegate,t))},e.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",e,!0);var n=Ui(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",e,!0);var i=qi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Vi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",t,!0);var e=Fi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),(0,o.validateCallback)("Reference.transaction","onComplete",e,!0),Kr("Reference.transaction","applyLocally",n,!0);var i=No(this._delegate,t,{applyLocally:n}).then(function(t){return new Ro(t.committed,new Oo(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=ji(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=Li(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new Po(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Lo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new K(K.OWNER);else if(r.mockUserToken){var a=(0,o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new K(a)}!function(t,e,n,r){t.repoInfo_=new $(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Mo){var e=Di(this._delegate,t.toString());return new Mo(this,e)}return e=Oi(this._delegate,t),new Mo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.validateArgCount)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Mo(this,n)},t.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),ko(this._delegate)},t.ServerValue={TIMESTAMP:Ao,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);L(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return u.setComponent(new i.Component("auth-internal",function(){return r},"PRIVATE")),{instance:new Lo(Eo(e,u,void 0,n,a),e),namespace:o}}}),Uo=Ot;Ot.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ot.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var jo=Object.freeze({__proto__:null,DataConnection:Uo,RealTimeConnection:ut,hijackHash:function(t){var e=Ot.prototype.put;return Ot.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ot.prototype.put=e}},ConnectionTarget:$,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Io=t}(t)}}),Vo=Lo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.Component("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lo(Eo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Mo,Query:Do,Database:Lo,DataSnapshot:Oo,enableLogging:T,INTERNAL:Fo,ServerValue:Vo,TEST_ACCESS:jo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.5"),(0,o.isNodeSdk)()&&(t.exports=n)}(r.default)},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,{LogLevel:()=>s,Logger:()=>h,setLogLevel:()=>f,setUserLogHandler:()=>d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CONSTANTS:()=>i,Deferred:()=>d,ErrorFactory:()=>P,FirebaseError:()=>N,MAX_VALUE_MILLIS:()=>st,RANDOM_FACTOR:()=>at,Sha1:()=>$,areCookiesEnabled:()=>A,assert:()=>o,assertionError:()=>s,async:()=>X,base64:()=>u,base64Decode:()=>l,base64Encode:()=>c,calculateBackoffMillis:()=>ut,contains:()=>q,createMockUserToken:()=>p,createSubscribe:()=>Q,decode:()=>L,deepCopy:()=>h,deepExtend:()=>f,errorPrefix:()=>tt,extractQuerystring:()=>G,getGlobal:()=>x,getModularInstance:()=>lt,getUA:()=>g,isAdmin:()=>V,isBrowser:()=>y,isBrowserExtension:()=>_,isElectron:()=>w,isEmpty:()=>H,isIE:()=>T,isIndexedDBAvailable:()=>S,isMobileCordova:()=>v,isNode:()=>m,isNodeSdk:()=>E,isReactNative:()=>b,isSafari:()=>C,isUWP:()=>I,isValidFormat:()=>j,isValidTimestamp:()=>F,issuedAtTime:()=>U,jsonEval:()=>D,map:()=>K,ordinal:()=>ct,querystring:()=>z,querystringDecode:()=>W,safeGet:()=>B,stringLength:()=>ot,stringToByteArray:()=>it,stringify:()=>M,validateArgCount:()=>Z,validateCallback:()=>nt,validateContextObject:()=>rt,validateIndexedDBOpenable:()=>k,validateNamespace:()=>et});var r=n(762),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function I(){return g().indexOf("MSAppHost/")>=0}function E(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function C(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function A(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var N=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,P.prototype.create),o}return(0,r.__extends)(e,t),e}(Error),P=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?R(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new N(i,a,r);return u},t}();function R(t,e){return t.replace(O,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var O=/\{\$([^}]+)}/g;function D(t){return JSON.parse(t)}function M(t){return JSON.stringify(t)}var L=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=D(l(o[0])||""),n=D(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},F=function(t){var e=L(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},U=function(t){var e=L(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},j=function(t){var e=L(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},V=function(t){var e=L(t).claims;return"object"==typeof e&&!0===e.admin};function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function K(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function z(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function W(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("="),r=n[1];e[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),e}function G(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var $=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Q(t,e){var n=new Y(t,e);return n.subscribe.bind(n)}var Y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function X(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}function J(){}var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!=typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(t):""+t}function lt(t){return t&&t._delegate?t._delegate:t}},87:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},459:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(qA){e=qA instanceof l?f(qA.errors):[qA]}}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(qA){e=e||[],qA instanceof l?e=e.concat(f(qA.errors)):e.push(qA)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[d])return t[d]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[v](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?m:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class T extends p{constructor(t){super(t),this.destination=t}}let I=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new T(this)}lift(t){const e=new E(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new E(t,e),t})();class E extends I{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function S(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new k(t,e))}}class k{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new A(t,this.project,this.thisArg))}}class A extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const x=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const P=N(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const D=t=>{if(t&&"function"==typeof t[v])return n=t,t=>{const e=n[v]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return x(t);if(O(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e))(t);if(t&&"function"==typeof t[P])return e=t,t=>{const n=e[P]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function M(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function L(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[v]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[v]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(O(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return M(t,e);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[P](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(D(t))}class F extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function j(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=D(t)(e)}catch(r){e.error(r)}return n}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>L(t(n,r)).pipe(S((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends U{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new F(this),n=this.destination;n.add(e);const r=j(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return V(m,t)}function K(t,e){return e?M(t,e):new y(x(t))}function z(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new G(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class G extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class $ extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return z()(this)}}const Q=(()=>{const t=$.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends T{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function X(){return new I}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Z(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const nt=J({__forward_ref__:J});function rt(t){return t.__forward_ref__=rt,t.toString=function(){return tt(this())},t}function it(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(nt)&&t.__forward_ref__===rt}class st extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function at(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}function ct(t,e){const n=e?` in ${e}`:"";throw new st("201",`No provider for ${ut(t)} found${n}`)}function lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return dt(t,gt)||dt(t,mt)}function dt(t,e){return t.hasOwnProperty(e)?t[e]:null}function pt(t){return t&&(t.hasOwnProperty(vt)||t.hasOwnProperty(yt))?t[vt]:null}const gt=J({"\u0275prov":J}),vt=J({"\u0275inj":J}),mt=J({ngInjectableDef:J}),yt=J({ngInjectorDef:J});var _t=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let bt;function wt(t){const e=bt;return bt=t,e}function Tt(t,e,n){const r=ft(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_t.Optional?null:void 0!==e?e:void ct(tt(t),"Injector")}function It(t){return{toString:t}.toString()}var Et=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Ct=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const St="undefined"!=typeof globalThis&&globalThis,kt="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt="undefined"!=typeof global&&global,Nt=St||xt||kt||At,Pt={},Rt=[],Ot=J({"\u0275cmp":J}),Dt=J({"\u0275dir":J}),Mt=J({"\u0275pipe":J}),Lt=J({"\u0275mod":J}),Ft=J({"\u0275loc":J}),Ut=J({"\u0275fac":J}),jt=J({__NG_ELEMENT_ID__:J});let Vt=0;function qt(t){return It(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Et.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Rt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,id:"c",styles:t.styles||Rt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Vt++,n.inputs=Wt(t.inputs,e),n.outputs=Wt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Bt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ht):null,n})}function Bt(t){return $t(t)||function(t){return t[Dt]||null}(t)}function Ht(t){return function(t){return t[Mt]||null}(t)}const Kt={};function zt(t){return It(()=>{const e={type:t.type,bootstrap:t.bootstrap||Rt,declarations:t.declarations||Rt,imports:t.imports||Rt,exports:t.exports||Rt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Kt[t.id]=t.type),e})}function Wt(t,e){if(null==t)return Pt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Gt=qt;function $t(t){return t[Ot]||null}function Qt(t,e){const n=t[Lt]||null;if(!n&&!0===e)throw new Error(`Type ${tt(t)} does not have '\u0275mod' property.`);return n}const Yt=20,Xt=10;function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Zt(t){return Array.isArray(t)&&!0===t[1]}function te(t){return 0!=(8&t.flags)}function ee(t){return 2==(2&t.flags)}function ne(t){return 1==(1&t.flags)}function re(t){return null!==t.template}function ie(t,e){return t.hasOwnProperty(Ut)?t[Ut]:null}class oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function se(){return ae}function ae(t){return t.type.prototype.ngOnChanges&&(t.setInput=ce),ue}function ue(){const t=le(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Pt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ce(t,e,n,r){const i=le(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Pt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new oe(u&&u.currentValue,e,s===Pt),t[r]=e}function le(t){return t.__ngSimpleChanges__||null}let he;function fe(t){return!!t.listen}se.ngInherit=!0;const de={createRenderer:(t,e)=>void 0!==he?he:"undefined"!=typeof document?document:void 0};function pe(t){for(;Array.isArray(t);)t=t[0];return t}function ge(t,e){return pe(e[t])}function ve(t,e){return pe(e[t.index])}function me(t,e){return t.data[e]}function ye(t,e){const n=e[t];return Jt(n)?n:n[0]}function _e(t){return 128==(128&t[2])}function be(t,e){return null==e?null:t[e]}function we(t){t[18]=0}function Te(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ie={lFrame:Ke(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ee(){return Ie.bindingsEnabled}function Ce(){return Ie.lFrame.lView}function Se(){return Ie.lFrame.tView}function ke(t){return Ie.lFrame.contextLView=t,t[8]}function Ae(){let t=xe();for(;null!==t&&64===t.type;)t=t.parent;return t}function xe(){return Ie.lFrame.currentTNode}function Ne(t,e){const n=Ie.lFrame;n.currentTNode=t,n.isParent=e}function Pe(){return Ie.lFrame.isParent}function Re(){return Ie.isInCheckNoChangesMode}function Oe(t){Ie.isInCheckNoChangesMode=t}function De(){const t=Ie.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Me(){return Ie.lFrame.bindingIndex++}function Le(t){const e=Ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Fe(t,e){const n=Ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ue(e)}function Ue(t){Ie.lFrame.currentDirectiveIndex=t}function je(t){Ie.lFrame.currentQueryIndex=t}function Ve(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function qe(t,e,n){if(n&_t.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&_t.Host||(r=Ve(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ie.lFrame=He();return r.currentTNode=e,r.lView=t,!0}function Be(t){const e=He(),n=t[1];Ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function He(){const t=Ie.lFrame,e=null===t?null:t.child;return null===e?Ke(t):e}function Ke(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ze(){const t=Ie.lFrame;return Ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const We=ze;function Ge(){const t=ze();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $e(){return Ie.lFrame.selectedIndex}function Qe(t){Ie.lFrame.selectedIndex=t}function Ye(){const t=Ie.lFrame;return me(t.tView,t.selectedIndex)}function Xe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Je(t,e,n){en(t,e,3,n)}function Ze(t,e,n,r){(3&t[2])===n&&en(t,e,n,r)}function tn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function en(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(nn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function nn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const rn=-1;class on{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function sn(t,e,n){const r=fe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];un(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function an(t){return 3===t||4===t||6===t}function un(t){return 64===t.charCodeAt(0)}function cn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ln(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ln(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function hn(t){return t!==rn}function fn(t){return 32767&t}function dn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let pn=!0;function gn(t){const e=pn;return pn=t,e}let vn=0;function mn(t,e){const n=_n(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,yn(r.data,t),yn(e,null),yn(r.blueprint,null));const i=bn(t,e),o=t.injectorIndex;if(hn(i)){const t=fn(i),n=dn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function yn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _n(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function bn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return rn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return rn}function wn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(jt)&&(r=n[jt]),null==r&&(r=n[jt]=vn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Tn(t,e,n){if(n&_t.Optional)return t;ct(e,"NodeInjector")}function In(t,e,n,r){if(n&_t.Optional&&void 0===r&&(r=null),0==(n&(_t.Self|_t.Host))){const i=t[9],o=wt(void 0);try{return i?i.get(e,r,n&_t.Optional):Tt(e,r,n&_t.Optional)}finally{wt(o)}}return Tn(r,e,n)}function En(t,e,n,r=_t.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(jt)?t[jt]:void 0;return"number"==typeof e?e>=0?255&e:Sn:e}(n);if("function"==typeof o){if(!qe(e,t,r))return r&_t.Host?Tn(i,n,r):In(e,n,r,i);try{const t=o(r);if(null!=t||r&_t.Optional)return t;ct(n)}finally{We()}}else if("number"==typeof o){let i=null,s=_n(t,e),a=rn,u=r&_t.Host?e[16][6]:null;for((-1===s||r&_t.SkipSelf)&&(a=-1===s?bn(t,e):e[s+8],a!==rn&&Nn(r,!1)?(i=e[1],s=fn(a),e=dn(a,e)):s=-1);-1!==s;){const t=e[1];if(xn(o,s,t.data)){const t=kn(s,e,n,i,r,u);if(t!==Cn)return t}a=e[s+8],a!==rn&&Nn(r,e[1].data[s+8]===u)&&xn(o,s,e)?(i=t,s=fn(a),e=dn(a,e)):s=-1}}}return In(e,n,r,i)}const Cn={};function Sn(){return new Pn(Ae(),Ce())}function kn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&re(t)&&t.type===n)return u}return null}(a,s,n,null==r?ee(a)&&pn:r!=s&&0!=(3&a.type),i&_t.Host&&o===a);return null!==u?An(e,s,u,a):Cn}function An(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof on){const s=i;s.resolving&&function(t,e){throw new st("200",`Circular dependency in DI detected for ${t}`)}(ut(o[n]));const a=gn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?wt(s.injectImpl):null;qe(t,r,_t.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=ae(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&wt(u),gn(a),s.resolving=!1,We()}}return i}function xn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Nn(t,e){return!(t&_t.Self||t&_t.Host&&e)}class Pn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return En(this._tNode,this._lView,t,void 0,e)}}function Rn(t){return It(()=>{const e=t.prototype.constructor,n=e[Ut]||On(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Ut]||On(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function On(t){return ot(t)?()=>{const e=On(it(t));return e&&e()}:ie(t)}const Dn="__parameters__";function Mn(t,e,n){return It(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Dn)?t[Dn]:Object.defineProperty(t,Dn,{value:[]})[Dn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ln{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=lt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Fn=new Ln("AnalyzeForEntryComponents"),Un=Function;function jn(t,e){t.forEach(t=>Array.isArray(t)?jn(t,e):e(t))}function Vn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Bn(t,e,n){let r=Kn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Hn(t,e){const n=Kn(t,e);if(n>=0)return t[1|n]}function Kn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const zn={},Wn=/\n/gm,Gn="__source",$n=J({provide:String,useValue:J});let Qn;function Yn(t){const e=Qn;return Qn=t,e}function Xn(t,e=_t.Default){if(void 0===Qn)throw new Error("inject() must be called from an injection context");return null===Qn?Tt(t,void 0,e):Qn.get(t,e&_t.Optional?null:void 0,e)}function Jn(t,e=_t.Default){return(bt||Xn)(it(t),e)}function Zn(t){const e=[];for(let n=0;n<t.length;n++){const r=it(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=_t.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Jn(t,n))}else e.push(Jn(r))}return e}function tr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const er=tr(Mn("Inject",t=>({token:t})),-1),nr=tr(Mn("Optional"),8),rr=tr(Mn("SkipSelf"),4);class ir{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function or(t){return t instanceof ir?t.changingThisBreaksApplicationSecurity:t}const sr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ar=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ur=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function cr(t){const e=function(){const t=Ce();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":function(t,e){const n=function(t){return t instanceof ir&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?or(t):(n=at(t),(n=String(n)).match(sr)||n.match(ar)?n:"unsafe:"+n);var n}function lr(t,e){t.__ngContext__=e}function hr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function fr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function pr(t,...e){t.error(...e)}class gr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?fr(t)?fr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}const vr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function mr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function _r(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return Zt(e)?e[3]:e}function wr(t){return Ir(t[13])}function Tr(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!Zt(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let o,s=!1;Zt(r)?o=r:Jt(r)&&(s=!0,r=r[0]);const a=pe(r);0===t&&null!==n?null==i?Pr(e,n,a):Nr(e,n,a,i||null,!0):1===t&&null!==n?Nr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Or(t,e);r&&function(t,e,n,r){fe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==pe(n)&&Er(e,t,r,o,i);for(let s=Xt;s<n.length;s++){const i=n[s];jr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Cr(t,e,n){return fe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Sr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Te(i,-1)),n.splice(r,1)}function kr(t,e){if(t.length<=Xt)return;const n=Xt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Sr(o,r),e>0&&(t[n-1][4]=r[4]);const s=qn(t,Xt+e);jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];fe(n)&&n.destroyNode&&jr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),Jt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof on)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):pe(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&fe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Zt(e[3])){n!==e[3]&&Sr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Nr(t,e,n,r,i){fe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Pr(t,e,n){fe(t)?t.appendChild(e,n):e.appendChild(n)}function Rr(t,e,n,r,i){null!==r?Nr(t,e,n,r,i):Pr(t,e,n)}function Or(t,e){return fe(t)?t.parentNode(e):e.parentNode}function Dr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===Ct.None||e===Ct.Emulated)return null}return ve(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?ve(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Rr(o,i,n[a],s,!1);else Rr(o,i,n,s,!1)}function Mr(t,e){if(null!==e){const n=e.type;if(3&n)return ve(e,t);if(4&n)return Fr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Mr(t,n);{const n=t[e.index];return Zt(n)?Fr(-1,n):pe(n)}}if(32&n)return _r(e,t)()||pe(t[e.index]);{const n=Lr(t,e);return null!==n?Array.isArray(n)?n[0]:Mr(br(t[16]),n):Mr(t,e.next)}}return null}function Lr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Fr(t,e){const n=Xt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Mr(t,r)}return e[7]}function Ur(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&lr(pe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ur(t,e,n.child,r,i,o,!1),Er(e,t,i,a,o);else if(32&u){const s=_r(n,r);let u;for(;u=s();)Er(e,t,i,u,o);Er(e,t,i,a,o)}else 16&u?Vr(t,e,r,n,i,o):Er(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jr(t,e,n,r,i,o){Ur(n,r,t.firstChild,e,i,o,!1)}function Vr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],o);else Ur(t,e,a,s[3],i,o,!0)}function qr(t,e,n){fe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Br(t,e,n){fe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Kr="ng-template";function zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Wr(t){return 4===t.type&&t.value!==Kr}function Gr(t,e,n){return e===(4!==t.type||n?t.value:Kr)}function $r(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(an(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Gr(t,u,n)||""===u&&1===e.length){if(Qr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!zr(t.attrs,c,n)){if(Qr(r))return!1;s=!0}continue}const l=Yr(8&r?"class":u,i,Wr(t),n);if(-1===l){if(Qr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hr(e,c,0)||2&r&&c!==t){if(Qr(r))return!1;s=!0}}}}else{if(!s&&!Qr(r)&&!Qr(u))return!1;if(s&&Qr(u))continue;s=!1,r=u|1&r}}return Qr(r)||s}function Qr(t){return 0==(1&t)}function Yr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Xr(t,e,n=!1){for(let r=0;r<e.length;r++)if($r(t,e[r],n))return!0;return!1}function Jr(t,e){return t?":not("+e.trim()+")":e}function Zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Qr(s)||(e+=Jr(o,i),i=""),r=s,o=o||!Qr(r);n++}return""!==i&&(e+=Jr(o,i)),e}const ti={};function ei(t){ni(Se(),Ce(),$e()+t,Re())}function ni(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Je(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ze(e,r,0,n)}Qe(n)}function ri(t,e){return t<<17|e<<2}function ii(t){return t>>17&32767}function oi(t){return 2|t}function si(t){return(131068&t)>>2}function ai(t,e){return-131069&t|e<<2}function ui(t){return 1|t}function ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];je(i),n.contentQueries(2,e[o],o)}}}function li(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,we(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function hi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=xe(),s=Pe(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ie.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ne(o,!0),o}function fi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){Be(e);try{const r=t.viewQuery;null!==r&&qi(1,r,n);const i=t.template;null!==i&&vi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ci(t,e),t.staticViewQueries&&qi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Li(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ge()}}function pi(t,e,n,r){const i=e[2];if(256==(256&i))return;Be(e);const o=Re();try{we(e),Ie.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&vi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Je(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ze(e,n,0,null),tn(e,0)}if(function(t){for(let e=wr(t);null!==e;e=Tr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Te(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=Tr(e))for(let t=Xt;t<e.length;t++){const n=e[t],r=n[1];_e(n)&&pi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Je(e,n)}else{const n=t.contentHooks;null!==n&&Ze(e,n,1),tn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Qe(~r);else{const i=r,o=n[++t],s=n[++t];Fe(o,i),s(2,e[i])}}}finally{Qe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&qi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Je(e,n)}else{const n=t.viewHooks;null!==n&&Ze(e,n,2),tn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Te(e[3],-1))}finally{Ge()}}function gi(t,e,n,r){const i=e[10],o=!Re(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&di(t,e,r),pi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function vi(t,e,n,r,i){const o=$e(),s=2&r;try{Qe(-1),s&&e.length>Yt&&ni(t,e,Yt,Re()),n(r,i)}finally{Qe(o)}}function mi(t,e,n){Ee()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||mn(n,e),lr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=re(r);o&&Ni(e,n,r);const u=An(e,t,a,n);lr(u,e),null!==s&&Pi(0,a-i,u,r,0,s),o&&(ye(n.index,e)[8]=u)}}(t,e,n,ve(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ie.lFrame.currentDirectiveIndex;try{Qe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ue(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ci(r,i)}}finally{Qe(-1),Ue(s)}}(t,e,n))}function yi(t,e,n=ve){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function _i(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=bi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function bi(t,e,n,r,i,o,s,a,u,c){const l=Yt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ti);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ti(t,e,n,r,i,o,s,a){const u=ve(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),ee(e)&&function(t,e){const n=ye(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,fe(o)?o.setProperty(u,r,i):un(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ii(t,e,n,r){let i=!1;if(Ee()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Xr(n,s.selectors,!1)&&(i||(i=[]),wn(mn(n,e),t,s.type),re(s)?(Si(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ai(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=fi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=cn(n.mergedAttrs,c.hostAttrs),xi(t,n,e,u,c),ki(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Wr(e)?null:Ri(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new st("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=cn(n.mergedAttrs,n.attrs),i}function Ei(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ci(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Si(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ki(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;re(e)&&(n[""]=t)}}function Ai(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=ie(i.type)),s=new on(o,re(i),null);t.blueprint[r]=s,n[r]=s,Ei(t,e,0,r,fi(t,n,i.hostVars,ti),i)}function Ni(t,e,n){const r=ve(e,t),i=_i(n),o=t[10],s=Fi(t,li(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Pi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Ri(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Oi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Di(t,e){const n=ye(e,t);if(_e(n)){const t=n[1];80&n[2]?pi(t,n,t.template,n[8]):n[5]>0&&Mi(n)}}function Mi(t){for(let n=wr(t);null!==n;n=Tr(n))for(let t=Xt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];pi(t,e,t.template,e[8])}else e[5]>0&&Mi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=ye(e[n],t);_e(r)&&r[5]>0&&Mi(r)}}function Li(t,e){const n=ye(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Fi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ji(t,e,n){const r=e[10];r.begin&&r.begin();try{pi(t,e,t.template,n)}catch(i){throw zi(e,i),i}finally{r.end&&r.end()}}function Vi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=hr(n),i=r[1];gi(i,r,i.template,n)}}(t[8])}function qi(t,e,n){je(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function Hi(t){return t[7]||(t[7]=[])}function Ki(t){return t.cleanup||(t.cleanup=[])}function zi(t,e){const n=t[9],r=n?n.get(gr,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Gi(t,e,n){const r=ge(e,t);!function(t,e,n){fe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function $i(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=et(i,t):2==o&&(r=et(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Qi=new Ln("INJECTOR",-1);class Yi{get(t,e=zn){if(e===zn){const e=new Error(`NullInjectorError: No provider for ${tt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xi=new Ln("Set Injector scope."),Ji={},Zi={};let to;function eo(){return void 0===to&&(to=new Yi),to}function no(t,e=null,n=null,r){return new ro(t,n,e||eo(),r)}class ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&jn(e,n=>this.processProvider(n,t,e)),jn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Qi,so(void 0,this));const o=this.records.get(Xi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=zn,n=_t.Default){this.assertNotDestroyed();const r=Yn(this);try{if(!(n&_t.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ln)&&ft(t);e=n&&this.injectableDefInScope(n)?so(io(t),Ji):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&_t.Self?eo():this.parent).get(t,e=n&_t.Optional&&e===zn?null:e)}catch(qA){if("NullInjectorError"===qA.name){if((qA.ngTempTokenPath=qA.ngTempTokenPath||[]).unshift(tt(t)),r)throw qA;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Gn]&&i.unshift(e[Gn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=tt(e);if(Array.isArray(e))i=e.map(tt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):tt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Wn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(qA,t,"R3InjectorError",this.source)}throw qA}finally{Yn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(tt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=it(t)))return!1;let r=pt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=pt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{jn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];jn(r,t=>this.processProvider(t,n,r||Rt))}}this.injectorDefTypes.add(o);const a=ie(o)||(()=>new o);this.records.set(o,so(a,Ji));const u=r.providers;if(null!=u&&!s){const e=t;jn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=uo(t=it(t))?t:it(t&&t.provide);const i=function(t,e,n){return ao(t)?so(void 0,t.useValue):so(oo(t),Ji)}(t);if(uo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=so(void 0,Ji,!0),e.factory=()=>Zn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ji&&(e.value=Zi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=it(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function io(t){const e=ft(t),n=null!==e?e.factory:ie(t);if(null!==n)return n;if(t instanceof Ln)throw new Error(`Token ${tt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${tt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[gt]||t[mt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function oo(t,e,n){let r;if(uo(t)){const e=it(t);return ie(e)||io(e)}if(ao(t))r=()=>it(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Zn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Jn(it(t.useExisting));else{const e=it(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ie(e)||io(e);r=()=>new e(...Zn(t.deps))}var i;return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ao(t){return null!==t&&"object"==typeof t&&$n in t}function uo(t){return"function"==typeof t}const co=function(t,e,n){return function(t,e=null,n=null,r){const i=no(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let lo=(()=>{class t{static create(t,e){return Array.isArray(t)?co(t,e,""):co(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=zn,t.NULL=new Yi,t.\u0275prov=lt({token:t,providedIn:"any",factory:()=>Jn(Qi)}),t.__NG_ELEMENT_ID__=-1,t})();function ho(t,e){Xe(hr(t)[1],Ae())}function fo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(re(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=po(t.inputs),e.declaredInputs=po(t.declaredInputs),e.outputs=po(t.outputs);const n=i.hostBindings;n&&mo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&go(t,o),s&&vo(t,s),Z(t.inputs,i.inputs),Z(t.declaredInputs,i.declaredInputs),Z(t.outputs,i.outputs),re(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===fo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=cn(i.hostAttrs,n=cn(n,i.hostAttrs))}}(r)}function po(t){return t===Pt?{}:t===Rt?[]:t}function go(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function vo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function mo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let yo=null;function _o(){if(!yo){const t=Nt.Symbol;if(t&&t.iterator)yo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(yo=n)}}}return yo}function bo(t){return!!wo(t)&&(Array.isArray(t)||!(t instanceof Map)&&_o()in t)}function wo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function To(t,e,n){return t[e]=n}function Io(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Eo(t,e,n,r){const i=Ce();return Io(i,Me(),e)&&(Se(),function(t,e,n,r,i,o){const s=ve(t,e);!function(t,e,n,r,i,o,s){if(null==o)fe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?at(o):s(o,r||"",i);fe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Ye(),i,t,e,n,r)),Eo}function Co(t,e,n,r,i,o,s,a){const u=Ce(),c=Se(),l=t+Yt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=hi(e,t,4,s||null,be(c,a));Ii(e,n,l,be(c,u)),Xe(e,l);const h=l.tViews=bi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ne(h,!1);const f=u[11].createComment("");Dr(c,u,f,h),lr(f,u),Fi(u,u[l]=Oi(f,u,f,h)),ne(h)&&mi(c,u,h),null!=s&&yi(u,h,a)}function So(t){return function(t,e){return t[e]}(Ie.lFrame.contextLView,Yt+t)}function ko(t,e=_t.Default){const n=Ce();return null===n?Jn(t,e):En(Ae(),n,it(t),e)}function Ao(t,e,n){const r=Ce();return Io(r,Me(),e)&&Ti(Se(),Ye(),r,t,e,r[11],n,!1),Ao}function xo(t,e,n,r,i){const o=i?"class":"style";Wi(t,n,e.inputs[o],o,r)}function No(t,e,n,r){const i=Ce(),o=Se(),s=Yt+t,a=i[11],u=i[s]=Cr(a,e,Ie.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=hi(e,t,2,i,be(a,o));return Ii(e,n,u,be(a,s)),null!==u.attrs&&$i(u,u.attrs,!1),null!==u.mergedAttrs&&$i(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ne(c,!0);const l=c.mergedAttrs;null!==l&&sn(a,u,l);const h=c.classes;null!==h&&Br(a,u,h);const f=c.styles;null!==f&&qr(a,u,f),64!=(64&c.flags)&&Dr(o,i,u,c),0===Ie.lFrame.elementDepthCount&&lr(u,i),Ie.lFrame.elementDepthCount++,ne(c)&&(mi(o,i,c),function(t,e,n){if(te(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&yi(i,c)}function Po(){let t=Ae();Pe()?Ie.lFrame.isParent=!1:(t=t.parent,Ne(t,!1));const e=t;Ie.lFrame.elementDepthCount--;const n=Se();n.firstCreatePass&&(Xe(n,t),te(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&xo(n,e,Ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&xo(n,e,Ce(),e.stylesWithoutHost,!1)}function Ro(t,e,n,r){No(t,e,n,r),Po()}function Oo(){return Ce()}function Do(t){return!!t&&"function"==typeof t.then}const Mo=function(t){return!!t&&"function"==typeof t.subscribe};function Lo(t,e,n,r){const i=Ce(),o=Se(),s=Ae();return function(t,e,n,r,i,o,s,a){const u=ne(r),c=t.firstCreatePass&&Ki(t),l=Hi(e);let h=!0;if(3&r.type||a){const f=ve(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(pe(t[r.index])):r.index;if(fe(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Uo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Uo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Uo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Lo}function Fo(t,e,n,r){try{return!1!==n(r)}catch(i){return zi(t,i),!1}}function Uo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?ye(t.index,e):e;0==(32&e[2])&&Ui(s);let a=Fo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Fo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function jo(t=1){return function(t){return(Ie.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ie.lFrame.contextLView))[8]}(t)}function Vo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ii(o):si(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];qo(t[a],e)&&(u=!0,t[a+1]=r?ui(n):oi(n)),a=r?ii(n):si(n)}u&&(t[n+1]=r?oi(o):ui(o))}function qo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Kn(t,e)>=0}function Bo(t,e){return function(t,e,n,r){const i=Ce(),o=Se(),s=Le(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[$e()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ie.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Ko(n=Ho(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ho(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==si(r))return t[ii(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ho(null,t,e,n[1],r),n=Ko(n,e.attrs,r),function(t,e,n,r){t[ii(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ko(r,t[o].hostAttrs,true);return Ko(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ii(s),u=si(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Kn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ii(t[a+1]);t[r+1]=ri(e,a),0!==e&&(t[e+1]=ai(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ri(a,0),0!==a&&(t[a+1]=ai(t[a+1],r)),a=r;else t[r+1]=ri(u,0),0===a?a=r:t[u+1]=ai(t[u+1],r),u=r;l&&(t[r+1]=oi(t[r+1])),Vo(t,c,r,!0),Vo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&Kn(o,e)>=0&&(n[r+1]=ui(n[r+1]))}(e,c,t,r),s=ri(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ti&&Io(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?zo(u,e,n,i,si(c),s):void 0)||(Wo(o)||function(t){return 2==(2&t)}(c)&&(o=zo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=fe(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,ge($e(),n),i,o))}(o,o.data[$e()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=tt(or(t))),t}(e),true,s)}(t,e),Bo}function Ho(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ko(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ko(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Bn(t,s,!!n||e[++o]))}return void 0===t?null:t}function zo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ti&&(l=c?Rt:void 0);let h=c?Hn(l,r):u===r?l:void 0;if(o&&!Wo(h)&&(h=Hn(e,r)),Wo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ii(f):si(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Hn(t,r))}return a}function Wo(t){return void 0!==t}function Go(t,e=""){const n=Ce(),r=Se(),i=t+Yt,o=r.firstCreatePass?hi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return fe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Dr(r,n,s,o),Ne(o,!1)}function $o(t){return Qo("",t,""),$o}function Qo(t,e,n){const r=Ce(),i=function(t,e,n,r){return Io(t,Me(),n)?e+at(n)+r:ti}(r,t,e,n);return i!==ti&&Gi(r,$e(),i),Qo}function Yo(t,e,n,r,i){const o=Ce(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=Io(t,e,n);return Io(t,e+1,r)||i}(t,Ie.lFrame.bindingIndex,n,i);return Le(2),s?e+at(n)+r+at(i)+o:ti}(o,t,e,n,r,i);return s!==ti&&Gi(o,$e(),s),Yo}function Xo(t,e,n){const r=Ce();return Io(r,Me(),e)&&Ti(Se(),Ye(),r,t,e,r[11],n,!0),Xo}const Jo=void 0;var Zo=["en",[["a","p"],["AM","PM"],Jo],[["AM","PM"],Jo,Jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jo,"{1} 'at' {0}",Jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ts={};function es(t){return t in ts||(ts[t]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[t]),ts[t]}var ns=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const rs="en-US";let is=rs;function os(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(is=t.toLowerCase().replace(/_/g,"-"))}function ss(t,e,n,r,i){if(t=it(t),Array.isArray(t))for(let o=0;o<t.length;o++)ss(t[o],e,n,r,i);else{const o=Se(),s=Ce();let a=uo(t)?t:it(t.provide),u=oo(t);const c=Ae(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(uo(t)||!t.multi){const r=new on(u,i,ko),d=cs(a,e,i?l:l+f,h);-1===d?(wn(mn(c,s),o,a),as(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=cs(a,e,l+f,h),p=cs(a,e,l,l+f),g=d>=0&&n[d],v=p>=0&&n[p];if(i&&!v||!i&&!g){wn(mn(c,s),o,a);const l=function(t,e,n,r,i){const o=new on(t,n,ko);return o.multi=[],o.index=e,o.componentProviders=0,us(o,i,r&&!n),o}(i?hs:ls,n.length,i,r,u);!i&&v&&(n[p].providerFactory=l),as(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else as(o,t,d>-1?d:p,us(n[i?p:d],u,!i&&r));!i&&r&&v&&n[p].componentProviders++}}}function as(t,e,n,r){const i=uo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function us(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function cs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ls(t,e,n,r){return fs(this.multi,[])}function hs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=An(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),fs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],fs(i,o);return o}function fs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ds(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Se();if(r.firstCreatePass){const i=re(t);ss(n,r.data,r.blueprint,i,!0),ss(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ps{}class gs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${tt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let vs=(()=>{class t{}return t.NULL=new gs,t})();function ms(...t){}function ys(t,e){return new bs(ve(t,e))}const _s=function(){return ys(Ae(),Ce())};let bs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=_s,t})();class ws{}let Ts=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Is(),t})();const Is=function(){const t=Ce(),e=ye(Ae().index,t);return function(t){return t[11]}(Jt(e)?e:t)};let Es=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>null}),t})();class Cs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ss=new Cs("12.0.5");class ks{constructor(){}supports(t){return bo(t)}create(t){return new xs(t)}}const As=(t,e)=>e;class xs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||As}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Os(n,r,i)?e:n,s=Os(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!bo(t))throw new Error(`Error trying to diff '${tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_o()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ns(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Rs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ns{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ps{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Rs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ps,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Os(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ds{constructor(){}supports(t){return t instanceof Map||wo(t)}create(){return new Ms}}class Ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||wo(t)))throw new Error(`Error trying to diff '${tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ls(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ls{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fs(){return new Us([new ks])}let Us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fs()),deps:[[t,new rr,new nr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:Fs}),t})();function js(){return new Vs([new Ds])}let Vs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||js()),deps:[[t,new rr,new nr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:js}),t})();function qs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(pe(o)),Zt(o))for(let t=Xt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&qs(e[1],e,n,r)}const s=n.type;if(8&s)qs(t,e,n.child,r);else if(32&s){const t=_r(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Lr(e,n);if(Array.isArray(t))r.push(...t);else{const n=br(e[16]);qs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Bs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Zt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(kr(t,n),qn(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=Hi(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Oe(!0);try{ji(t,e,n)}finally{Oe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,jr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Hs extends Bs{constructor(t){super(t),this._view=t}detectChanges(){Vi(this._view)}checkNoChanges(){!function(t){Oe(!0);try{Vi(t)}finally{Oe(!1)}}(this._view)}get context(){return null}}const Ks=function(t){return function(t,e,n){if(ee(t)&&!n){const n=ye(t.index,e);return new Bs(n,n)}return 47&t.type?new Bs(e[16],e):null}(Ae(),Ce(),16==(16&t))};let zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ks,t})();const Ws=[new Ds],Gs=new Us([new ks]),$s=new Vs(Ws),Qs=function(){return t=Ae(),e=Ce(),4&t.type?new Js(e,t,ys(t,e)):null;var t,e};let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qs,t})();const Xs=Ys,Js=class extends Xs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=li(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new Bs(n)}};class Zs{}class ta{}const ea=function(){return function(t,e){let n;const r=e[t.index];if(Zt(r))n=r;else{let i;if(8&t.type)i=pe(r);else{const n=e[11];i=n.createComment("");const r=ve(t,e);Nr(n,Or(n,r),i,function(t,e){return fe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Oi(r,e,i,t),Fi(e,n)}return new ia(n,t,e)}(Ae(),Ce())};let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t})();const ra=na,ia=class extends ra{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ys(this._hostTNode,this._hostLView)}get injector(){return new Pn(this._hostTNode,this._hostLView)}get parentInjector(){const t=bn(this._hostTNode,this._hostLView);if(hn(t)){const e=dn(t,this._hostLView),n=fn(t);return new Pn(e[1].data[n+8],e)}return new Pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=oa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Xt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Zs,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(Zt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ia(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Xt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Xt?(e[4]=n[i],Vn(n,Xt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Fr(i,o),a=n[11],u=Or(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,jr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Vn(sa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=oa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);n&&(qn(sa(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=kr(this._lContainer,e);return n&&null!=qn(sa(this._lContainer),e)?new Bs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function oa(t){return t[8]}function sa(t){return t[8]||(t[8]=[])}const aa={};class ua extends vs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=$t(t);return new ha(e,this.ngModule)}}function ca(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const la=new Ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vr});class ha extends ps{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ca(this.componentDef.inputs)}get outputs(){return ca(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,aa,i);return o!==aa||r===aa?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ws,de),s=i.get(Es,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(fe(t))return t.selectRootElement(e,n===Ct.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:vr,clean:Bi,playerHandler:null,flags:0},f=bi(0,null,null,1,0,null,null,null,null,null),d=li(null,f,h,l,null,null,o,a,s,i);let p,g;Be(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=hi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&($i(a,u,!0),null!==t&&(sn(i,t,u),null!==a.classes&&Br(i,t,a.classes),null!==a.styles&&qr(i,t,a.styles)));const c=r.createRenderer(t,e),l=li(n,_i(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(wn(mn(a,n),s,e.type),Si(s,a),Ai(a,n.length,1)),Fi(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)sn(a,c,["ng-version",Ss.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Qr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&sn(a,c,t),e&&e.length>0&&Br(a,c,e.join(" "))}if(g=me(f,Yt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ae();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xi(t,r,e,fi(t,e,1,null),n));const i=An(e,t,r.directiveStart,r);lr(i,e);const o=ve(r,e);return o&&lr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ae();e.contentQueries(1,s,t.directiveStart)}const a=Ae();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Qe(a.index),Ei(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ci(e,s)),s}(t,this.componentDef,d,h,[ho]),di(f,d,null)}finally{Ge()}return new fa(this.componentType,p,ys(g,d),d,g)}}class fa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Hs(r),this.componentType=t}get injector(){return new Pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const da=new Map;class pa extends Zs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ua(this);const n=Qt(t),r=t[Ft]||null;r&&os(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=no(t,e,[{provide:Zs,useValue:this},{provide:vs,useValue:this.componentFactoryResolver}],tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=lo.THROW_IF_NOT_FOUND,n=_t.Default){return t===lo||t===Zs||t===Qi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ga extends ta{constructor(t){super(),this.moduleType=t,null!==Qt(t)&&function(t){const e=new Set;!function t(n){const r=Qt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${tt(e)} vs ${tt(e.name)}`)}(i,da.get(i),n),da.set(i,n));const o=mr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new pa(this.moduleType,t)}}function va(t){return e=>{setTimeout(t,void 0,e)}}const ma=class extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,o;let s=t,a=e||(()=>null),u=n;if(t&&"object"==typeof t){const e=t;s=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),u=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(a=va(a),s&&(s=va(s)),u&&(u=va(u)));const c=super.subscribe({next:s,error:a,complete:u});return t instanceof h&&t.add(c),c}},ya=new Ln("Application Initializer");let _a=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ms,this.reject=ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Do(e))t.push(e);else if(Mo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Jn(ya,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const ba=new Ln("AppId"),wa={provide:ba,useFactory:function(){return`${Ta()}${Ta()}${Ta()}`},deps:[]};function Ta(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ia=new Ln("Platform Initializer"),Ea=new Ln("Platform ID"),Ca=new Ln("appBootstrapListener");let Sa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const ka=new Ln("LocaleId"),Aa=new Ln("DefaultCurrencyCode");class xa{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Na=function(t){return new ga(t)},Pa=Na,Ra=function(t){return Promise.resolve(Na(t))},Oa=function(t){const e=Na(t),n=mr(Qt(t).declarations).reduce((t,e)=>{const n=$t(e);return n&&t.push(new ha(n)),t},[]);return new xa(e,n)},Da=Oa,Ma=function(t){return Promise.resolve(Oa(t))};let La=(()=>{class t{constructor(){this.compileModuleSync=Pa,this.compileModuleAsync=Ra,this.compileModuleAndAllComponentsSync=Da,this.compileModuleAndAllComponentsAsync=Ma}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Fa=(()=>Promise.resolve(0))();function Ua(t){"undefined"==typeof Zone?Fa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ja{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ma(!1),this.onMicrotaskEmpty=new ma(!1),this.onStable=new ma(!1),this.onError=new ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Nt.requestAnimationFrame,e=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Nt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ba(t),t.isCheckStableRunning=!0,qa(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ba(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Ha(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ka(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Ha(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ka(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ba(t),qa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ja.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ja.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Va,ms,ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Va={};function qa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ba(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ha(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ka(t){t._nesting--,qa(t)}class za{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ma,this.onMicrotaskEmpty=new ma,this.onStable=new ma,this.onError=new ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Wa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ja.assertNotInAngularZone(),Ua(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ua(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Jn(ja))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Ga=(()=>{class t{constructor(){this._applications=new Map,Ya.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ya.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class $a{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Qa,Ya=new $a,Xa=!0,Ja=!1;const Za=new Ln("AllowMultipleToken");class tu{constructor(t,e){this.name=t,this.token=e}}function eu(t,e,n=[]){const r=`Platform: ${e}`,i=new Ln(r);return(e=[])=>{let o=nu();if(!o||o.injector.get(Za,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xi,useValue:"platform"});!function(t){if(Qa&&!Qa.destroyed&&!Qa.injector.get(Za,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Qa=t.get(ru);const e=t.get(Ia,null);e&&e.forEach(t=>t())}(lo.create({providers:t,name:r}))}return function(t){const e=nu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function nu(){return Qa&&!Qa.destroyed?Qa:null}let ru=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new za:("zone.js"===t?void 0:t)||new ja({enableLongStackTrace:(Ja=!0,Xa),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ja,useValue:n}];return n.run(()=>{const e=lo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(gr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{su(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Do(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(qA){throw e.runOutsideAngular(()=>t.handleError(qA)),qA}}(o,n,()=>{const t=i.injector.get(_a);return t.runInitializers(),t.donePromise.then(()=>(os(i.injector.get(ka,rs)||rs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=iu({},e);return function(t,e,n){const r=new ga(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ou);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${tt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Jn(lo))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function iu(t,e){return Array.isArray(e)?e.reduce(iu,t):Object.assign(Object.assign({},t),e)}let ou=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ja.assertNotInAngularZone(),Ua(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ja.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return C(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:H(e)(K(t,n))}(o,s.pipe(t=>{return z()((e=X,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Q);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ps?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zs),i=n.create(lo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Wa,null),a=s&&i.injector.get(Ga);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),su(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(qA){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(qA))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;su(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ca,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Jn(ja),Jn(lo),Jn(gr),Jn(vs),Jn(_a))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function su(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class au{}class uu{}const cu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||cu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(255)(e).then(t=>t[r]).then(t=>hu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>hu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Jn(La),Jn(uu,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function hu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const fu=eu(null,"core",[{provide:Ea,useValue:"unknown"},{provide:ru,deps:[lo]},{provide:Ga,deps:[]},{provide:Sa,deps:[]}]),du=[{provide:ou,useClass:ou,deps:[ja,lo,gr,vs,_a]},{provide:la,deps:[ja],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:_a,useClass:_a,deps:[[new nr,ya]]},{provide:La,useClass:La,deps:[]},wa,{provide:Us,useFactory:function(){return Gs},deps:[]},{provide:Vs,useFactory:function(){return $s},deps:[]},{provide:ka,useFactory:function(t){return os(t=t||"undefined"!=typeof $localize&&$localize.locale||rs),t},deps:[[new er(ka),new nr,new rr]]},{provide:Aa,useValue:"USD"}];let pu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Jn(ou))},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({providers:du}),t})(),gu=null;function vu(){return gu}const mu=new Ln("DocumentToken");let yu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:_u,token:t,providedIn:"platform"}),t})();function _u(){return Jn(wu)}const bu=new Ln("Location Initialized");let wu=(()=>{class t extends yu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vu().getBaseHref(this._doc)}onPopState(t){const e=vu().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=vu().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Tu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Tu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Jn(mu))},t.\u0275prov=lt({factory:Iu,token:t,providedIn:"platform"}),t})();function Tu(){return!!window.history.pushState}function Iu(){return new wu(Jn(mu))}function Eu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Cu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Su(t){return t&&"?"!==t[0]?"?"+t:t}let ku=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:Au,token:t,providedIn:"root"}),t})();function Au(t){const e=Jn(mu).location;return new Nu(Jn(yu),e&&e.origin||"")}const xu=new Ln("appBaseHref");let Nu=(()=>{class t extends ku{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Eu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Su(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Su(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Su(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(yu),Jn(xu,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Pu=(()=>{class t extends ku{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Eu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Su(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Su(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(yu),Jn(xu,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Ru=(()=>{class t{constructor(t,e){this._subject=new ma,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Cu(Du(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Su(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Du(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Su(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Su(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Jn(ku),Jn(yu))},t.normalizeQueryParams=Su,t.joinWithSlash=Eu,t.stripTrailingSlash=Cu,t.\u0275prov=lt({factory:Ou,token:t,providedIn:"root"}),t})();function Ou(){return new Ru(Jn(ku),Jn(yu))}function Du(t){return t.replace(/\/index.html$/,"")}var Mu=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Lu{}let Fu=(()=>{class t extends Lu{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=es(e);if(n)return n;const r=e.split("-")[0];if(n=es(r),n)return n;if("en"===r)return Zo;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[ns.PluralCase]}(e||this.locale)(t)){case Mu.Zero:return"zero";case Mu.One:return"one";case Mu.Two:return"two";case Mu.Few:return"few";case Mu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Jn(ka))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Uu(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class ju{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vu=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Sk){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ju(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new qu(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new qu(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(na),ko(Ys),ko(Us))},t.\u0275dir=Gt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class qu{constructor(t,e){this.record=t,this.view=e}}let Bu=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Hu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ku("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ku("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(na),ko(Ys))},t.\u0275dir=Gt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Hu{constructor(){this.$implicit=null,this.ngIf=null}}function Ku(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tt(e)}'.`)}let zu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({providers:[{provide:Lu,useClass:Fu}]}),t})(),Wu=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new Gu(Jn(mu),window)}),t})();class Gu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=$u(this.window.history)||$u(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Sk){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Sk){return!1}}}function $u(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Qu{}class Yu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Yu,gu||(gu=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ju=Ju||document.querySelector("base"),Ju?Ju.getAttribute("href"):null);return null==e?null:function(t){Xu=Xu||document.createElement("a"),Xu.setAttribute("href",t);const e=Xu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Ju=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Uu(document.cookie,t)}}let Xu,Ju=null;const Zu=new Ln("TRANSITION_ID"),tc=[{provide:ya,useFactory:function(t,e,n){return()=>{n.get(_a).donePromise.then(()=>{const n=vu();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Zu,mu,lo],multi:!0}];class ec{static init(){var t;t=new ec,Ya=t}addToWindow(t){Nt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Nt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Nt.getAllAngularRootElements=()=>t.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(t=>{const e=Nt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?vu().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let nc=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const rc=new Ln("EventManagerPlugins");let ic=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Jn(rc),Jn(ja))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class oc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=vu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let sc=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),ac=(()=>{class t extends sc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(uc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(uc))}}return t.\u0275fac=function(e){return new(e||t)(Jn(mu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function uc(t){vu().remove(t)}const cc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lc=/%COMP%/g;function hc(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?hc(t,i,n):(i=i.replace(lc,t),n.push(i))}return n}function fc(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let dc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new pc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ct.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new gc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Ct.ShadowDom:return new vc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=hc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Jn(ic),Jn(ac),Jn(ba))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class pc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(cc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=cc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=cc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(yr.DashCase|yr.Important)?t.style.setProperty(e,n,r&yr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&yr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,fc(n)):this.eventManager.addEventListener(t,e,fc(n))}}class gc extends pc{constructor(t,e,n,r){super(t),this.component=n;const i=hc(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(lc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(lc,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class vc extends pc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=hc(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let mc=(()=>{class t extends oc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Jn(mu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const yc=["alt","control","meta","shift"],_c={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Tc=(()=>{class t extends oc{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vu().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(yc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&bc.hasOwnProperty(e)&&(e=bc[e]))}return _c[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),yc.forEach(r=>{r!=n&&(0,wc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Jn(mu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Ic=eu(fu,"browser",[{provide:Ea,useValue:"browser"},{provide:Ia,useValue:function(){Yu.makeCurrent(),ec.init()},multi:!0},{provide:mu,useFactory:function(){return function(t){he=t}(document),document},deps:[]}]),Ec=[[],{provide:Xi,useValue:"root"},{provide:gr,useFactory:function(){return new gr},deps:[]},{provide:rc,useClass:mc,multi:!0,deps:[mu,ja,Ea]},{provide:rc,useClass:Tc,multi:!0,deps:[mu]},[],{provide:dc,useClass:dc,deps:[ic,ac,ba]},{provide:ws,useExisting:dc},{provide:sc,useExisting:ac},{provide:ac,useClass:ac,deps:[mu]},{provide:Wa,useClass:Wa,deps:[ja]},{provide:ic,useClass:ic,deps:[rc,ja]},{provide:Qu,useClass:nc,deps:[]},[]];let Cc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:ba,useValue:e.appId},{provide:Zu,useExisting:ba},tc]}}}return t.\u0275fac=function(e){return new(e||t)(Jn(t,12))},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({providers:Ec,imports:[zu,pu]}),t})();function Sc(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=L(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}"undefined"!=typeof window&&window;let kc=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Ts),ko(bs))},t.\u0275dir=Gt({type:t}),t})(),Ac=(()=>{class t extends kc{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Rn(t)))(n||t)}}(),t.\u0275dir=Gt({type:t,features:[fo]}),t})();const xc=new Ln("NgValueAccessor"),Nc={provide:xc,useExisting:rt(()=>Rc),multi:!0},Pc=new Ln("CompositionEventMode");let Rc=(()=>{class t extends kc{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=vu()?vu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Ts),ko(bs),ko(Pc,8))},t.\u0275dir=Gt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Lo("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[ds([Nc]),fo]}),t})();const Oc=new Ln("NgValidators"),Dc=new Ln("NgAsyncValidators");function Mc(t){return null!=t}function Lc(t){const e=Do(t)?L(t):t;return Mo(e),e}function Fc(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Uc(t,e){return e.map(e=>e(t))}function jc(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Vc(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Mc);return 0==e.length?null:function(t){return Fc(Uc(t,e))}}(jc(t)):null}function qc(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Mc);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return Sc(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Sc(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Sc(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(S(t=>e(...t)))}return Sc(t,null)}(Uc(t,e).map(Lc)).pipe(S(Fc))}}(jc(t)):null}function Bc(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Hc=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vc(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Gt({type:t}),t})(),Kc=(()=>{class t extends Hc{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Rn(t)))(n||t)}}(),t.\u0275dir=Gt({type:t,features:[fo]}),t})();class zc extends Hc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wc{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Gc=(()=>{class t extends Wc{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(zc,2))},t.\u0275dir=Gt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Bo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[fo]}),t})(),$c=(()=>{class t extends Wc{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Kc,10))},t.\u0275dir=Gt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Bo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[fo]}),t})();function Qc(t,e){Xc(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Jc(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Jc(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Yc(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xc(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Bc(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Bc(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Yc(e._rawValidators,i),Yc(e._rawAsyncValidators,i)}function Jc(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Zc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tl="VALID",el="INVALID",nl="PENDING",rl="DISABLED";function il(t){return(ul(t)?t.validators:t)||null}function ol(t){return Array.isArray(t)?Vc(t):t||null}function sl(t,e){return(ul(e)?e.asyncValidators:t)||null}function al(t){return Array.isArray(t)?qc(t):t||null}function ul(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class cl{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ol(this._rawValidators),this._composedAsyncValidatorFn=al(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===tl}get invalid(){return this.status===el}get pending(){return this.status==nl}get disabled(){return this.status===rl}get enabled(){return this.status!==rl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ol(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=al(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=nl,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rl,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=tl,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==tl&&this.status!==nl||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rl:tl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=nl,this._hasOwnPendingAsyncValidator=!0;const e=Lc(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof hl?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof fl&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ma,this.statusChanges=new ma}_calculateStatus(){return this._allControlsDisabled()?rl:this.errors?el:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nl)?nl:this._anyControlsHaveStatus(el)?el:tl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ul(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ll extends cl{constructor(t=null,e,n){super(il(e),sl(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Zc(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Zc(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class hl extends cl{constructor(t,e,n){super(il(e),sl(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ll?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class fl extends cl{constructor(t,e,n){super(il(e),sl(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ll?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const dl={provide:Kc,useExisting:rt(()=>gl)},pl=(()=>Promise.resolve(null))();let gl=(()=>{class t extends Kc{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ma,this.form=new hl({},Vc(t),qc(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){pl.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Qc(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){pl.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Zc(this._directives,t)})}addFormGroup(t){pl.then(()=>{const e=this._findContainer(t.path),n=new hl({});(function(t,e){Xc(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){pl.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){pl.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(ko(Oc,10),ko(Dc,10))},t.\u0275dir=Gt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Lo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ds([dl]),fo]}),t})();const vl={provide:zc,useExisting:rt(()=>yl)},ml=(()=>Promise.resolve(null))();let yl=(()=>{class t extends zc{constructor(t,e,n,r){super(),this.control=new ll,this._registered=!1,this.update=new ma,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Rc?n=t:Object.getPrototypeOf(t.constructor)===Ac?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ml.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ml.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(ko(Kc,9),ko(Oc,10),ko(Dc,10),ko(xc,10))},t.\u0275dir=Gt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ds([vl]),fo,se]}),t})(),_l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Gt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),bl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({}),t})();const wl={provide:Oc,useExisting:rt(()=>Tl),multi:!0};let Tl=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Gt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Eo("required",e.required?"":null)},inputs:{required:"required"},features:[ds([wl])]}),t})(),Il=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({imports:[[bl]]}),t})(),El=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({imports:[Il]}),t})();function Cl(...t){let e=t[t.length-1];return C(e)?(t.pop(),M(t,e)):K(t)}class Sl extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}class kl extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Al extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function xl(t,e,n,r,i=new Al(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):D(e)(i)}const Nl={};class Pl{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Rl(t,this.resultSelector))}}class Rl extends kl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Nl),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(xl(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Nl?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Ol=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Dl(...t){return H(1)(Cl(...t))}const Ml=new y(t=>t.complete());function Ll(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):Ml}function Fl(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?L(n):Ll()).subscribe(e)})}function Ul(t,e){return"function"==typeof e?n=>n.pipe(Ul((n,r)=>L(t(n,r)).pipe(S((t,i)=>e(n,t,r,i))))):e=>e.lift(new jl(t))}class jl{constructor(t){this.project=t}call(t,e){return e.subscribe(new Vl(t,this.project))}}class Vl extends U{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new F(this),r=this.destination;r.add(n),this.innerSubscription=j(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const ql=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Bl(t){return e=>0===t?Ll():e.lift(new Hl(t))}class Hl{constructor(t){if(this.total=t,this.total<0)throw new ql}call(t,e){return e.subscribe(new Kl(t,this.total))}}class Kl extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function zl(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Wl(t,e,n))}}class Wl{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Gl(t,this.accumulator,this.seed,this.hasSeed))}}class Gl extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $l(t,e){return function(n){return n.lift(new Ql(t,e))}}class Ql{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Yl(t,this.predicate,this.thisArg))}}class Yl extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Xl(t){return function(e){const n=new Jl(t),r=e.lift(n);return n.caught=r}}class Jl{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Zl(t,this.selector,this.caught))}}class Zl extends U{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new F(this);this.add(r);const i=j(n,r);i!==r&&this.add(i)}}}function th(t,e){return V(t,e,1)}function eh(t){return function(e){return 0===t?Ll():e.lift(new nh(t))}}class nh{constructor(t){if(this.total=t,this.total<0)throw new ql}call(t,e){return e.subscribe(new rh(t,this.total))}}class rh extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ih(t=ah){return e=>e.lift(new oh(t))}class oh{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new sh(t,this.errorFactory))}}class sh extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(qA){t=qA}this.destination.error(t)}}}function ah(){return new Ol}function uh(t=null){return e=>e.lift(new ch(t))}class ch{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new lh(t,this.defaultValue))}}class lh extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function hh(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$l((e,n)=>t(e,n,r)):m,Bl(1),n?uh(e):ih(()=>new Ol))}function fh(){}function dh(t,e,n){return function(r){return r.lift(new ph(t,e,n))}}class ph{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new gh(t,this.nextOrObserver,this.error,this.complete))}}class gh extends p{constructor(t,e,n,i){super(t),this._tapNext=fh,this._tapError=fh,this._tapComplete=fh,this._tapError=n||fh,this._tapComplete=i||fh,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||fh,this._tapError=e.error||fh,this._tapComplete=e.complete||fh)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class vh{constructor(t){this.callback=t}call(t,e){return e.subscribe(new mh(t,this.callback))}}class mh extends p{constructor(t,e){super(t),this.add(new h(e))}}class yh{constructor(t,e){this.id=t,this.url=e}}class _h extends yh{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bh extends yh{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wh extends yh{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Th extends yh{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ih extends yh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eh extends yh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ch extends yh{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sh extends yh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kh extends yh{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ah{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xh{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nh{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ph{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oh{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dh{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mh="primary";class Lh{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Fh(t){return new Lh(t)}function Uh(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function jh(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Vh(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qh(t[i],e[i]))return!1;return!0}function qh(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Bh(t){return Array.prototype.concat.apply([],t)}function Hh(t){return t.length>0?t[t.length-1]:null}function Kh(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function zh(t){return Mo(t)?t:Do(t)?L(Promise.resolve(t)):Cl(t)}const Wh={exact:function t(e,n,r){if(!ef(e.segments,n.segments))return!1;if(!Xh(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Qh},Gh={exact:function(t,e){return Vh(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qh(t[n],e[n]))},ignored:()=>!0};function $h(t,e,n){return Wh[n.paths](t.root,e.root,n.matrixParams)&&Gh[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Qh(t,e,n){return Yh(t,e,e.segments,n)}function Yh(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!ef(i,n)&&!e.hasChildren()&&!!Xh(i,n,r)}if(t.segments.length===n.length){if(!ef(t.segments,n))return!1;if(!Xh(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Qh(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!ef(t.segments,i)&&!!Xh(t.segments,i,r)&&!!t.children.primary&&Yh(t.children.primary,e,o,r)}}function Xh(t,e,n){return e.every((e,r)=>Gh[n](t[r].parameters,e.parameters))}class Jh{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return of.serialize(this)}}class Zh{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Kh(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sf(this)}}class tf{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Fh(this.parameters)),this._parameterMap}toString(){return df(this)}}function ef(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class nf{}class rf{parse(t){const e=new yf(t);return new Jh(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${af(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${cf(e)}=${cf(t)}`).join("&"):`${cf(e)}=${cf(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const of=new rf;function sf(t){return t.segments.map(t=>df(t)).join("/")}function af(t,e){if(!t.hasChildren())return sf(t);if(e){const e=t.children.primary?af(t.children.primary,!1):"",n=[];return Kh(t.children,(t,e)=>{e!==Mh&&n.push(`${e}:${af(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Kh(t.children,(t,r)=>{r===Mh&&(n=n.concat(e(t,r)))}),Kh(t.children,(t,r)=>{r!==Mh&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Mh?[af(t.children.primary,!1)]:[`${n}:${af(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${sf(t)}/${e[0]}`:`${sf(t)}/(${e.join("//")})`}}function uf(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(t){return uf(t).replace(/%3B/gi,";")}function lf(t){return uf(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hf(t){return decodeURIComponent(t)}function ff(t){return hf(t.replace(/\+/g,"%20"))}function df(t){return`${lf(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${lf(t)}=${lf(e[t])}`).join("")}`;var e}const pf=/^[^\/()?;=#]+/;function gf(t){const e=t.match(pf);return e?e[0]:""}const vf=/^[^=?&#]+/,mf=/^[^?&#]+/;class yf{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zh([],{}):new Zh([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Zh(t,e)),n}parseSegment(){const t=gf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new tf(hf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=gf(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=gf(this.remaining);t&&(n=t,this.capture(n))}t[hf(e)]=hf(n)}parseQueryParam(t){const e=function(t){const e=t.match(vf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(mf);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ff(e),i=ff(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=gf(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Mh);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Zh([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class _f{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=bf(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=bf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=wf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return wf(t,this._root).map(t=>t.value)}}function bf(t,e){if(t===e.value)return e;for(const n of e.children){const e=bf(t,n);if(e)return e}return null}function wf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wf(t,n);if(r.length)return r.unshift(e),r}return[]}class Tf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function If(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ef extends _f{constructor(t,e){super(t),this.snapshot=e,Nf(this,t)}toString(){return this.snapshot.toString()}}function Cf(t,e){const n=function(t,e){const n=new Af([],{},{},"",{},Mh,e,null,t.root,-1,{});return new xf("",new Tf(n,[]))}(t,e),r=new Sl([new tf("",{})]),i=new Sl({}),o=new Sl({}),s=new Sl({}),a=new Sl(""),u=new Sf(r,i,s,a,o,Mh,e,n.root);return u.snapshot=n.root,new Ef(new Tf(u,[]),n)}class Sf{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(S(t=>Fh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(S(t=>Fh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kf(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Af{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xf extends _f{constructor(t,e){super(e),this.url=t,Nf(this,e)}toString(){return Pf(this._root)}}function Nf(t,e){e.value._routerState=t,e.children.forEach(e=>Nf(t,e))}function Pf(t){const e=t.children.length>0?` { ${t.children.map(Pf).join(", ")} } `:"";return`${t.value}${e}`}function Rf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Vh(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Vh(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Vh(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Vh(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Of(t,e){return Vh(t.params,e.params)&&function(t,e){return ef(t,e)&&t.every((t,n)=>Vh(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Of(t.parent,e.parent))}function Df(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Df(t,e,r);return Df(t,e)})}(t,e,n);return new Tf(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Mf(e,t),t}}const n=new Sf(new Sl((r=e.value).url),new Sl(r.params),new Sl(r.queryParams),new Sl(r.fragment),new Sl(r.data),r.outlet,r.component,r),i=e.children.map(e=>Df(t,e));return new Tf(n,i)}var r}function Mf(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Mf(t.children[n],e.children[n])}function Lf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ff(t){return"object"==typeof t&&null!=t&&t.outlets}function Uf(t,e,n,r,i){let o={};return r&&Kh(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Jh(n.root===t?e:jf(n.root,t,e),o,i)}function jf(t,e,n){const r={};return Kh(t.children,(t,i)=>{r[i]=t===e?n:jf(t,e,n)}),new Zh(t.segments,r)}class Vf{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Lf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ff);if(r&&r!==Hh(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qf{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Bf(t,e,n){if(t||(t=new Zh([],{})),0===t.segments.length&&t.hasChildren())return Hf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ff(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Gf(a,u,e))return o;r+=2}else{if(!Gf(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Zh(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Zh(t.segments.slice(r.pathIndex),t.children),Hf(e,0,i)}return r.match&&0===i.length?new Zh(t.segments,{}):r.match&&!t.hasChildren()?Kf(t,e,n):r.match?Hf(t,0,i):Kf(t,e,n)}function Hf(t,e,n){if(0===n.length)return new Zh(t.segments,{});{const r=function(t){return Ff(t[0])?t[0].outlets:{[Mh]:t}}(n),i={};return Kh(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Bf(t.children[r],e,n))}),Kh(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Zh(t.segments,i)}}function Kf(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ff(o)){const t=zf(o.outlets);return new Zh(r,t)}if(0===i&&Lf(n[0])){r.push(new tf(t.segments[e].path,Wf(n[0]))),i++;continue}const s=Ff(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Lf(a)?(r.push(new tf(s,Wf(a))),i+=2):(r.push(new tf(s,{})),i++)}return new Zh(r,{})}function zf(t){const e={};return Kh(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Kf(new Zh([],{}),0,t))}),e}function Wf(t){const e={};return Kh(t,(t,n)=>e[n]=`${t}`),e}function Gf(t,e,n){return t==n.path&&Vh(e,n.parameters)}class $f{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Rf(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=If(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Kh(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=If(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=If(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Oh(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ph(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Rf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Qf(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Qf(t){Rf(t.value),t.children.forEach(Qf)}class Yf{constructor(t,e){this.routes=t,this.module=e}}function Xf(t){return"function"==typeof t}function Jf(t){return t instanceof Jh}const Zf=Symbol("INITIAL_VALUE");function td(){return Ul(t=>function(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),K(t,n).lift(new Pl(e))}(t.map(t=>t.pipe(Bl(1),function(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Dl(t,n,e)):e=>Dl(t,e)}(Zf)))).pipe(zl((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Zf)return t;if(r===Zf&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Jf(r))return r}return t},t)},Zf),$l(t=>t!==Zf),S(t=>Jf(t)?t:!0===t),Bl(1)))}let ed=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ro(0,"router-outlet")},directives:function(){return[Xd]},encapsulation:2}),t})();function nd(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];rd(r,id(e,r))}}function rd(t,e){t.children&&nd(t.children,e)}function id(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function od(t){const e=t.children&&t.children.map(od),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Mh&&(n.component=ed),n}function sd(t){return t.outlet||Mh}function ad(t,e){const n=t.filter(t=>sd(t)===e);return n.push(...t.filter(t=>sd(t)!==e)),n}const ud={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function cd(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ud):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||jh)(n,t,e);if(!i)return Object.assign({},ud);const o={};Kh(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ld(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>hd(t,e,n)&&sd(n)!==Mh)}(t,n,r)){const i=new Zh(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&sd(o)!==Mh){const n=new Zh([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[sd(o)]=n}return i}(t,e,r,new Zh(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>hd(t,e,n))}(t,n,r)){const o=new Zh(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(hd(t,n,a)&&!i[sd(a)]){const n=new Zh([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[sd(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Zh(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function hd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function fd(t,e,n,r){return!!(sd(t)===r||r!==Mh&&hd(e,n,t))&&("**"===t.path||cd(e,t,n).matched)}function dd(t,e,n){return 0===e.length&&!t.children[n]}class pd{constructor(t){this.segmentGroup=t||null}}class gd{constructor(t){this.urlTree=t}}function vd(t){return new y(e=>e.error(new pd(t)))}function md(t){return new y(e=>e.error(new gd(t)))}function yd(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class _d{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Zs)}apply(){const t=ld(this.urlTree.root,[],[],this.config).segmentGroup,e=new Zh(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Mh).pipe(S(t=>this.createUrlTree(bd(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xl(t=>{if(t instanceof gd)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof pd)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Mh).pipe(S(e=>this.createUrlTree(bd(e),t.queryParams,t.fragment))).pipe(Xl(t=>{if(t instanceof pd)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Zh([],{[Mh]:t}):t;return new Jh(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(S(t=>new Zh([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return L(r).pipe(th(r=>{const i=n.children[r],o=ad(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(S(t=>({segment:t,outlet:r})))}),zl((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$l((e,n)=>t(e,n,r)):m,eh(1),n?uh(e):ih(()=>new Ol))}())}expandSegment(t,e,n,r,i,o){return L(n).pipe(th(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Xl(t=>{if(t instanceof pd)return Cl(null);throw t}))),hh(t=>!!t),Xl((t,n)=>{if(t instanceof Ol||"EmptyError"===t.name){if(dd(e,r,i))return Cl(new Zh([],{}));throw new pd(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return fd(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):vd(e):vd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?md(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new Zh(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=cd(e,r,i);if(!s)return vd(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?md(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Cl(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(S(t=>(n._loadedConfig=t,new Zh(r,{})))):Cl(new Zh(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=cd(e,n,r);if(!o)return vd(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(V(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=ld(e,s,u,o),l=new Zh(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(S(t=>new Zh(s,t)));if(0===o.length&&0===c.length)return Cl(new Zh(s,{}));const h=sd(n)===i;return this.expandSegment(r,l,o,c,h?Mh:i,!0).pipe(S(t=>new Zh(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Cl(new Yf(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Cl(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(S(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(Uh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Cl(new Yf([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Cl(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Xf(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Xf(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return zh(o)})).pipe(td(),dh(t=>{if(!Jf(t))return;const e=Uh(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),S(t=>!0===t)):Cl(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Cl(n);if(r.numberOfChildren>1||!r.children.primary)return yd(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Jh(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Kh(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Kh(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Zh(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function bd(t){const e={};for(const n of Object.keys(t.children)){const r=bd(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Zh(t.segments.concat(e.segments),e.children)}return t}(new Zh(t.segments,e))}class wd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Td{constructor(t,e){this.component=t,this.route=e}}function Id(t,e,n){const r=t._root;return Cd(r,e?e._root:null,n,[r.value])}function Ed(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Cd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=If(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ef(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ef(t.url,e.url)||!Vh(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Of(t,e)||!Vh(t.queryParams,e.queryParams);case"paramsChange":default:return!Of(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Cd(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Td(a.outlet.component,s))}else s&&Sd(e,a,i),i.canActivateChecks.push(new wd(r)),Cd(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Kh(o,(t,e)=>Sd(t,n.getContext(e),i)),i}function Sd(t,e,n){const r=If(t),i=t.value;Kh(r,(t,r)=>{Sd(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Td(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class kd{}function Ad(t){return new y(e=>e.error(t))}class xd{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=ld(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Mh);if(null===e)return null;const n=new Af([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mh,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Tf(n,e),i=new xf(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=kf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=ad(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Pd(n);return r.sort((t,e)=>t.value.outlet===Mh?-1:e.value.outlet===Mh?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return dd(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!fd(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Hh(n).parameters:{};i=new Af(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dd(t),sd(t),t.component,t,Rd(e),Od(e)+n.length,Md(t))}else{const r=cd(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Af(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Dd(t),sd(t),t.component,t,Rd(e),Od(e)+o.length,Md(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ld(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Tf(i,t)]}if(0===a.length&&0===c.length)return[new Tf(i,[])];const l=sd(t)===r,h=this.processSegment(a,u,c,l?Mh:r);return null===h?null:[new Tf(i,h)]}}function Nd(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Pd(t){const e=[],n=new Set;for(const r of t){if(!Nd(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Pd(r.children);e.push(new Tf(r.value,t))}return e.filter(t=>!n.has(t))}function Rd(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Od(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Dd(t){return t.data||{}}function Md(t){return t.resolve||{}}function Ld(t){return Ul(e=>{const n=t(e);return n?L(n).pipe(S(()=>e)):Cl(e)})}class Fd extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ud=new Ln("ROUTES");class jd{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(S(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Yf(Bh(r.injector.get(Ud,void 0,_t.Self|_t.Optional)).map(od),r)}),Xl(t=>{throw e._loader$=void 0,t}));return e._loader$=new $(n,()=>new I).pipe(z()),e._loader$}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):zh(t()).pipe(V(t=>t instanceof ta?Cl(t):L(this.compiler.compileModuleAsync(t))))}}class Vd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qd,this.attachRef=null}}class qd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Vd,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Bd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Hd(t){throw t}function Kd(t,e,n){return e.parse("/")}function zd(t,e){return Cl(null)}const Wd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $d=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=Hd,this.malformedUriErrorHandler=Kd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zd,afterPreactivation:zd},this.urlHandlingStrategy=new Bd,this.routeReuseStrategy=new Fd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(Zs),this.console=i.get(Sa);const u=i.get(ja);this.isNgZoneEnabled=u instanceof ja&&ja.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new Jh(new Zh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jd(o,s,t=>this.triggerEvent(new Ah(t)),t=>this.triggerEvent(new xh(t))),this.routerState=Cf(this.currentUrlTree,this.rootComponentType),this.transitions=new Sl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe($l(t=>0!==t.id),S(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ul(t=>{let n=!1,r=!1;return Cl(t).pipe(dh(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ul(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Cl(t).pipe(Ul(t=>{const n=this.transitions.getValue();return e.next(new _h(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ml:Promise.resolve(t)}),function(t,e,n,r){return Ul(i=>function(t,e,n,r,i){return new _d(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(S(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),dh(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return V(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new xd(t,e,n,r,i,o).recognize();return null===s?Ad(new kd):Cl(s)}catch(qA){return Ad(qA)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(S(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),dh(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ih(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new _h(n,this.serializeUrl(r),i,o);e.next(a);const u=Cf(r,this.rootComponentType).snapshot;return Cl(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ml}),Ld(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),dh(t=>{const e=new Eh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),S(t=>Object.assign(Object.assign({},t),{guards:Id(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Cl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return L(t).pipe(V(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Cl(o.map(o=>{const s=Ed(o,e,i);let a;if(function(t){return t&&Xf(t.canDeactivate)}(s))a=zh(s.canDeactivate(t,e,n,r));else{if(!Xf(s))throw new Error("Invalid CanDeactivate guard");a=zh(s(t,e,n,r))}return a.pipe(hh())})).pipe(td()):Cl(!0)}(t.component,t.route,n,e,r)),hh(t=>!0!==t,!0))}(s,r,i,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return L(e).pipe(th(e=>Dl(function(t,e){return null!==t&&e&&e(new Nh(t)),Cl(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Rh(t)),Cl(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Fl(()=>Cl(e.guards.map(i=>{const o=Ed(i,e.node,n);let s;if(function(t){return t&&Xf(t.canActivateChild)}(o))s=zh(o.canActivateChild(r,t));else{if(!Xf(o))throw new Error("Invalid CanActivateChild guard");s=zh(o(r,t))}return s.pipe(hh())})).pipe(td())));return Cl(i).pipe(td())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Cl(r.map(r=>Fl(()=>{const i=Ed(r,e,n);let o;if(function(t){return t&&Xf(t.canActivate)}(i))o=zh(i.canActivate(e,t));else{if(!Xf(i))throw new Error("Invalid CanActivate guard");o=zh(i(e,t))}return o.pipe(hh())}))).pipe(td()):Cl(!0)}(t,e.route,n))),hh(t=>!0!==t,!0))}(r,o,t,e):Cl(n)),S(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),dh(t=>{if(Jf(t.guardsResult)){const e=Uh(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ch(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),$l(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Ld(t=>{if(t.guards.canActivateChecks.length)return Cl(t).pipe(dh(t=>{const e=new Sh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ul(t=>{let e=!1;return Cl(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return Cl(t);let o=0;return L(i).pipe(th(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Cl({});const o={};return L(i).pipe(V(i=>function(t,e,n,r){const i=Ed(t,e,r);return zh(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(dh(t=>{o[i]=t}))),eh(1),V(()=>Object.keys(o).length===i.length?Cl(o):Ml))}(t._resolve,t,e,r).pipe(S(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),kf(t,n).resolve),null)))}(t.route,e,n,r)),dh(()=>o++),eh(1),V(e=>o===i.length?Cl(t):Ml))})),dh({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),dh(t=>{const e=new kh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ld(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),S(t=>{const e=function(t,e,n){const r=Df(t,e._root,n?n._root:void 0);return new Ef(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),dh(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),S(t=>(new $f(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),dh({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new vh(i))),Xl(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Jf(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new wh(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Th(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(sb){t.reject(sb)}}var i;return Ml}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nd(t),this.config=t.map(od),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Uf(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Vf(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Kh(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Vf(n,e,r)}(n);if(o.toRoot())return Uf(e.root,new Zh([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new qf(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new qf(t,t===e.root,0)}const r=Lf(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qf(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Hf(s.segmentGroup,s.index,o.commands):Bf(s.segmentGroup,s.index,o.commands);return Uf(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Jf(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(qA){e=this.malformedUriErrorHandler(qA,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Wd):!1===e?Object.assign({},Gd):e,Jf(t))return $h(this.currentUrlTree,t,n);const r=this.parseUrl(t);return $h(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new wh(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(Jn(Un),Jn(nf),Jn(qd),Jn(Ru),Jn(lo),Jn(au),Jn(La),Jn(void 0))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Qd=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new I,this.subscription=t.events.subscribe(t=>{t instanceof bh&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Yd(this.skipLocationChange),replaceUrl:Yd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Yd(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko($d),ko(Sf),ko(ku))},t.\u0275dir=Gt({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Lo("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(Xo("href",e.href,cr),Eo("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[se]}),t})();function Yd(t){return""===t||!!t}let Xd=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ma,this.deactivateEvents=new ma,this.name=r||Mh,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Jd(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(ko(qd),ko(na),ko(vs),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(an(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ae(),"name")),ko(zs))},t.\u0275dir=Gt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Jd{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Sf?this.route:t===qd?this.childContexts:this.parent.get(t,e)}}class Zd{}class tp{preload(t,e){return Cl(null)}}let ep=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new jd(e,n,e=>t.triggerEvent(new Ah(e)),e=>t.triggerEvent(new xh(e)))}setUpPreloading(){this.subscription=this.router.events.pipe($l(t=>t instanceof bh),th(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return L(n).pipe(H(),S(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Cl(e._loadedConfig):this.loader.load(t.injector,e)).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Jn($d),Jn(au),Jn(La),Jn(lo),Jn(Zd))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),np=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _h?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Dh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Dh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Jn($d),Jn(Wu),Jn(void 0))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const rp=new Ln("ROUTER_CONFIGURATION"),ip=new Ln("ROUTER_FORROOT_GUARD"),op=[Ru,{provide:nf,useClass:rf},{provide:$d,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new $d(null,t,e,n,r,i,o,Bh(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[nf,qd,Ru,lo,au,La,Ud,rp,[class{},new nr],[class{},new nr]]},qd,{provide:Sf,useFactory:function(t){return t.routerState.root},deps:[$d]},{provide:au,useClass:lu},ep,tp,class{preload(t,e){return e().pipe(Xl(()=>Cl(null)))}},{provide:rp,useValue:{enableTracing:!1}}];function sp(){return new tu("Router",$d)}let ap=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[op,hp(e),{provide:ip,useFactory:lp,deps:[[$d,new nr,new rr]]},{provide:rp,useValue:n||{}},{provide:ku,useFactory:cp,deps:[yu,[new er(xu),new nr],rp]},{provide:np,useFactory:up,deps:[$d,Wu,rp]},{provide:Zd,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:tp},{provide:tu,multi:!0,useFactory:sp},[fp,{provide:ya,multi:!0,useFactory:dp,deps:[fp]},{provide:gp,useFactory:pp,deps:[fp]},{provide:Ca,multi:!0,useExisting:gp}]]}}static forChild(e){return{ngModule:t,providers:[hp(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Jn(ip,8),Jn($d,8))},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({}),t})();function up(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new np(t,e,n)}function cp(t,e,n={}){return n.useHash?new Pu(t,e):new Nu(t,e)}function lp(t){return"guarded"}function hp(t){return[{provide:Fn,multi:!0,useValue:t},{provide:Ud,multi:!0,useValue:t}]}let fp=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new I}appInitializer(){return this.injector.get(bu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get($d),r=this.injector.get(rp);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Cl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(rp),n=this.injector.get(ep),r=this.injector.get(np),i=this.injector.get($d),o=this.injector.get(ou);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(Jn(lo))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function dp(t){return t.appInitializer.bind(t)}function pp(t){return t.bootstrapListener.bind(t)}const gp=new Ln("Router Initializer");let vp=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-error"]],decls:3,vars:0,consts:[[1,"box"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"p"),Go(2,"error"),Po(),Po())},styles:[""]}),t})();var mp=n(62);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(Op){this.f(Op)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(Op){n.reject(Op)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:_).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function I(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function C(t,e,n){this.code=A+t,this.message=e||x[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new C(e.substring(A.length),t.message,t.serverResponse):null}I(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var k,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function M(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=P("__EID__")?"__EID__":void 0,I(O,Error),O.prototype.name="CustomError",I(D,O),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new L(function(){return new q},function(t){t.reset()});function V(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=B(t,e)}function $(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=s.navigator;if(ct){var lt=ct.userAgent;if(lt){J=lt;break t}}J=""}function ht(t){return at(J,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(Tp){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(Tp){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===Tt&&e||"",this.b=wt}function _t(t){return t instanceof yt&&t.constructor===yt&&t.b===wt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.ta=!0,yt.prototype.sa=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,wt={},Tt={};function It(){if(void 0===bt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){s.console&&s.console.error(n.message)}bt=t}else bt=t}return bt}function Et(t,e){this.a=e===xt?t:""}function Ct(t){return t instanceof Et&&t.constructor===Et?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=_t(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Et(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(kt,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?_t(t):encodeURIComponent(String(t))}))}Et.prototype.ta=!0,Et.prototype.sa=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var kt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Nt(t,e){this.a=e===Ft?t:""}function Pt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t))t=new Nt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Rt.test(e[1])?new Nt(t,Ft):null}return t}function Lt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Ft))}var Ft={},Ut=new Nt("about:invalid#zClosurez",Ft);function jt(t,e,n){this.a=n===Vt?t:""}jt.prototype.ta=!0,jt.prototype.sa=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function qt(t,e,n,r){return t=t instanceof Nt?t:Lt(t),e=e||s,n=n instanceof yt?_t(n):n||"",e.open(Pt(t),n,r,void 0)}function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=l;var zt,Wt,Gt=ht("Opera"),$t=ht("Trident")||ht("MSIE"),Qt=ht("Edge"),Yt=Qt||$t,Xt=ht("Gecko")&&!(at(J.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Jt=at(J.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=(Wt=J,Xt?/rv:([^\);]+)(\)|;)/.exec(Wt):Qt?/Edge\/([\d\.]+)/.exec(Wt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Jt?/WebKit\/(\S+)/.exec(Wt):Gt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(ee&&(te=ee?ee[1]:""),$t){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){zt=String(ne);break t}}zt=te}var re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Z(String(zt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var oe=s.document&&$t&&(Zt()||parseInt(zt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var se=!$t||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}H(s?X(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){s.setTimeout(function(){throw t},0)}function ge(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ve||(le(),ve=!0),me.add(t,e)}var ve=!1,me=new U;function ye(){for(var t;t=V();){try{t.a.call(t.b)}catch(e){pe(e)}F(j,t)}ve=!1}function _e(t,e){if(this.a=be,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,function(t){Oe(n,we,t)},function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(qA){}Oe(n,Te,t)})}catch(r){Oe(this,Te,r)}}var be=0,we=2,Te=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new L(function(){return new Ie},function(t){t.reset()});function Ce(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof _e)return t;var e=new _e(l);return Oe(e,we,t),e}function ke(t){return new _e(function(e,n){n(t)})}function Ae(t,e,n){De(t,e,n,null)||ge(w(e,t))}function xe(t){return new _e(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],w(i,o,!0),w(i,o,!1));else e(r)})}function Ne(t,e){if(t.a==be)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==be&&1==r?Ne(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Fe(n,i,Te,e)))}t.c=null}else Oe(t,Te,e)}function Pe(t,e){t.b||t.a!=we&&t.a!=Te||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ce(null,null,null);return i.a=new _e(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(Op){o(Op)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(Op){o(Op)}}:o}),i.a.c=t,Pe(t,i),i.a}function Oe(t,e,n){t.a==be&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Te||n instanceof Ve||function(t,e){t.g=!0,ge(function(){t.g&&je.call(null,e)})}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return Pe(t,Ce(e||l,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,ge(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(qA){je.call(null,qA)}F(Ee,e)}function Ue(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Re(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==be){var e=new Ve(t);ge(function(){Ne(this,e)},this)}},t.$c=function(t){this.a=be,Oe(this,we,t)},t.ad=function(t){this.a=be,Oe(this,Te,t)},t.gc=function(){for(var t;t=Le(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=pe;function Ve(t){O.call(this,t)}function qe(){0!=Be&&(He[g(this)]=this),this.ya=this.ya,this.pa=this.pa}I(Ve,O),Ve.prototype.name="cancel";var Be=0,He={};function Ke(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=Be)){var e=g(t);if(0!=Be&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}qe.prototype.ya=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var ze=Object.freeze||function(t){return t},We=!$t||9<=Number(oe),Ge=$t&&!ie("9"),$e=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Ye,Qe);var Xe=ze({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ze,this.wa=this.Qa=!1}function en(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new tn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=_n(n),t&&t[Je]?wn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=_n(n),t&&t[Je]?Tn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=_n(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function dn(t){return t in an?an[t]:an[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function vn(t,e){if(t.wa)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(Tp){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ye(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function bn(){qe.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Tn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(d(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new _e(function(n,r){-1==(e=En(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw s.clearTimeout(e),t})}function Sn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(bn,qe),bn.prototype[Je]=!0,bn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;vt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=An.prototype).X=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return xn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,On(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,Mn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,On(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Dn(this,n[4]),this.f=Vn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function On(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Wn)),t.b=new $n(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e,n,r){var i=new Rn(null,void 0);return t&&On(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?zn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Gn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?On(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,Kn=/[#\?:]/g,zn=/[#\?]/g,Wn=/[#\?@]/g,Gn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Yn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Qn(t),e=er(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Nn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach(function(n,r){H(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e}),'"')}function ur(){var t=Ar();return $t&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Mt(t)||Ut)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Cr(Ar())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Lt(e),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=qt("",r,n,s),t=Pt(e),s&&(Yt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new jt(t=(r=It())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof jt&&t.constructor===jt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=qt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new _e(function(e){"complete"==s.document.readyState?e():(t=function(){e()},ln(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function yr(t){return t=t||Ar(),!("file:"!==Or()&&"ionic:"!==Or()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return mp.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":mp.default.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Tr(){var t=wr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Er="Chrome";function Cr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Ir:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Cr(i=Ar()):"Worker"===r&&(r=Cr(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return s.navigator&&s.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=s.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(n){return br()&&!!s.indexedDB}return!1}function Pr(){return(Rr()||"chrome-extension:"===Or()||yr())&&!Tr()&&Nr()&&!br()}function Rr(){return"http:"===Or()||"https:"===Or()}function Or(){return s.location&&s.location.protocol||null}function Dr(t){return!fr(t=t||Ar())&&Cr(t)!=Ir}function Mr(t){return void 0===t?null:nr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Cr(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Kr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Or()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zr,Wr={};function Gr(t){Wr[t]||(Wr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),zr=2==$r.abcd}catch(Wt){zr=!1}function Qr(t,e,n){zr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[li],r=t[fi],i=t[di];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[gi]=n||null,e[mi]=n||null,e[pi]=r):(e[gi]=r||null,e[mi]=r||null,e[pi]=n||null),e[vi]=t||null,Qr(this,_i,i),Qr(this,yi,Jr(e))}I(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",di="requestType",pi="email",gi="fromEmail",vi="multiFactorInfo",mi="previousEmail",yi="data",_i="operation";function bi(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ti)||null,r=Fn(t,Ci)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new C("argument-error",wi+", "+Ti+"and "+Ci+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ii)||null,languageCode:Fn(t,Ei)||null,tenantId:Fn(t,Si)||null})}var wi="apiKey",Ti="oobCode",Ii="continueUrl",Ei="languageCode",Ci="mode",Si="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new bi(t)}catch(e){return null}}function xi(t){var e=t[Di];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Fi];var r=n[Mi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Oi])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Oi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new C("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",Pi="dynamicLinkDomain",Ri="handleCodeInApp",Oi="iOS",Di="url",Mi="installApp",Li="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new qi(t)}catch(e){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(Op){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Wi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:zi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:zi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:zi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Ki},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Gi(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function $i(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Qi])return new Xi(t)}catch(r){}return null}var Qi="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[Qi]){var n=Bi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function ro(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}I(Ji,Xi),I(Zi,Ji),I(to,Ji),I(eo,Ji),I(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then(function(t){if(t[Qs]){var n=Bi(t[Qs]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==A+"user-not-found"?new C("user-mismatch"):t})}function co(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Gi(t)||{}).Ja||null,this.pb=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function yo(t){vo.call(this,t,zi),this.a=[]}function _o(){yo.call(this,"facebook.com")}function bo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function wo(){yo.call(this,"github.com")}function To(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Io(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new Io).credential({idToken:n,accessToken:e})}function Co(){vo.call(this,"twitter.com",Ki)}function So(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===xo.EMAIL_LINK_SIGN_IN_METHOD?xo.EMAIL_LINK_SIGN_IN_METHOD:xo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function xo(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=Po(e)))throw new C("argument-error","Invalid email link!");return new ko(t,e.code,xo.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=Ai(t=ro(t)))&&t.operation===ui?t:null}function Ro(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new C("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Oo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Ro(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||mp.default.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Ro({fb:t,eb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return bo(n);case"github.com":return To(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return Se(this.a?this.a:this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return va(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ma(t,n)},co.prototype.c=function(t,e){return uo(ya(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return va(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ma(t,n)},fo.prototype.c=function(t,e){return uo(ya(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ka=function(t){return this.Jb=pt(t),this},I(mo,vo),I(yo,vo),yo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},yo.prototype.Rb=function(){return X(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},I(_o,yo),Qr(_o,"PROVIDER_ID","facebook.com"),Qr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(wo,yo),Qr(wo,"PROVIDER_ID","github.com"),Qr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),I(Io,yo),Qr(Io,"PROVIDER_ID","google.com"),Qr(Io,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Co,vo),Qr(Co,"PROVIDER_ID","twitter.com"),Qr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Sa,{email:this.a,oobCode:this.f}):Za(t,$a,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?Za(t,ka,{idToken:e,email:this.a,oobCode:this.f}):Za(t,Va,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return uo(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(xo,{PROVIDER_ID:"password"}),Yr(xo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(xo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.gb(Do(this))},Ro.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,Za(t,Ya,n)},Ro.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",uo(t=Za(t,Xa,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return Se(e.verify()).then(function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then(function(t){return function(t,e){return Za(t,Ba,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==so?i.Ha().then(function(e){return function(t,e){return Za(t,Ha,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Za(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Ho=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.c)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function zo(t,e,n){C.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Go(){}function $o(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(qA){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}I(Ko,C),I(zo,C),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Go.prototype.c=null,I($o,Go),$o.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new $o,I(Yo,Go),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null,Zo.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);function ss(t){return t.c?t.c:t.a?ss(t.a):(M("Root logger has no level set."),null)}ts.prototype.log=function(t,e,n){if(t.value>=ss(this).value)for(d(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var as={},us=null;function cs(t){var e;if(us||(us=new ts(""),as[""]=us,us.c=is),!(e=as[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=cs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,as[t]=e}return e}function ls(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function fs(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=cs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(hs,Go),hs.prototype.a=function(){return new fs(this.f)},hs.prototype.b=function(t){return function(){return t}}({}),I(fs,bn);var ds=0;function ps(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ms(t){bn.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ys,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,vs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=ds},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,vs(this)),this.a&&(this.readyState=3,vs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ps(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):vs(this),3==this.readyState&&ps(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.sc=function(t){this.a&&(this.response=t,gs(this))},t.Va=function(t){var e=this.i;e&&e.log(rs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(ms,bn);var ys="";ms.prototype.b=cs("goog.net.XhrIo");var _s=/^https?$/i,bs=["POST","PUT"];function ws(t){return"content-type"==t.toLowerCase()}function Ts(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Is(t),Cs(t)}function Is(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Es(t){if(t.c&&void 0!==o)if(t.C[1]&&4==ks(t)&&2==As(t))ls(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==ks(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==ks(t)){ls(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=As(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Pn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!_s.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ks(t)?t.a.statusText:""}catch(l){ls(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+As(t)+"]",Is(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Ss(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(qA){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+qA.message,void 0)}}}function Ss(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function ks(t){return t.a?t.a.readyState:0}function As(t){try{return 2<ks(t)?t.a.status:-1}catch(e){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+As(t)+"]"}function Ns(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Rs(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function Os(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ds(t){return W(t.g,function(t){return d(t[1])})}function Ms(t){if(t.h&&t.a&&Ds(t)){var e=t.h,n=js[e];n&&(s.clearTimeout(n.a),delete js[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ds(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Ns?(Os(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Us(e),js[e.a]=e,t.h=e.a)}function Ls(){O.call(this)}function Fs(){O.call(this)}function Us(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=ms.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ms.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Es(this):this.Jc())},t.Jc=function(){Es(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ys:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ls(this.b,"Can not get response: "+e.message),null}},Ns.prototype.cancel=function(t){if(this.a)this.c instanceof Ns&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Fs(this),Rs(this),Ps(this,!1,t))}},Ns.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},Ns.prototype.then=function(t,e,n){var r,i,o=new _e(function(t,e){r=t,i=e});return Os(this,r,function(t){t instanceof Fs?o.cancel():i(t)}),o.then(t,e,n)},Ns.prototype.$goog_Thenable=!0,I(Ls,O),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",I(Fs,O),Fs.prototype.message="Deferred was canceled",Fs.prototype.name="CanceledError",Us.prototype.c=function(){throw delete js[this.a],this.b};var js={};function Vs(t){var e={},n=e.document||document,r=Ct(t).toString(),i=de(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ns(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Bs(i,!0);var t=new zs(Ks,"Timeout reached for loading script "+r);Rs(a),Ps(a,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Bs(i,e.xd||!1,l),Rs(a),Ps(a,!0,null))},i.onerror=function(){Bs(i,!0,l);var t=new zs(Hs,"Error while loading script "+r);Rs(a),Ps(a,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function qs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Bs(t,!0,this.Ma)}}function Bs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Hs=0,Ks=1;function zs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ws(t){this.f=t}function Gs(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ys,this.g=pt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Js,this.a=pt(t.firebaseHeaders||Zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&mp.default.INTERNAL.node&&mp.default.INTERNAL.node.XMLHttpRequest)&&!br())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=br()?new hs(self):Tr()?new Ws(n):new Yo,this.b=null}I(zs,O),I(Ws,Go),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var $s,Qs="idToken",Ys=new qr(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Js=new qr(3e4,6e4),Zs={"Content-Type":"application/json"};function ta(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ea(t,e){e&&(t.l=na("https://securetoken.googleapis.com/v1/token",e),t.h=na("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=na("https://identitytoolkit.googleapis.com/v2/",e))}function na(t,e){return t=Un(t),e=Un(e.url),t.f=t.a+t.f,On(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function ra(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ia(t,e,n,r,i,o,a){(function(){var t=Ar();return!((t=Cr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&oe&&!(9<oe))})()||br()?t=b(t.u,t):($s||($s=new _e(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[sa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Os(t,null,e,void 0)}(Vs(St(oa,{onload:sa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=b(t.s,t)),t(e,n,r,i,o,a)}Gs.prototype.T=function(){return this.b},Gs.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ms(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(Op){t=null}e&&e(t)}),Tn(a,"ready",function(){u&&clearTimeout(u),Ke(this)}),Tn(a,"timeout",function(){u&&clearTimeout(u),Ke(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Bo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Bo),t.a.onreadystatechange=b(t.Wb,t);try{ls(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return ls(t.b,xs(t,"Error opening Xhr: "+a.message)),void Ts(t,a)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)H(t,e,void 0);else for(var n=kn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ws,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!G(bs,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ss(t),0<t.g&&(t.u=function(t){return $t&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=En(t.Ma,t.g,t)),ls(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ls(t.b,xs(t,"Send error: "+a.message)),Ts(t,a)}}(a,t,n,r,i)};var oa=new yt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),sa="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new C("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[Qs]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,pt(t));throw new C("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Gs.prototype.s=function(t,e,n,r,i){var o=this;$s.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Gs.prototype.Ab=function(){return Za(this,qa,{})},Gs.prototype.Cb=function(t,e){return Za(this,ja,{idToken:t,email:e})},Gs.prototype.Db=function(t,e){return Za(this,Va,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function da(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function pa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Jn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ga(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function va(t,e){return e.returnIdpCredential=!0,Za(t,Ka,e)}function ma(t,e){return e.returnIdpCredential=!0,Za(t,Wa,e)}function ya(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,za,e)}function _a(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Gs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ft(ha,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Za(this,ja,n)},t.wb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,Da,t)},t.xb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,Pa,t)},t.vb=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Ra,t)},t.Fb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,Oa,t)},t.gb=function(t){return Za(this,Qa,t)},t.ob=function(t,e){return Za(this,Fa,{oobCode:t,newPassword:e})},t.Sa=function(t){return Za(this,wa,{oobCode:t})},t.kb=function(t){return Za(this,ba,{oobCode:t})};var ba={endpoint:"setAccountInfo",A:_a,Z:"email",B:!0},wa={endpoint:"resetPassword",A:_a,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ta={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new C("weak-password")},G:ca,V:!0,B:!0},Ia={endpoint:"createAuthUri",B:!0},Ea={endpoint:"deleteAccount",O:["idToken"]},Ca={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Sa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:aa,G:ca,V:!0,B:!0},ka={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:aa,G:ca,V:!0},Aa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},Na={endpoint:"getAccountInfo"},Pa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Oa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Da={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Ma={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},La={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Fa={endpoint:"resetPassword",A:_a,Z:"email",B:!0},Ua={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},ja={endpoint:"setAccountInfo",O:["idToken"],A:ua,V:!0},Va={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ua(t),!t.password)throw new C("weak-password")},G:ca,V:!0},qa={endpoint:"signupNewUser",G:ca,V:!0,B:!0},Ba={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ha={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ka={endpoint:"verifyAssertion",A:da,Za:pa,G:ga,V:!0,B:!0},za={endpoint:"verifyAssertion",A:da,Za:pa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:function(t){if(da(t),!t.idToken)throw new C("internal-error")},Za:pa,G:ga,V:!0},Ga={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:ca,V:!0,B:!0},$a={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new C("wrong-password")},G:ca,V:!0,B:!0},Qa={endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ya={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");la(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);ca(t)}},Xa={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Qs]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new C("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Se(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new _e(function(e,n){ia(t,a.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new C("network-request-failed"))},r,u?void 0:nr(Lr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=Mr(t)),new C("internal-error",e)}function nu(t){this.b=t,this.a=null,this.sb=function(t){return(su||(su=new _e(function(t,e){function n(){Vr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:iu.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},Se(Vs(r=St(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw su=null,t}))).then(function(){return new _e(function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new yt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new qr(3e4,6e4),ou=new qr(5e3,15e3),su=null;function au(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?jn((t=Un(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return mp.default.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hu(t){var e=cr();return function(t){return Za(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(cr())})}function fu(t){return t.m||(t.m=mr().then(function(){if(!t.u){var e=t.c,n=t.i,r=cu(t.b),i=new au(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new nu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)})}(t)})),t.m}function du(t){return t.l||(t.C=t.c?kr(t.c,cu(t.b)):null,t.l=new Gs(t.g,P(t.i),t.C),t.f&&ea(t.l,t.f)),t.l}function pu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new uu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.zb(l).toString()}function gu(t){if(this.a=t||mp.default.INTERNAL.reactNative&&mp.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vu(t){this.b=t,this.a={},this.f=b(this.c,this)}au.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},uu.prototype.zb=function(t){return this.h=t,this},uu.prototype.toString=function(){if(this.v){var t=Un(this.v.url);t=jn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=mp.default.app(this.c).auth().la()}catch(a){n=null}for(var r in e.pb=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),dt(e)||Ln(t,"customParameters",Mr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Xn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Xn(t.b,"eid"),(s=cu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=lu.prototype).Pb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.sb.then(function(){return new _e(function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&dr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new _e(function(e){return function n(){Cn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Cn(n).then(function(){e(r)})})},t.Yb=function(){var t=Ar();return!Dr(t)&&!jr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new C("popup-blocked"));if(s&&!Dr())return this.ma().o(function(e){dr(t),i(e)}),r(),Se();this.a||(this.a=hu(du(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw dr(t),i(e),e});return r(),e}).then(function(){Uo(n),s||lr(pu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Ob=function(t,e,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then(function(){Uo(e),lr(pu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new C("network-request-failed")})},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Q(this.h,function(e){return e==t})},(t=gu.prototype).get=function(t){return Se(this.a.getItem(t)).then(function(t){return t&&Fr(t)})},t.set=function(t,e){return Se(this.a.setItem(t,Mr(e)))},t.U=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var mu,yu=[];function _u(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function bu(t){this.a=t}function wu(t){this.c=t,this.b=!1,this.a=[]}function Tu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Iu(t,c),e}).o(function(e){throw Iu(t,c),e})}function Iu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,function(t){return t==e})}}function Eu(){if(!Au())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(H(yu,function(n){n.b==t&&(e=n)}),!e){var e=new vu(t);yu.push(e)}return e}(),_u(this.v,"keyChanged",function(e,n){return Ou(t).then(function(e){return 0<e.length&&H(t.a,function(t){t(e)}),{keyProcessed:G(e,n.key)}})}),_u(this.v,"ping",function(){return Se(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Se().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Se(null)}().then(function(e){(t.h=e)&&(t.g=new wu(new bu(e)),Tu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Cu(t){return new _e(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Cu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Su(t){return t.i||(t.i=Cu(t)),t.i}function ku(t,e){var n=0;return new _e(function r(i,o){Su(t).then(e).then(i).o(function(e){if(!(3<++n))return Su(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Au(){try{return!!s.indexedDB}catch(Wt){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new _e(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ru(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Tu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Se()}function Ou(t){return Su(t).then(function(t){var e=xu(Nu(t,!1));return e.getAll?Pu(e.getAll()):new _e(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r})}function Du(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then(function(){if(Au()){var t=Ur(),r="__sak"+t;return mu||(mu=new Eu),(n=mu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){H(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Fu(){if(!function(){var t="Node"==wr();if(!(t=Uu()||t&&mp.default.INTERNAL.node&&mp.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Uu()||mp.default.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=s.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function ju(){this.type="nullStorage"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&mp.default.INTERNAL.node&&mp.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=qu()||mp.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=s.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Bu(){var t={};t.Browser=zu,t.Node=Wu,t.ReactNative=Gu,t.Worker=$u,this.a=t[wr()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,function(e){i.push(Se().then(function(){return e(t.origin,t.data.data)}))}),xe(i).then(function(r){var i=[];H(r,function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),H(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},bu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},wu.prototype.close=function(){for(;0<this.a.length;)Iu(this,this.a[0]);this.b=!0},(t=Eu.prototype).set=function(t,e){var n=this,r=!1;return ku(this,function(e){return Pu((e=xu(Nu(e,!0))).get(t))}).then(function(i){return ku(n,function(o){if(o=xu(Nu(o,!0)),i)return i.value=e,Pu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Pu(o.add(s))})}).then(function(){return n.c[t]=e,Ru(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return ku(this,function(e){return Pu(xu(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return ku(this,function(r){return n=!0,e.b++,Pu(xu(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ru(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Du(t),function e(){t.f=setTimeout(function(){t.l=Ou(t).then(function(e){0<e.length&&H(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t}),0==this.a.length&&Du(this)},(t=Mu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.U=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=ju.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.U=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Mr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Hu,Ku,zu={F:Fu,cb:Vu},Wu={F:Fu,cb:Vu},Gu={F:gu,cb:ju},$u={F:Fu,cb:ju},Qu={rd:"local",NONE:"none",td:"session"};function Yu(){var t=!(jr(Ar())||!_r()),e=Dr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Hu||(Hu=new Bu),t=Hu;try{this.g=!ur()&&Kr()||!s.indexedDB?new t.a.F:new Mu(br()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Lu}this.v=new Lu,this.f=b(this.Zb,this),this.b={}}function Xu(){return Ku||(Ku=new Yu),Ku}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.F&&(t.b[n]=null),Ju(t,e.F).U(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Xu()}(t=Yu.prototype).get=function(t,e){return Ju(this,t.F).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Ju(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),dt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(ur()||!Kr())&&s.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(Q(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Ju(this,"local").ia(this.f),ec(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):ec(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},$t&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&H(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",F:"local"};function oc(){this.a=Xu()}function sc(t,e){this.b=ac,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=s.Int32Array?new Int32Array(pc):pc),this.reset()}I(sc,function(){this.b=-1});for(var ac=64,uc=ac-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=Y(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){sc.call(this,8,vc)}I(gc,sc);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function mc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new C("invalid-cordova-configuration",t)}function _c(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function bc(t){return t.f||(t.f=t.ma().then(function(){return new _e(function(e){t.Ea(function n(r){return e(r),t.Ta(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),wc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(t,i)})}var n=new jo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Cn(500).then(function(){return wc(t).then(function(){r||_c(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ho||(Ho=new qo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function wc(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Vo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Tc(t){this.a=t,this.b=Xu()}(t=mc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then(function(){return new _e(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):ke(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof xr("universalLinks.subscribe",s))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",s))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",s))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",s))throw yc("cordova-plugin-inappbrowser is not installed")},function(){throw new C("cordova-not-ready")})},t.Pb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Se()},t.Nb=function(){return ke(new C("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Se().then(function(){return Uo(e),bc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new jo(e,r,null,o,new C("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return ke(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new gc;dc(e,t),t=[];var n=8*e.g;dc(e,hc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=pu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ic,a.w(),e)}).then(function(){var e=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");e=Ar(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new _e(function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Br()&&c()},o.addEventListener("resume",c=function(){a||(a=Cn(2e3).then(function(){e(new C("redirect-cancelled-by-user"))}))},!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return wc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null})},t.Ea=function(t){this.b.push(t),bc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new C("no-auth-event")),t(e))})},t.Ta=function(t){Q(this.b,function(e){return e==t})};var Ic={name:"pendingRedirect",F:"session"};function Ec(t){return tc(t.b,Ic,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Vc,this.C=new zc,this.g=new Tc(Uc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Sc(this.D,this.v,this.m,k,this.J)}function Sc(t,e,n,r,i){var o=mp.default.SDK_VERSION||null;return yr()?new mc(t,e,n,o,r,i):new lu(t,e,n,o,r,i)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Ac(t){t.a.Yb()&&kc(t).o(function(e){var n=new jo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}),t.a.Ub()||qc(t.b)}function xc(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ic,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ec(t.g).then(function(){kc(t).o(function(e){var n=new jo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})}):Ac(t)}).o(function(){Ac(t)})}function Nc(t,e){Q(t.h,function(t){return t==e})}Cc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Sc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return qc(this.b),e};var Pc=new qr(2e3,1e4),Rc=new qr(3e4,6e4);function Oc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Ic,"pending",t.a)}(t.g).then(function(){return t.a.Ob(e,n,r,i).o(function(e){if(Dc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Ec(t.g).then(function(){throw o})}).then(function(){return t.a.ac()?new _e(function(){}):Ec(t.g).then(function(){return t.ra()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},Pc.get())}Cc.prototype.ra=function(){return this.b.ra()};var Fc={};function Uc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function jc(t,e,n,r){var i=Uc(e,n,r);return Fc[i]||(Fc[i]=new Cc(t,e,n,r)),Fc[i]}function Vc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qc(t){t.g||(t.g=!0,Kc(t,!1,null,null))}function Bc(t){t.g&&!t.i&&Kc(t,!1,null,null)}function Hc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Kc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Hc(t,n):Hc(t,{user:null}),t.f=[],t.c=[]}function zc(){}function Wc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Gc(t,e){this.a=e,Qr(this,"verificationId",t)}function $c(t,e,n,r){return new Mo(t).gb(e,n).then(function(t){return new Gc(t,r)})}function Qc(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Hr(1e3*e.exp),authTime:Hr(1e3*e.auth_time),issuedAtTime:Hr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[Jc];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;H(e[Xc]||[],function(t){(t=ti(t))&&i.b.push(t)}),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Vc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Vc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Kc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Kc(t,a,e,null)}).o(function(e){Kc(t,a,null,e)})}(this,t,e):ke(new C("invalid-auth-event")):(Kc(this,!1,null,null),Se())}else ke(new C("invalid-auth-event"))},Vc.prototype.ra=function(){var t=this;return new _e(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Cn(Rc.get()).then(function(){t.b||(t.g=!0,Kc(t,!0,null,e))})}(t))})},zc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):ke(new C("invalid-auth-event"))}else ke(new C("invalid-auth-event"))},Gc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Xc="mfaInfo",Jc="mfaPendingCredential";function Zc(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),Qr(this,"resolver",this.b)}function tl(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Zc(e,t.serverResponse,n,t.message)}catch(r){}return null}function el(){}function nl(t){Qr(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(Tp){}t=e}else t=null;t&&n.push(t)}),sl(this,n)}function sl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function al(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=s.document,e=null;return Br()||!t?Se():new _e(function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ul(t,!0)}).o(function(e){t.i(e)&&ul(t,!1)})}function cl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ll(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function hl(t,e){t.b=Bi(e[Qs]||""),t.a=e.refreshToken,ll(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Hr(e||null),creationTime:Hr(t||null)})}function dl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function pl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=mp.default.SDK_VERSION?kr(mp.default.SDK_VERSION):null;this.a=new Gs(this.l,P(k),r),(this.u=t.emulatorConfig||null)&&ea(this.a,this.u),this.h=new cl(this.a),Il(this,e[Qs]),hl(this.h,e),Qr(this,"refreshToken",this.h.a),Sl(this,n||{}),bn.call(this),this.P=!1,this.s&&Pr()&&(this.b=jc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new al(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0})}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){gl(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){yl(i,t.f)},this.ja=null,this.S=new ol(this,n),Qr(this,"multiFactor",this.S)}function gl(t,e){t.u=e,ea(t.a,e),t.b&&(e=t.b,t.b=jc(t.s,t.l,t.m,t.u),t.P&&(Nc(e,t),xc(t.b,t)))}function vl(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function ml(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function yl(t,e){t.aa=e,ra(t.a,mp.default.SDK_VERSION?kr(mp.default.SDK_VERSION,t.aa):null)}function _l(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function bl(t){try{return mp.default.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function wl(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function Tl(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function Il(t,e){t.Aa=e,Qr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then(function(){return t})}function Cl(t){t.b&&!t.P&&(t.P=!0,xc(t.b,t))}function Sl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function kl(){}function Al(t){return Se().then(function(){if(t.J)throw new C("app-deleted")})}function xl(t){return z(t.providerData,function(t){return t.providerId})}function Nl(t,e){e&&(Pl(t,e.providerId),t.providerData.push(e))}function Pl(t,e){Q(t.providerData,function(t){return t.providerId==e})}function Rl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Ol(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Qr(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),H(e.providerData,function(e){Nl(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),sl(t.S,e.S.b))}function Dl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,Na,{idToken:e}).then(b(t.Kc,t))}(t,e).then(function(){return n||Rl(t,"isAnonymous",!1),e})})}function Ml(t,e){e[Qs]&&t.Aa!=e[Qs]&&(hl(t.h,e),t.dispatchEvent(new il("tokenChanged")),Il(t,e[Qs]),Rl(t,"refreshToken",t.h.a))}function Ll(t,e){return Dl(t).then(function(){if(G(xl(t),e))return El(t).then(function(){throw new C("provider-already-linked")})})}function Fl(t,e,n){return Xr({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function Ul(t,e){return Ml(t,e),t.reload().then(function(){return t})}function jl(t,e,n,r,i){if(!Pr())return ke(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=Gi(n.providerId),s=Ur(t.uid+":::"),a=null;(!Dr()||_r())&&t.s&&n.isOAuthProvider&&(a=pu(t.s,t.l,t.m,e,n,null,s,mp.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=pr(a,o&&o.va,o&&o.ua);return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return Oc(t.b,u,e,n,s,!!a,t.tenantId)}).then(function(){return new _e(function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Lc(t.b,t,e,u,s)})}).then(function(t){return u&&dr(u),t?Xr(t):null}).o(function(t){throw u&&dr(u),t}),Bl(t,r,i)}function Vl(t,e,n,r,i){if(!Pr())return ke(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Ur(t.uid+":::");return r=r().then(function(){if(ql(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zl,t.w(),e.a)),e}).then(function(){return Mc(t.b,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function ql(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new il("userInvalidated")),t.i=e),e})}(t,e,n);return t.N.push(r),r.oa(function(){$(t.N,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),bl(t),b(t.jc,t))),n||e})}function Hl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new pl(e,n,t);return t.providerData&&H(t.providerData,function(t){t&&Nl(i,Xr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Kl(t){this.a=t,this.b=Xu()}Yc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then(function(t){var n=pt(e.f);return delete n[Xc],delete n[Jc],vt(n,t),e.g(n)})},I(Zc,C),el.prototype.tb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Do(t.a)}),Za(e,Aa,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),Za(e,xa,n)})}(this,t,e)},I(nl,el),I(rl,nl),I(il,Qe),(t=ol.prototype).yc=function(t){sl(this,function(t){var e=[];return H(t.mfaInfo||[],function(t){(t=ti(t))&&e.push(t)}),e}(t.hd))},t.Sb=function(){return this.a.I().then(function(t){return new io(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then(function(n){return t.tb(r,n,e)}).then(function(t){return Ml(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Za(r,Ja,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=K(e.b,function(t){return t.uid!=n});return sl(e,r),Ml(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,function(t){return t.w()})}}},al.prototype.start=function(){this.a=this.c,ul(this,!0)},al.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ia(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))},"POST",Yn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))})}(t.f,e).then(function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,ll(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(pl,bn),pl.prototype.xa=function(t){this.za=t,ta(this.a,t)},pl.prototype.la=function(){return this.za},pl.prototype.Ga=function(){return X(this.aa)},pl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(pl.prototype,"providerId","firebase"),(t=pl.prototype).reload=function(){var t=this;return Bl(this,Al(this).then(function(){return Dl(t).then(function(){return El(t)}).then(kl)}))},t.oc=function(t){return this.I(t).then(function(t){return new Qc(t)})},t.I=function(t){var e=this;return Bl(this,Al(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.Aa&&(Il(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),Rl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Sl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,function(t){return new dl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Nl(this,e[n]);Rl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Ml(e,t),n=Fl(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Bl(this,Ll(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Fl(e,t,"link"),Ul(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return Bl(this,Ll(this,"phone").then(function(){return $c(bl(n),t,e,b(n.rb,n))}))},t.Mc=function(t,e){var n=this;return Bl(this,Se().then(function(){return $c(bl(n),t,e,b(n.ub,n))}),!0)},t.Cb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Ml(e,t),e.reload()}))},t.ed=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Ml(e,t),e.reload()}))},t.Db=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Db(n,t)}).then(function(t){return Ml(e,t),e.reload()}))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Al(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ml(e,t),Rl(e,"displayName",t.displayName||null),Rl(e,"photoURL",t.photoUrl||null),H(e.providerData,function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))}),El(e)}).then(kl))},t.cd=function(t){var e=this;return Bl(this,Dl(this).then(function(n){return G(xl(e),t)?function(t,e,n){return Za(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return H(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),H(xl(e),function(t){n[t]||Pl(e,t)}),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new C("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return Za(t.a,Ea,{idToken:e})}).then(function(){t.dispatchEvent(new il("userDeleted"))})).then(function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");vl(t,null),ml(t,null),_l(t,null),t.N=[],t.J=!0,Tl(t),Qr(t,"refreshToken",null),t.b&&Nc(t.b,t)})},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return jl(this,"linkViaPopup",t,function(){return Ll(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return jl(this,"reauthViaPopup",t,function(){return Se()},!0)},t.Fc=function(t){var e=this;return Vl(this,"linkViaRedirect",t,function(){return Ll(e,t.providerId)},!1)},t.Oc=function(t){return Vl(this,"reauthViaRedirect",t,function(){return Se()},!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return ma(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Fl(i,t,"link"),Ul(i,t)}).then(function(){return o}))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Se().then(function(){return uo(ya(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Fl(i,t,"reauthenticate"),Ml(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},t.vb=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:ji(new xi(t))}).then(function(t){return e.a.vb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Fb=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||dt(e)?{}:ji(new xi(e))}).then(function(e){return n.a.Fb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Bl(this,t=uo(Se(t),n.uid).then(function(t){return e=Fl(n,t,"reauthenticate"),Ml(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),H(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),vt(t,this.S.w()),t};var zl={name:"redirectUser",F:"session"};function Wl(t){return tc(t.b,zl,t.a)}function Gl(t){this.a=t,this.b=Xu(),this.c=null,this.f=function(t){var e=Yl("local"),n=Yl("session"),r=Yl("none");return function(t,e,n){var r=Zu(e,n),i=Ju(t,e.F);return t.get(e,n).then(function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?Yl(t):e})})})}).then(function(e){return t.c=e,$l(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Yl("local"),this.a,b(this.g,this))}function $l(t,e){var n,r=[];for(n in Qu)Qu[n]!==e&&r.push(tc(t.b,Yl(Qu[n]),t.a));return r.push(tc(t.b,Ql,t.a)),function(t){return new _e(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],w(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Yl("local");th(this,function(){return Se().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return $l(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function Yl(t){return{name:"authUser",F:t}}function Xl(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Jl(t){return th(t,function(){return tc(t.b,t.c,t.a)})}function Zl(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Qr(this,"settings",new Wc),Qr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new C("invalid-api-key");t=mp.default.SDK_VERSION?kr(mp.default.SDK_VERSION):null,this.a=new Gs(ch(this).options&&ch(this).options.apiKey,P(k),t),this.P=[],this.s=[],this.N=[],this.Pa=mp.default.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=mp.default.INTERNAL.createSubscribe(b(this.Ac,this)),ah(this,null),this.i=new Gl(ch(this).options.apiKey+":"+ch(this).name),this.D=new Kl(ch(this).options.apiKey+":"+ch(this).name),this.$=dh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Hl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return dh(t,e)}(t).then(function(){return Zl(t.i,e,t.R)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Xl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Jl(t.i)})):null}).then(function(e){ah(t,e||null)});return dh(t,n)}(this)),this.h=dh(this,function(t){return t.$.then(function(){return sh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Yl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=jc(e,n,ch(t).name,t.R),xc(t.b,t),lh(t)&&Cl(lh(t)),t.m){Cl(t.m);var r=t.m;r.xa(t.la()),vl(r,t),yl(r=t.m,t.J),_l(r,t),gl(r=t.m,t.R),ml(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Un(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function nh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function rh(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Qe.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||ke(new C("auth-domain-config-required"))}function sh(t){if(!Pr())return ke(new C("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.ra()}).then(function(t){return t?Xr(t):null});return dh(t,e)}function ah(t,e){lh(t)&&(function(t,e){Q(t.W,function(t){return t==e})}(lh(t),t.Ba),hn(lh(t),"tokenChanged",t.qa),hn(lh(t),"userDeleted",t.za),hn(lh(t),"userInvalidated",t.Aa),Tl(lh(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&wl(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),vl(e,t),yl(e,t.J),_l(e,t),gl(e,t.R),ml(e,t))}function uh(t,e){var n=null,r=null;return dh(t,e.then(function(e){return n=Fo(e),r=$i(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then(function(){return function(t,e,n,r){var i=new pl(t,e);return n&&(i.ha=n),r&&yl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Ol(lh(t),e),t.da(e)):(ah(t,e),Cl(e),t.da(e))}).then(function(){fh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,b(t.kc,t))),n||e}).then(function(){return Xr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](hh(t))}}function dh(t,e){return t.P.push(e),e.oa(function(){$(t.P,e)}),e}function ph(){}function gh(){this.a={},this.b=1e12}Gl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in Qu)if(Qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Au()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,$l(n,t)}).then(function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)}):Se()})},I(eh,bn),I(nh,Qe),I(rh,Qe),I(ih,Qe),(t=eh.prototype).yb=function(t){return dh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ta(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then(function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ea(this.a,this.R),this.dispatchEvent(new rh(this.R))}},t.Gc=function(t){this.J.push(t),ra(this.a,mp.default.SDK_VERSION?kr(mp.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return X(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,va(i.a,o))})},t.Xc=function(t){if(!Pr())return ke(new C("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=Ur(),i=null;(!Dr()||_r())&&ch(this).options.authDomain&&t.isOAuthProvider&&(i=pu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,r,mp.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=pr(i,n&&n.va,n&&n.ua);return dh(this,n=oh(this).then(function(n){return Oc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new _e(function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Lc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&dr(o),t?Xr(t):null}).o(function(t){throw o&&dr(o),t}))},t.Yc=function(t){if(!Pr())return ke(new C("operation-not-supported-in-this-environment"));var e=this;return dh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.ra=function(){var t=this;return sh(this).then(function(e){return t.b&&Bc(t.b.b),e}).o(function(e){throw t.b&&Bc(t.b.b),e})},t.dd=function(t){if(!t)return ke(new C("null-user"));if(this.S!=t.tenantId)return ke(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Qs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new pl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&yl(e,r),Ol(e,t),e}(t,n,e.D,e.Ga());return dh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Ol(lh(e),t),e.da(t)):(ah(e,r),Cl(r),e.da(r))}).then(function(){fh(e)}))},t.Bb=function(){var t=this;return dh(this,this.h.then(function(){return t.b&&Bc(t.b.b),lh(t)?(ah(t,null),Jl(t.i).then(function(){fh(t)})):Se()}))},t.Zc=function(){var t=this;return Zl(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ol(lh(t),e),lh(t).I();(lh(t)||e)&&(ah(t,e),e&&(Cl(e),e.ha=t.D),t.b&&xc(t.b,t),fh(t))}})},t.da=function(t){return Xl(this.i,t)},t.mc=function(){fh(this),this.da(lh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,Se(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),dh(t,t.h.then(function(){!t.l&&G(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.ib(t,e,n)},t.nc=function(t){var e=this;return dh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,Za(e.a,Ga,{token:t}))}).then(function(t){var n=t.user;return Rl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,Za(n.a,$a,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,Za(n.a,Ta,{email:t,password:e}))})},t.ab=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.Ab()).then(function(e){var n=e.user;return Rl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&wl(lh(this))},t.Pc=function(t){var e=this;H(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&Tl(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),dh(this,this.h.then(function(){e.l||G(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){Q(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Yl("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Bc(this.b.b)),Promise.resolve()},t.hc=function(t){return dh(this,function(t,e){return Za(t,Ia,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.xb=function(t,e){var n=this;return dh(this,Se().then(function(){var t=new xi(e);if(!t.c)throw new C("argument-error",Ri+" must be true when sending sign in link to email");return ji(t)}).then(function(e){return n.a.xb(t,e)}).then(function(){}))},t.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},t.ob=function(t,e){return dh(this,this.a.ob(t,e).then(function(){}))},t.Sa=function(t){return dh(this,this.a.Sa(t).then(function(t){return new si(t)}))},t.kb=function(t){return dh(this,this.a.kb(t).then(function(){}))},t.wb=function(t,e){var n=this;return dh(this,Se().then(function(){return void 0===e||dt(e)?{}:ji(new xi(e))}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.Wc=function(t,e){return dh(this,$c(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return dh(this,Se().then(function(){var r=e||cr(),i=No(t,r);if(!(r=Po(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.ab(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var vh=null;function mh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function _h(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function Th(){}gh.prototype.render=function(t,e){return this.a[this.b.toString()]=new _h(t,e),this.b++},gh.prototype.reset=function(t){var e=mh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},gh.prototype.getResponse=function(t){return(t=mh(this,t))?t.getResponse():null},gh.prototype.execute=function(t){(t=mh(this,t))&&t.execute()},_h.prototype.getResponse=function(){return bh(this),this.b},_h.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},_h.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Qr(wh,"FACTOR_ID","phone"),Th.prototype.g=function(){return vh||(vh=new gh),Se(vh)},Th.prototype.c=function(){};var Ih=null;function Eh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ch=new yt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new qr(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new _e(function(n,r){var i=setTimeout(function(){r(new C("network-request-failed"))},Sh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[e.a]},Se(Vs(St(Ch,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Eh.prototype.c=function(){this.b--};var kh=null;function Ah(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Ih||(Ih=new Th),a=Ih):(kh||(kh=new Eh),a=kh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ph])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Rh],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Gs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xh];this.a[xh]=function(t){if(Oh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Nh];this.a[Nh]=function(){if(Oh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=xr(l,s);"function"==typeof t&&t()}}}var xh="callback",Nh="expired-callback",Ph="sitekey",Rh="size";function Oh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Dh(t,e){return t.h.push(e),e.oa(function(){$(t.h,e)}),e}function Mh(t){if(t.J)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Lh(t,e,n){var r=!1;try{this.b=n||mp.default.app()}catch(Tp){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(Tp){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(Tp){}o=mp.default.SDK_VERSION?kr(mp.default.SDK_VERSION,o):null,Ah.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,P(k),r)}function Fh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Uh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Uh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=Ah.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Dh(this,Se().then(function(){if(Rr()&&!br())return mr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,Za(t.s,La,{})}).then(function(e){t.a[Ph]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Mh(this);var t=this;return Dh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Mh(this);var t=this;return Dh(this,this.render().then(function(e){return new _e(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Mh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Mh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Lh,Ah);var Uh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function jh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Bh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Kh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function zh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return p(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=Xh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w(function(t){return this[t]},n),set:w(function(t,e,n,r){Fh(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function Yh(t,e,n,r){t[e]=Xh(e,n,r)}function Xh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Fh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(eh.prototype,{kb:{name:"applyActionCode",j:[jh("code")]},Sa:{name:"checkActionCode",j:[jh("code")]},ob:{name:"confirmPasswordReset",j:[jh("code"),jh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[jh("email"),jh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[jh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[jh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(qh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[jh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[jh("email"),qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[jh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Kh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Kh()]},Tc:{name:"signInWithCustomToken",j:[jh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[jh("email"),jh("password")]},Vc:{name:"signInWithEmailLink",j:[jh("email"),jh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[jh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof pl)}},Hh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[jh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[jh("url"),qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[jh("code")]}}),Qh(eh.prototype,{lc:{name:"languageCode",lb:Gh(jh(),Hh(),"languageCode")},ti:{name:"tenantId",lb:Gh(jh(),Hh(),"tenantId")}}),(eh.Persistence=Qu).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",$h(pl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Vh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Vh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Kh()]},rb:{name:"linkWithCredential",j:[Kh()]},Dc:{name:"linkWithPhoneNumber",j:[jh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Kh()]},ub:{name:"reauthenticateWithCredential",j:[Kh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[jh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[jh(null,!0)]},cd:{name:"unlink",j:[jh("provider")]},Cb:{name:"updateEmail",j:[jh("email")]},Db:{name:"updatePassword",j:[jh("password")]},ed:{name:"updatePhoneNumber",j:[Kh("phone")]},Eb:{name:"updateProfile",j:[qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[jh("email"),Gh(qh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Wc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Vh("appVerificationDisabledForTesting")}}),$h(Gc.prototype,{confirm:{name:"confirm",j:[jh("verificationCode")]}}),Yh(ao,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ao,Oo,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(jh(),qh(),"json")]),Yh(xo,"credential",function(t,e){return new ko(t,e)},[jh("email"),jh("password")]),$h(ko.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(_o.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(_o,"credential",bo,[Gh(jh(),qh(),"token")]),Yh(xo,"credentialWithLink",No,[jh("email"),jh("emailLink")]),$h(wo.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(wo,"credential",To,[Gh(jh(),qh(),"token")]),$h(Io.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Io,"credential",Eo,[Gh(jh(),Gh(qh(),Hh()),"idToken"),Gh(jh(),Hh(),"accessToken",!0)]),$h(Co.prototype,{Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),Yh(Co,"credential",So,[Gh(jh(),qh(),"token"),jh("secret",!0)]),$h(yo.prototype,{Ca:{name:"addScope",j:[jh("scope")]},credential:{name:"credential",j:[Gh(jh(),Gh(qh(),Hh()),"optionsOrIdToken"),Gh(jh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[qh("customOAuthParameters")]}}),$h(fo.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(co.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),Yh(Mo,"credential",Lo,[jh("verificationId"),jh("verificationCode")]),$h(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[Gh(jh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?zh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zh(t.session,so)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?zh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$h(Ro.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(C.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(zo.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Ko.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Zc.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Yc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),$h(ol.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},jh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},jh(),"multiFactorInfoIdentifier")]}}),$h(Lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yh(bi,"parseLink",Ai,[jh("link")]),Yh(wh,"assertion",function(t){return new rl(t)},[Kh("phone")]),function(){if(void 0===mp.default||!mp.default.INTERNAL||!mp.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:ao,Error:C};Yh(t,"EmailAuthProvider",xo,[]),Yh(t,"FacebookAuthProvider",_o,[]),Yh(t,"GithubAuthProvider",wo,[]),Yh(t,"GoogleAuthProvider",Io,[]),Yh(t,"TwitterAuthProvider",Co,[]),Yh(t,"OAuthProvider",yo,[jh("providerId")]),Yh(t,"SAMLAuthProvider",mo,[jh("providerId")]),Yh(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Yh(t,"RecaptchaVerifier",Lh,[Gh(jh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof mp.default.app.App)}}]),Yh(t,"ActionCodeURL",bi,[]),Yh(t,"PhoneMultiFactorGenerator",wh,[]),mp.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),mp.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),mp.default.registerVersion("@firebase/auth","0.16.7"),mp.default.INTERNAL.extendNamespace({User:pl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(107);var yp=n(250),_p=n(308),bp=function(t,e){return(bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function wp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Tp,Ip="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ep=Ep||{},Cp=Ip||self;function Sp(){}function kp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ap(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xp="closure_uid_"+(1e9*Math.random()>>>0),Np=0;function Pp(t,e,n){return t.call.apply(t.bind,arguments)}function Rp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Op(t,e,n){return(Op=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pp:Rp).apply(null,arguments)}function Dp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mp(){return Date.now()}function Lp(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Fp(){this.j=this.j,this.i=this.i}Fp.prototype.j=!1,Fp.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,xp)&&t[xp]||(t[xp]=++Np)}(this)},Fp.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Up=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},jp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Vp(t){return Array.prototype.concat.apply([],arguments)}function qp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Bp(t){return/^[\s\xa0]*$/.test(t)}var Hp,Kp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function zp(t,e){return-1!=t.indexOf(e)}function Wp(t,e){return t<e?-1:t>e?1:0}t:{var Gp=Cp.navigator;if(Gp){var $p=Gp.userAgent;if($p){Hp=$p;break t}}Hp=""}function Qp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Yp(t){var e={};for(var n in t)e[n]=t[n];return e}var Xp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jp(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Xp.length;o++)n=Xp[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zp(t){return Zp[" "](t),t}Zp[" "]=Sp;var tg,eg,ng=zp(Hp,"Opera"),rg=zp(Hp,"Trident")||zp(Hp,"MSIE"),ig=zp(Hp,"Edge"),og=ig||rg,sg=zp(Hp,"Gecko")&&!(zp(Hp.toLowerCase(),"webkit")&&!zp(Hp,"Edge"))&&!(zp(Hp,"Trident")||zp(Hp,"MSIE"))&&!zp(Hp,"Edge"),ag=zp(Hp.toLowerCase(),"webkit")&&!zp(Hp,"Edge");function ug(){var t=Cp.document;return t?t.documentMode:void 0}t:{var cg="",lg=(eg=Hp,sg?/rv:([^\);]+)(\)|;)/.exec(eg):ig?/Edge\/([\d\.]+)/.exec(eg):rg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(eg):ag?/WebKit\/(\S+)/.exec(eg):ng?/(?:Version)[ \/]?(\S+)/.exec(eg):void 0);if(lg&&(cg=lg?lg[1]:""),rg){var hg=ug();if(null!=hg&&hg>parseFloat(cg)){tg=String(hg);break t}}tg=cg}var fg={};function dg(t){return function(t,e){var n=fg;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Kp(String(tg)).split("."),r=Kp(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Wp(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Wp(0==s[2].length,0==a[2].length)||Wp(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var pg=Cp.document&&rg&&(ug()||parseInt(tg,10))||void 0,gg=!rg||9<=Number(pg),vg=rg&&!dg("9"),mg=function(){if(!Cp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Cp.addEventListener("test",Sp,e),Cp.removeEventListener("test",Sp,e)}catch(n){}return t}();function yg(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function _g(t,e){if(yg.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(sg){t:{try{Zp(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bg[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}yg.prototype.b=function(){this.defaultPrevented=!0},Lp(_g,yg);var bg={2:"touch",3:"pen",4:"mouse"};_g.prototype.b=function(){_g.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vg)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var wg="closure_listenable_"+(1e6*Math.random()|0),Tg=0;function Ig(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Tg,this.Y=this.Z=!1}function Eg(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Cg(t){this.src=t,this.a={},this.b=0}function Sg(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Up(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Eg(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function kg(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Cg.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=kg(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ig(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ag="closure_lm_"+(1e6*Math.random()|0),xg={};function Ng(t,e,n,r,i){if(r&&r.once)return Rg(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ng(t,e[o],n,r,i);return null}return n=Vg(n),t&&t[wg]?t.wa(e,n,Ap(r)?!!r.capture:!!r,i):Pg(t,e,n,!1,r,i)}function Pg(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ap(i)?!!i.capture:!!i;if(s&&!gg)return null;var a=Ug(t);if(a||(t[Ag]=a=new Cg(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Fg,e=gg?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mg||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Mg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Rg(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rg(t,e[o],n,r,i);return null}return n=Vg(n),t&&t[wg]?t.xa(e,n,Ap(r)?!!r.capture:!!r,i):Pg(t,e,n,!0,r,i)}function Og(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Og(t,e[o],n,r,i);else r=Ap(r)?!!r.capture:!!r,n=Vg(n),t&&t[wg]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=kg(o=t.a[e],n,r,i))&&(Eg(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ug(t))&&(e=t.a[e.toString()],t=-1,e&&(t=kg(e,n,r,i)),(n=-1<t?e[t]:null)&&Dg(n))}function Dg(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[wg])Sg(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Mg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ug(e))?(Sg(n,t),0==n.b&&(n.src=null,e[Ag]=null)):Eg(t)}}}function Mg(t){return t in xg?xg[t]:xg[t]="on"+t}function Lg(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Dg(t),n.call(r,e)}function Fg(t,e){if(t.Y)return!0;if(!gg){if(!e)t:{e=["window","event"];for(var n=Cp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Lg(t,e=new _g(e,this))}return Lg(t,new _g(e,this))}function Ug(t){return(t=t[Ag])instanceof Cg?t:null}var jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(t){return"function"==typeof t?t:(t[jg]||(t[jg]=function(e){return t.handleEvent(e)}),t[jg])}function qg(){Fp.call(this),this.c=new Cg(this),this.J=this,this.D=null}function Bg(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new yg(e,t);else if(e instanceof yg)e.target=e.target||t;else{var i=e;Jp(e=new yg(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Hg(s,r,!0,e)&&i}if(i=Hg(s=e.a=t,r,!0,e)&&i,i=Hg(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Hg(s=e.a=n[o],r,!1,e)&&i}function Hg(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Sg(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Lp(qg,Fp),qg.prototype[wg]=!0,(Tp=qg.prototype).addEventListener=function(t,e,n,r){Ng(this,t,e,n,r)},Tp.removeEventListener=function(t,e,n,r){Og(this,t,e,n,r)},Tp.H=function(){if(qg.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Eg(n[r]);delete e.a[t],e.b--}}this.D=null},Tp.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Tp.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Kg=Cp.JSON.stringify;function zg(){this.b=this.a=null}var Wg,Gg=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Qg},function(t){t.reset()});function $g(){var t=Zg,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Qg(){this.next=this.b=this.a=null}function Yg(t){Cp.setTimeout(function(){throw t},0)}function Xg(t,e){Wg||function(){var t=Cp.Promise.resolve(void 0);Wg=function(){t.then(tv)}}(),Jg||(Wg(),Jg=!0),Zg.add(t,e)}zg.prototype.add=function(t,e){var n=Gg.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Qg.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Qg.prototype.reset=function(){this.next=this.b=this.a=null};var Jg=!1,Zg=new zg;function tv(){for(var t;t=$g();){try{t.a.call(t.b)}catch(n){Yg(n)}var e=Gg;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Jg=!1}function ev(t,e){qg.call(this),this.b=t||1,this.a=e||Cp,this.f=Op(this.eb,this),this.g=Mp()}function nv(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function rv(t,e,n){if("function"==typeof t)n&&(t=Op(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Op(t.handleEvent,t)}return 2147483647<Number(e)?-1:Cp.setTimeout(t,e||0)}function iv(t){t.a=rv(function(){t.a=null,t.c&&(t.c=!1,iv(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Lp(ev,qg),(Tp=ev.prototype).aa=!1,Tp.M=null,Tp.eb=function(){if(this.aa){var t=Mp()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Bg(this,"tick"),this.aa&&(nv(this),this.start()))}},Tp.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mp())},Tp.H=function(){ev.X.H.call(this),nv(this),delete this.a};var ov=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}bp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:iv(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(Cp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Fp);function sv(t){Fp.call(this),this.b=t,this.a={}}Lp(sv,Fp);var av=[];function uv(t,e,n,r){Array.isArray(n)||(n&&(av[0]=n.toString()),n=av);for(var i=0;i<n.length;i++){var o=Ng(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function cv(t){Qp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Dg(t)},t),t.a={}}function lv(){this.a=!0}function hv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Kg(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}sv.prototype.H=function(){sv.X.H.call(this),cv(this)},sv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lv.prototype.info=function(){};var fv={},dv=null;function pv(){return dv=dv||new qg}function gv(t){yg.call(this,fv.Ga,t)}function vv(t){var e=pv();Bg(e,new gv(e,t))}function mv(t,e){yg.call(this,fv.STAT_EVENT,t),this.stat=e}function yv(t){var e=pv();Bg(e,new mv(e,t))}function _v(t){yg.call(this,fv.Ha,t)}function bv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Cp.setTimeout(function(){t()},e)}fv.Ga="serverreachability",Lp(gv,yg),fv.STAT_EVENT="statevent",Lp(mv,yg),fv.Ha="timingevent",Lp(_v,yg);var wv={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},Tv={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function Iv(){}function Ev(){}Iv.prototype.b=null;var Cv,Sv={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function kv(){yg.call(this,"d")}function Av(){yg.call(this,"c")}function xv(){}function Nv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new sv(this),this.P=Pv,this.R=new ev(t=og?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Lp(kv,yg),Lp(Av,yg),Lp(xv,Iv),xv.prototype.a=function(){return new XMLHttpRequest},xv.prototype.c=function(){return{}},Cv=new xv;var Pv=45e3,Rv={},Ov={};function Dv(t,e,n){t.G=1,t.i=nm(Yv(e)),t.j=n,t.I=!0,Mv(t,null)}function Mv(t,e){t.u=Mp(),Uv(t),t.l=Yv(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),gm(n.b,"t",r),t.D=0,t.a=cy(t.g,t.g.C?e:null),0<t.O&&(t.F=new ov(Op(t.Da,t,t.a),t.O)),uv(t.J,t.a,"readystatechange",t.bb),e=t.B?Yp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),vv(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Lv(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Fv(t,n);if(i==Ov){4==e&&(t.h=4,yv(14),r=!1),hv(t.c,t.f,null,"[Incomplete Response]");break}if(i==Rv){t.h=4,yv(15),hv(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}hv(t.c,t.f,i,null),Hv(t,i)}4==e&&0==n.length&&(t.h=1,yv(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ey(e),e.F=!0,yv(11))):(hv(t.c,t.f,n,"[Invalid Chunked Response]"),Bv(t),qv(t))}function Fv(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ov:(n=Number(e.substring(n,r)),isNaN(n)?Rv:(r+=1)+n>e.length?Ov:(e=e.substr(r,n),t.D=r+n,e))}function Uv(t){t.T=Mp()+t.P,jv(t,t.P)}function jv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=bv(Op(t.$a,t),e)}function Vv(t){t.o&&(Cp.clearTimeout(t.o),t.o=null)}function qv(t){0==t.g.v||t.A||iy(t.g,t)}function Bv(t){Vv(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,nv(t.R),cv(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Hv(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Tm(n.b,t)))if(n.I=t.N,!t.C&&Tm(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(mA){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ry(n),Wm(n)}ty(n),yv(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=bv(Op(n.Xa,n),6e3));if(1>=wm(n.b)&&n.fa){try{n.fa()}catch(mA){}n.fa=void 0}}else sy(n,11)}else if((t.C||n.a==t)&&ry(n),!Bp(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(zp(l,"spdy")||zp(l,"quic")||zp(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Im(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,em(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Mp()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=uy(u,u.C?u.ha:null,u.ga),d.C){Em(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Vv(p),Uv(p)),u.a=d}else Zm(u);0<n.g.length&&Qm(n)}else"stop"!=i[0]&&"close"!=i[0]||sy(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?sy(n,7):zm(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);vv(4)}catch(mA){}}function Kv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(kp(t)||"string"==typeof t)jp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(kp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(kp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function zv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof zv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Wv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Gv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Gv(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Gv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Tp=Nv.prototype).setTimeout=function(t){this.P=t},Tp.bb=function(t){t=t.target;var e=this.F;e&&3==qm(t)?e.f():this.Da(t)},Tp.Da=function(t){try{if(t==this.a)t:{var e=qm(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!og&&!this.a.$())){this.A||4!=e||7==n||vv(8==n||0>=r?3:2),Vv(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bp(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,yv(12),Bv(this),qv(this);break t}hv(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Hv(this,u)}this.I?(Lv(this,e,o),og&&this.b&&3==e&&(uv(this.J,this.R,"tick",this.ab),this.R.start())):(hv(this.c,this.f,o,null),Hv(this,o)),4==e&&Bv(this),this.b&&!this.A&&(4==e?iy(this.g,this):(this.b=!1,Uv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,yv(12)):(this.h=0,yv(13)),Bv(this),qv(this)}}}catch(c){}},Tp.ab=function(){if(this.a){var t=qm(this.a),e=this.a.$();this.D<e.length&&(Vv(this),Lv(this,t,e),this.b&&4!=t&&Uv(this))}},Tp.cancel=function(){this.A=!0,Bv(this)},Tp.$a=function(){this.o=null;var t=Mp();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(vv(3),yv(17)),Bv(this),this.h=2,qv(this)):jv(this,this.T-t)},(Tp=zv.prototype).K=function(){Wv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Tp.L=function(){return Wv(this),this.a.concat()},Tp.get=function(t,e){return Gv(this.b,t)?this.b[t]:e},Tp.set=function(t,e){Gv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Tp.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var $v=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qv(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Qv){this.a=void 0!==e?e:t.a,Xv(this,t.f),this.j=t.j,Jv(this,t.c),Zv(this,t.h),this.g=t.g,e=t.b;var n=new hm;n.c=e.c,e.a&&(n.a=new zv(e.a),n.b=e.b),tm(this,n),this.i=t.i}else t&&(n=String(t).match($v))?(this.a=!!e,Xv(this,n[1]||"",!0),this.j=rm(n[2]||""),Jv(this,n[3]||"",!0),Zv(this,n[4]),this.g=rm(n[5]||"",!0),tm(this,n[6]||"",!0),this.i=rm(n[7]||"")):(this.a=!!e,this.b=new hm(null,this.a))}function Yv(t){return new Qv(t)}function Xv(t,e,n){t.f=n?rm(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Jv(t,e,n){t.c=n?rm(e,!0):e}function Zv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tm(t,e,n){e instanceof hm?(t.b=e,function(t,e){e&&!t.f&&(fm(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dm(this,e),gm(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=im(e,cm)),t.b=new hm(e,t.a))}function em(t,e,n){t.b.set(e,n)}function nm(t){return em(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mp()).toString(36)),t}function rm(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function im(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,om),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function om(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Qv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(im(e,sm,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(im(e,sm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(im(n,"/"==n.charAt(0)?um:am,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",im(n,lm)),t.join("")};var sm=/[#\/\?@]/g,am=/[#\?:]/g,um=/[#\?]/g,cm=/[#\?@]/g,lm=/#/g;function hm(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fm(t){t.a||(t.a=new zv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function dm(t,e){fm(t),e=vm(t,e),Gv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Gv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Wv(t)))}function pm(t,e){return fm(t),e=vm(t,e),Gv(t.a.b,e)}function gm(t,e,n){dm(t,e),0<n.length&&(t.c=null,t.a.set(vm(t,e),qp(n)),t.b+=n.length)}function vm(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Tp=hm.prototype).add=function(t,e){fm(this),this.c=null,t=vm(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Tp.forEach=function(t,e){fm(this),this.a.forEach(function(n,r){jp(n,function(n){t.call(e,n,r,this)},this)},this)},Tp.L=function(){fm(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Tp.K=function(t){fm(this);var e=[];if("string"==typeof t)pm(this,t)&&(e=Vp(e,this.a.get(vm(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Vp(e,t[n])}return e},Tp.set=function(t,e){return fm(this),this.c=null,pm(this,t=vm(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Tp.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Tp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var mm=function(){return function(t,e){this.b=t,this.a=e}}();function ym(t){this.g=t||_m,t=Cp.PerformanceNavigationTiming?0<(t=Cp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Cp.ja&&Cp.ja.za&&Cp.ja.za()&&Cp.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var _m=10;function bm(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wm(t){return t.b?1:t.a?t.a.size:0}function Tm(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Im(t,e){t.a?t.a.add(e):t.b=e}function Em(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Cm(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=wp(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return qp(t.c)}function Sm(){}function km(){this.a=new Sm}function Am(t,e,n){var r=n||"";try{Kv(t,function(t,n){var i=t;Ap(t)&&(i=Kg(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(qA){throw e.push(r+"type="+encodeURIComponent("_badmap")),qA}}function xm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ym.prototype.cancel=function(){var t,e;if(this.c=Cm(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=wp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Sm.prototype.stringify=function(t){return Cp.JSON.stringify(t,void 0)},Sm.prototype.parse=function(t){return Cp.JSON.parse(t,void 0)};var Nm=Cp.JSON.parse;function Pm(t){qg.call(this),this.headers=new zv,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Rm,this.F=this.G=!1}Lp(Pm,qg);var Rm="",Om=/^https?$/i,Dm=["POST","PUT"];function Mm(t){return"content-type"==t.toLowerCase()}function Lm(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Fm(t),jm(t)}function Fm(t){t.A||(t.A=!0,Bg(t,"complete"),Bg(t,"error"))}function Um(t){if(t.b&&void 0!==Ep&&(!t.u[1]||4!=qm(t)||2!=t.W()))if(t.m&&4==qm(t))rv(t.Aa,0,t);else if(Bg(t,"readystatechange"),4==qm(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match($v)[1]||null;if(!o&&Cp.self&&Cp.self.location){var s=Cp.self.location.protocol;o=s.substr(0,s.length-1)}i=!Om.test(o?o.toLowerCase():"")}e=i}if(e)Bg(t,"complete"),Bg(t,"success");else{t.h=6;try{var a=2<qm(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Fm(t)}}finally{jm(t)}}}function jm(t,e){if(t.a){Vm(t);var n=t.a,r=t.u[0]?Sp:null;t.a=null,t.u=null,e||Bg(t,"ready");try{n.onreadystatechange=r}catch(qA){}}}function Vm(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(Cp.clearTimeout(t.o),t.o=null)}function qm(t){return t.a?t.a.readyState:0}function Bm(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Qp(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):em(t,e,n))}function Hm(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Km(t){this.qa=0,this.g=[],this.c=new lv,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Hm("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Hm("baseRetryDelayMs",5e3,t),this.Sa=Hm("retryDelaySeedMs",1e4,t),this.Na=Hm("forwardChannelMaxRetries",2,t),this.na=Hm("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ym(t&&t.concurrentRequestLimit),this.la=new km,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function zm(t){if(Gm(t),3==t.v){var e=t.R++,n=Yv(t.B);em(n,"SID",t.J),em(n,"RID",e),em(n,"TYPE","terminate"),Xm(t,n),(e=new Nv(t,t.c,e,void 0)).G=2,e.i=nm(Yv(n)),n=!1,Cp.navigator&&Cp.navigator.sendBeacon&&(n=Cp.navigator.sendBeacon(e.i.toString(),"")),!n&&Cp.Image&&((new Image).src=e.i,n=!0),n||(e.a=cy(e.g,null),e.a.ba(e.i)),e.u=Mp(),Uv(e)}ay(t)}function Wm(t){t.a&&(ey(t),t.a.cancel(),t.a=null)}function Gm(t){Wm(t),t.j&&(Cp.clearTimeout(t.j),t.j=null),ry(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Cp.clearTimeout(t.h),t.h=null)}function $m(t,e){t.g.push(new mm(t.Pa++,e)),3==t.v&&Qm(t)}function Qm(t){bm(t.b)||t.h||(t.h=!0,Xg(t.Ca,t),t.u=0)}function Ym(t,e){var n;n=e?e.f:t.R++;var r=Yv(t.B);em(r,"SID",t.J),em(r,"RID",n),em(r,"AID",t.P),Xm(t,r),t.i&&t.l&&Bm(r,t.i,t.l),n=new Nv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Jm(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),Im(t.b,n),Dv(n,r,e)}function Xm(t,e){t.f&&Kv({},function(t,n){em(e,n,t)})}function Jm(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Op(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Am(l,s,"req"+c+"_")}catch(Wy){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zm(t){t.a||t.j||(t.T=1,Xg(t.Ba,t),t.o=0)}function ty(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=bv(Op(t.Ba,t),oy(t,t.o)),t.o++,0))}function ey(t){null!=t.s&&(Cp.clearTimeout(t.s),t.s=null)}function ny(t){t.a=new Nv(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Yv(t.ma);em(e,"RID","rpc"),em(e,"SID",t.J),em(e,"CI",t.G?"0":"1"),em(e,"AID",t.P),Xm(t,e),em(e,"TYPE","xmlhttp"),t.i&&t.l&&Bm(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=nm(Yv(e)),n.j=null,n.I=!0,Mv(n,t)}function ry(t){null!=t.m&&(Cp.clearTimeout(t.m),t.m=null)}function iy(t,e){var n=null;if(t.a==e){ry(t),ey(t),t.a=null;var r=2}else{if(!Tm(t.b,e))return;n=e.s,Em(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mp()-e.u;var i=t.u;Bg(r=pv(),new _v(r,n,e,i)),Qm(t)}else Zm(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wm(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=bv(Op(t.Ca,t,e),oy(t,t.u)),t.u++,0)))}(t,e)||2==r&&ty(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:sy(t,5);break;case 4:sy(t,10);break;case 3:sy(t,6);break;default:sy(t,2)}}function oy(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function sy(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Op(t.cb,t);n||(n=new Qv("//www.google.com/images/cleardot.gif"),Cp.location&&"http"==Cp.location.protocol||Xv(n,"https"),nm(n)),function(t,e){var n=new lv;if(Cp.Image){var r=new Image;r.onload=Dp(xm,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dp(xm,n,r,"TestLoadImage: error",!1,e),r.onabort=Dp(xm,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dp(xm,n,r,"TestLoadImage: timeout",!1,e),Cp.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else yv(2);t.v=0,t.f&&t.f.sa(e),ay(t),Gm(t)}function ay(t){t.v=0,t.I=-1,t.f&&(0==Cm(t.b).length&&0==t.g.length||(t.b.c.length=0,qp(t.g),t.g.length=0),t.f.ra())}function uy(t,e,n){var r=function(t){return t instanceof Qv?Yv(t):new Qv(t,void 0)}(n);if(""!=r.c)e&&Jv(r,e+"."+r.c),Zv(r,r.h);else{var i=Cp.location;r=function(t,e,n,r){var i=new Qv(null,void 0);return t&&Xv(i,t),e&&Jv(i,e),n&&Zv(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Qp(t.V,function(t,e){em(r,e,t)}),n=t.oa,(e=t.A)&&n&&em(r,e,n),em(r,"VER",t.ia),Xm(t,r),r}function cy(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pm(t.Oa)).G=t.C,e}function ly(){}function hy(){if(rg&&!(10<=Number(pg)))throw Error("Environmental error: no available transport.")}function fy(t,e){qg.call(this),this.a=new Km(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Bp(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bp(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new gy(this)}function dy(t){kv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function py(){Av.call(this),this.status=1}function gy(t){this.a=t}function vy(t){this.f=t}function my(t){qg.call(this),this.u=t,this.h=void 0,this.readyState=yy,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(Tp=Pm.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():Cv.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:Cv),this.a.onreadystatechange=Op(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void Lm(this,o)}t=n||"";var i=new zv(this.headers);r&&Kv(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Mm,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Cp.FormData&&t instanceof Cp.FormData,!(0<=Up(Dm,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Vm(this),0<this.s&&((this.F=function(t){return rg&&dg(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Op(this.ya,this)):this.o=rv(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(o){Lm(this,o)}},Tp.ya=function(){void 0!==Ep&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,Bg(this,"timeout"),this.abort(8))},Tp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Bg(this,"complete"),Bg(this,"abort"),jm(this))},Tp.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),jm(this,!0)),Pm.X.H.call(this)},Tp.Aa=function(){this.j||(this.B||this.m||this.g?Um(this):this.Za())},Tp.Za=function(){Um(this)},Tp.W=function(){try{return 2<qm(this)?this.a.status:-1}catch(eg){return-1}},Tp.$=function(){try{return this.a?this.a.responseText:""}catch(eg){return""}},Tp.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Nm(e)}},Tp.va=function(){return this.h},Tp.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(Tp=Km.prototype).ia=8,Tp.v=1,Tp.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Nv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Jp(r=Yp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Jm(this,n,e),em(i=Yv(this.B),"RID",t),em(i,"CVER",22),this.A&&em(i,"X-HTTP-Session-Id",this.A),Xm(this,i),this.i&&r&&Bm(i,this.i,r),Im(this.b,n),this.Ja&&em(i,"TYPE","init"),this.ea?(em(i,"$req",e),em(i,"SID","null"),n.U=!0,Dv(n,i,null)):Dv(n,i,e),this.v=2}}else 3==this.v&&(t?Ym(this,t):0==this.g.length||bm(this.b)||Ym(this))},Tp.Ba=function(){if(this.j=null,ny(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=bv(Op(this.Ya,this),t)}},Tp.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,yv(10),Wm(this),ny(this))},Tp.Xa=function(){null!=this.m&&(this.m=null,Wm(this),ty(this),yv(19))},Tp.cb=function(t){t?(this.c.info("Successfully pinged google.com"),yv(2)):(this.c.info("Failed to ping google.com"),yv(1))},(Tp=ly.prototype).ua=function(){},Tp.ta=function(){},Tp.sa=function(){},Tp.ra=function(){},Tp.Ka=function(){},hy.prototype.a=function(t,e){return new fy(t,e)},Lp(fy,qg),fy.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;yv(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=uy(t,null,t.ga),Qm(t)},fy.prototype.close=function(){zm(this.a)},fy.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,$m(this.a,e)}else this.m?((e={}).__data__=Kg(t),$m(this.a,e)):$m(this.a,t)},fy.prototype.H=function(){this.a.f=null,delete this.f,zm(this.a),delete this.a,fy.X.H.call(this)},Lp(dy,kv),Lp(py,Av),Lp(gy,ly),gy.prototype.ua=function(){Bg(this.a,"a")},gy.prototype.ta=function(t){Bg(this.a,new dy(t))},gy.prototype.sa=function(t){Bg(this.a,new py(t))},gy.prototype.ra=function(){Bg(this.a,"b")},Lp(vy,Iv),vy.prototype.a=function(){return new my(this.f)},vy.prototype.c=function(t){return function(){return t}}({}),Lp(my,qg);var yy=0;function _y(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function by(t){t.readyState=4,t.g=null,t.f=null,t.m=null,wy(t)}function wy(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Tp=my.prototype).open=function(t,e){if(this.readyState!=yy)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,wy(this)},Tp.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},Tp.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,by(this)),this.readyState=yy},Tp.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wy(this)),this.a&&(this.readyState=3,wy(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==Cp.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,_y(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},Tp.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?by(this):wy(this),3==this.readyState&&_y(this)}},Tp.Va=function(t){this.a&&(this.responseText=t,by(this))},Tp.Ua=function(){this.a&&by(this)},Tp.ca=function(){this.a&&by(this)},Tp.setRequestHeader=function(t,e){this.l.append(t,e)},Tp.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},Tp.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(my.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),hy.prototype.createWebChannel=hy.prototype.a,fy.prototype.send=fy.prototype.l,fy.prototype.open=fy.prototype.h,fy.prototype.close=fy.prototype.close,wv.NO_ERROR=0,wv.TIMEOUT=8,wv.HTTP_ERROR=6,Tv.COMPLETE="complete",Ev.EventType=Sv,Sv.OPEN="a",Sv.CLOSE="b",Sv.ERROR="c",Sv.MESSAGE="d",qg.prototype.listen=qg.prototype.wa,Pm.prototype.listenOnce=Pm.prototype.xa,Pm.prototype.getLastError=Pm.prototype.Ra,Pm.prototype.getLastErrorCode=Pm.prototype.va,Pm.prototype.getStatus=Pm.prototype.W,Pm.prototype.getResponseJson=Pm.prototype.Qa,Pm.prototype.getResponseText=Pm.prototype.$,Pm.prototype.send=Pm.prototype.ba;var Ty=wv,Iy=Tv,Ey=fv,Cy=vy,Sy=Ev,ky=Pm,Ay=n(762),xy=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();xy.o=-1;var Ny={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Py=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Ay.__extends)(e,t),e}(Error),Ry=new _p.Logger("@firebase/firestore");function Oy(){return Ry.logLevel}function Dy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ry.logLevel<=_p.LogLevel.DEBUG){var r=e.map(Fy);Ry.debug.apply(Ry,(0,Ay.__spreadArray)(["Firestore (8.6.8): "+t],r))}}function My(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ry.logLevel<=_p.LogLevel.ERROR){var r=e.map(Fy);Ry.error.apply(Ry,(0,Ay.__spreadArray)(["Firestore (8.6.8): "+t],r))}}function Ly(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ry.logLevel<=_p.LogLevel.WARN){var r=e.map(Fy);Ry.warn.apply(Ry,(0,Ay.__spreadArray)(["Firestore (8.6.8): "+t],r))}}function Fy(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(qA){return t}}function Uy(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw My(e),new Error(e)}function jy(t,e){t||Uy()}function Vy(t,e){return t}function qy(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var By=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qy(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hy(t,e){return t<e?-1:t>e?1:0}function Ky(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function zy(t){return t+"\0"}var Wy=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Py(Ny.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Py(Ny.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Py(Ny.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Py(Ny.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hy(this.nanoseconds,t.nanoseconds):Hy(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gy=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Wy(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function $y(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yy(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xy=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Uy(),void 0===n?n=t.length-e:n>t.length-e&&Uy(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Py(Ny.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xy),Zy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,t_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Zy.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Py(Ny.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Py(Ny.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Py(Ny.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Py(Ny.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xy),e_=function(){function t(t){this.fields=t,t.sort(t_.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ky(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),n_=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hy(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();n_.EMPTY_BYTE_STRING=new n_("");var r_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function i_(t){if(jy(!!t),"string"==typeof t){var e=0,n=r_.exec(t);if(jy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:o_(t.seconds),nanos:o_(t.nanos)}}function o_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function s_(t){return"string"==typeof t?n_.fromBase64String(t):n_.fromUint8Array(t)}function a_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function u_(t){var e=t.mapValue.fields.__previous_value__;return a_(e)?u_(e):e}function c_(t){var e=i_(t.mapValue.fields.__local_write_time__.timestampValue);return new Wy(e.seconds,e.nanos)}function l_(t){return null==t}function h_(t){return 0===t&&1/t==-1/0}function f_(t){return"number"==typeof t&&Number.isInteger(t)&&!h_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var d_=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Jy.fromString(e))},t.fromName=function(e){return new t(Jy.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Jy.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Jy.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Jy(e.slice()))},t}();function p_(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a_(t)?4:10:Uy()}function g_(t,e){var n=p_(t);if(n!==p_(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return c_(t).isEqual(c_(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=i_(t.timestampValue),r=i_(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return s_(t.bytesValue).isEqual(s_(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return o_(t.geoPointValue.latitude)===o_(e.geoPointValue.latitude)&&o_(t.geoPointValue.longitude)===o_(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return o_(t.integerValue)===o_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=o_(t.doubleValue),r=o_(e.doubleValue);return n===r?h_(n)===h_(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ky(t.arrayValue.values||[],e.arrayValue.values||[],g_);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if($y(n)!==$y(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!g_(n[i],r[i])))return!1;return!0}(t,e);default:return Uy()}}function v_(t,e){return void 0!==(t.values||[]).find(function(t){return g_(t,e)})}function m_(t,e){var n=p_(t),r=p_(e);if(n!==r)return Hy(n,r);switch(n){case 0:return 0;case 1:return Hy(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=o_(t.integerValue||t.doubleValue),r=o_(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return y_(t.timestampValue,e.timestampValue);case 4:return y_(c_(t),c_(e));case 5:return Hy(t.stringValue,e.stringValue);case 6:return function(t,e){var n=s_(t),r=s_(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hy(n[i],r[i]);if(0!==o)return o}return Hy(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hy(o_(t.latitude),o_(e.latitude));return 0!==n?n:Hy(o_(t.longitude),o_(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=m_(n[i],r[i]);if(o)return o}return Hy(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hy(r[s],o[s]);if(0!==a)return a;var u=m_(n[r[s]],i[o[s]]);if(0!==u)return u}return Hy(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Uy()}}function y_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hy(t,e);var n=i_(t),r=i_(e),i=Hy(n.seconds,r.seconds);return 0!==i?i:Hy(n.nanos,r.nanos)}function __(t){return b_(t)}function b_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=i_(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?s_(t.bytesValue).toBase64():"referenceValue"in t?d_.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=b_(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+b_(t.fields[o])}return e+"}"}(t.mapValue):Uy();var e}function w_(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function T_(t){return!!t&&"integerValue"in t}function I_(t){return!!t&&"arrayValue"in t}function E_(t){return!!t&&"nullValue"in t}function C_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function S_(t){return!!t&&"mapValue"in t}function k_(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},i_(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Qy(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=k_(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=k_(t.arrayValue.values[r]);return n}return Object.assign({},t)}var A_=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!S_(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=k_(e)},t.prototype.setAll=function(t){var e=this,n=t_.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=k_(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());S_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return g_(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];S_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Qy(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(k_(this.value))},t}();function x_(t){var e=[];return Qy(t.fields,function(t,n){var r=new t_([t]);if(S_(n)){var i=x_(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new e_(e)}var N_=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Gy.min(),A_.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,A_.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,A_.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=A_.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=A_.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),P_=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function R_(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new P_(t,e,n,r,i,o,s)}function O_(t){var e=Vy(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+__(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),l_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=W_(e.startAt)),e.endAt&&(n+="|ub:",n+=W_(e.endAt)),e.h=n}return e.h}function D_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$_(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!g_(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y_(t.startAt,e.startAt)&&Y_(t.endAt,e.endAt)}function M_(t){return d_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var L_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Ay.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new F_(t,n,r):"array-contains"===n?new q_(t,r):"in"===n?new B_(t,r):"not-in"===n?new H_(t,r):"array-contains-any"===n?new K_(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new U_(t,n):new j_(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(m_(e,this.value)):null!==e&&p_(this.value)===p_(e)&&this.m(m_(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Uy()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),F_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=d_.fromName(r.referenceValue),i}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){var e=d_.comparator(t.key,this.key);return this.m(e)},e}(L_),U_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=V_(0,n),r}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(L_),j_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=V_(0,n),r}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(L_);function V_(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return d_.fromName(t.referenceValue)})}var q_=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return I_(e)&&v_(e.arrayValue,this.value)},e}(L_),B_=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&v_(this.value.arrayValue,e)},e}(L_),H_=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){if(v_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!v_(this.value.arrayValue,e)},e}(L_),K_=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Ay.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!I_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return v_(e.value.arrayValue,t)})},e}(L_),z_=function(t,e){this.position=t,this.before=e};function W_(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return __(t)}).join(",")}var G_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function $_(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Q_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?d_.comparator(d_.fromName(s.referenceValue),n.key):m_(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Y_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!g_(t.position[n],e.position[n]))return!1;return!0}var X_=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function J_(t,e,n,r,i,o,s,a){return new X_(t,e,n,r,i,o,s,a)}function Z_(t){return new X_(t)}function tb(t){return!l_(t.limit)&&"F"===t.limitType}function eb(t){return!l_(t.limit)&&"L"===t.limitType}function nb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ib(t){return null!==t.collectionGroup}function ob(t){var e=Vy(t);if(null===e.p){e.p=[];var n=rb(e),r=nb(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new G_(n)),e.p.push(new G_(t_.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new G_(t_.keyField(),u))}}}return e.p}function sb(t){var e=Vy(t);if(!e.T)if("F"===e.limitType)e.T=R_(e.path,e.collectionGroup,ob(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ob(e);r<i.length;r++){var o=i[r];n.push(new G_(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new z_(e.endAt.position,!e.endAt.before):null,a=e.startAt?new z_(e.startAt.position,!e.startAt.before):null;e.T=R_(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function ab(t,e,n){return new X_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ub(t,e){return D_(sb(t),sb(e))&&t.limitType===e.limitType}function cb(t){return O_(sb(t))+"|lt:"+t.limitType}function lb(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+__(e.value);var e}).join(", ")+"]"),l_(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+W_(t.startAt)),t.endAt&&(e+=", endAt: "+W_(t.endAt)),"Target("+e+")"}(sb(t))+"; limitType="+t.limitType+")"}function hb(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):d_.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Q_(t.startAt,ob(t),e)||t.endAt&&Q_(t.endAt,ob(t),e))}(t,e)}function fb(t){return function(e,n){for(var r=!1,i=0,o=ob(t);i<o.length;i++){var s=o[i],a=db(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function db(t,e,n){var r=t.field.isKeyField()?d_.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?m_(r,i):Uy()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Uy()}}function pb(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:h_(e)?"-0":e}}function gb(t){return{integerValue:""+t}}function vb(t,e){return f_(e)?gb(e):pb(t,e)}var mb=function(){this._=void 0};function yb(t,e,n){return t instanceof wb?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Tb?Ib(t,e):t instanceof Eb?Cb(t,e):function(t,e){var n=bb(t,e),r=kb(n)+kb(t.A);return T_(n)&&T_(t.A)?gb(r):pb(t.R,r)}(t,e)}function _b(t,e,n){return t instanceof Tb?Ib(t,e):t instanceof Eb?Cb(t,e):n}function bb(t,e){return t instanceof Sb?T_(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var wb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e}(mb),Tb=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ay.__extends)(e,t),e}(mb);function Ib(t,e){for(var n=Ab(e),r=function(t){n.some(function(e){return g_(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ay.__extends)(e,t),e}(mb);function Cb(t,e){for(var n=Ab(e),r=function(t){n=n.filter(function(e){return!g_(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Sb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Ay.__extends)(e,t),e}(mb);function kb(t){return o_(t.integerValue||t.doubleValue)}function Ab(t){return I_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var xb=function(t,e){this.field=t,this.transform=e},Nb=function(t,e){this.version=t,this.transformResults=e},Pb=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Rb(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ob=function(){};function Db(t,e,n){t instanceof jb?function(t,e,n){var r=t.value.clone(),i=Bb(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Vb?function(t,e,n){if(Rb(t.precondition,e)){var r=Bb(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(qb(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Mb(t,e,n){t instanceof jb?function(t,e,n){if(Rb(t.precondition,e)){var r=t.value.clone(),i=Hb(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ub(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Vb?function(t,e,n){if(Rb(t.precondition,e)){var r=Hb(t.fieldTransforms,n,e),i=e.data;i.setAll(qb(t)),i.setAll(r),e.convertToFoundDocument(Ub(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Rb(t.precondition,e)&&e.convertToNoDocument(Gy.min())}(t,e)}function Lb(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=bb(o.transform,s||null);null!=a&&(null==n&&(n=A_.empty()),n.set(o.field,a))}return n||null}function Fb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ky(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Tb&&e instanceof Tb||t instanceof Eb&&e instanceof Eb?Ky(t.elements,e.elements,g_):t instanceof Sb&&e instanceof Sb?g_(t.A,e.A):t instanceof wb&&e instanceof wb}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ub(t){return t.isFoundDocument()?t.version:Gy.min()}var jb=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Ay.__extends)(e,t),e}(Ob),Vb=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Ay.__extends)(e,t),e}(Ob);function qb(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Bb(t,e,n){var r=new Map;jy(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,_b(s,a,n[i]))}return r}function Hb(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,yb(a,u,e))}return r}var Kb,zb,Wb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Ay.__extends)(e,t),e}(Ob),Gb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Ay.__extends)(e,t),e}(Ob),$b=function(t){this.count=t};function Qb(t){switch(t){case Ny.OK:return Uy();case Ny.CANCELLED:case Ny.UNKNOWN:case Ny.DEADLINE_EXCEEDED:case Ny.RESOURCE_EXHAUSTED:case Ny.INTERNAL:case Ny.UNAVAILABLE:case Ny.UNAUTHENTICATED:return!1;case Ny.INVALID_ARGUMENT:case Ny.NOT_FOUND:case Ny.ALREADY_EXISTS:case Ny.PERMISSION_DENIED:case Ny.FAILED_PRECONDITION:case Ny.ABORTED:case Ny.OUT_OF_RANGE:case Ny.UNIMPLEMENTED:case Ny.DATA_LOSS:return!0;default:return Uy()}}function Yb(t){if(void 0===t)return My("GRPC error has no .code"),Ny.UNKNOWN;switch(t){case Kb.OK:return Ny.OK;case Kb.CANCELLED:return Ny.CANCELLED;case Kb.UNKNOWN:return Ny.UNKNOWN;case Kb.DEADLINE_EXCEEDED:return Ny.DEADLINE_EXCEEDED;case Kb.RESOURCE_EXHAUSTED:return Ny.RESOURCE_EXHAUSTED;case Kb.INTERNAL:return Ny.INTERNAL;case Kb.UNAVAILABLE:return Ny.UNAVAILABLE;case Kb.UNAUTHENTICATED:return Ny.UNAUTHENTICATED;case Kb.INVALID_ARGUMENT:return Ny.INVALID_ARGUMENT;case Kb.NOT_FOUND:return Ny.NOT_FOUND;case Kb.ALREADY_EXISTS:return Ny.ALREADY_EXISTS;case Kb.PERMISSION_DENIED:return Ny.PERMISSION_DENIED;case Kb.FAILED_PRECONDITION:return Ny.FAILED_PRECONDITION;case Kb.ABORTED:return Ny.ABORTED;case Kb.OUT_OF_RANGE:return Ny.OUT_OF_RANGE;case Kb.UNIMPLEMENTED:return Ny.UNIMPLEMENTED;case Kb.DATA_LOSS:return Ny.DATA_LOSS;default:return Uy()}}(zb=Kb||(Kb={}))[zb.OK=0]="OK",zb[zb.CANCELLED=1]="CANCELLED",zb[zb.UNKNOWN=2]="UNKNOWN",zb[zb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zb[zb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zb[zb.NOT_FOUND=5]="NOT_FOUND",zb[zb.ALREADY_EXISTS=6]="ALREADY_EXISTS",zb[zb.PERMISSION_DENIED=7]="PERMISSION_DENIED",zb[zb.UNAUTHENTICATED=16]="UNAUTHENTICATED",zb[zb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zb[zb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zb[zb.ABORTED=10]="ABORTED",zb[zb.OUT_OF_RANGE=11]="OUT_OF_RANGE",zb[zb.UNIMPLEMENTED=12]="UNIMPLEMENTED",zb[zb.INTERNAL=13]="INTERNAL",zb[zb.UNAVAILABLE=14]="UNAVAILABLE",zb[zb.DATA_LOSS=15]="DATA_LOSS";var Xb=function(){function t(t,e){this.comparator=t,this.root=e||Zb.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zb.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zb.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Jb(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Jb(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Jb(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Jb(this.root,t,this.comparator,!0)},t}(),Jb=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Zb=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Uy();if(this.right.isRed())throw Uy();var t=this.left.check();if(t!==this.right.check())throw Uy();return t+(this.isRed()?0:1)},t}();Zb.EMPTY=null,Zb.RED=!0,Zb.BLACK=!1,Zb.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Uy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Uy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Uy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Uy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Uy()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Zb(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var tw=function(){function t(t){this.comparator=t,this.data=new Xb(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ew(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ew(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ew=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),nw=new Xb(d_.comparator);function rw(){return nw}var iw=new Xb(d_.comparator);function ow(){return iw}var sw=new Xb(d_.comparator);function aw(){return sw}var uw=new tw(d_.comparator);function cw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=uw,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var lw=new tw(Hy);function hw(){return lw}var fw=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,dw.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Gy.min(),r,hw(),rw(),cw())},t}(),dw=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(n_.EMPTY_BYTE_STRING,n,cw(),cw(),cw())},t}(),pw=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},gw=function(t,e){this.targetId=t,this.V=e},vw=function(t,e,n,r){void 0===n&&(n=n_.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mw=function(){function t(){this.S=0,this.D=bw(),this.C=n_.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=cw(),e=cw(),n=cw();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Uy()}}),new dw(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=bw()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),yw=function(){function t(t){this.W=t,this.G=new Map,this.H=rw(),this.J=_w(),this.Y=new tw(Hy)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Uy()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(M_(i))if(0===n){var o=new d_(i.path);this.tt(e,o,N_.newNoDocument(o,Gy.min()))}else jy(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&M_(o.target)){var s=new d_(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,N_.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=cw();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new fw(t,n,this.Y,this.H,r);return this.H=rw(),this.J=_w(),this.Y=new tw(Hy),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new mw,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new tw(Hy),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Dy("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new mw),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function _w(){return new Xb(d_.comparator)}function bw(){return new Xb(d_.comparator)}var ww={asc:"ASCENDING",desc:"DESCENDING"},Tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Iw=function(t,e){this.databaseId=t,this.I=e};function Ew(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(t,e){return t.I?e.toBase64():e.toUint8Array()}function Sw(t,e){return Ew(t,e.toTimestamp())}function kw(t){return jy(!!t),Gy.fromTimestamp(function(t){var e=i_(t);return new Wy(e.seconds,e.nanos)}(t))}function Aw(t,e){return function(t){return new Jy(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function xw(t){var e=Jy.fromString(t);return jy(Zw(e)),e}function Nw(t,e){return Aw(t.databaseId,e.path)}function Pw(t,e){var n=xw(e);if(n.get(1)!==t.databaseId.projectId)throw new Py(Ny.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Py(Ny.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new d_(Mw(n))}function Rw(t,e){return Aw(t.databaseId,e)}function Ow(t){var e=xw(t);return 4===e.length?Jy.emptyPath():Mw(e)}function Dw(t){return new Jy(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mw(t){return jy(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Lw(t,e,n){return{name:Nw(t,e),fields:n.value.mapValue.fields}}function Fw(t,e,n){var r=Pw(t,e.name),i=kw(e.updateTime),o=new A_({mapValue:{fields:e.fields}}),s=N_.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Uw(t,e){var n;if(e instanceof jb)n={update:Lw(t,e.key,e.value)};else if(e instanceof Wb)n={delete:Nw(t,e.key)};else if(e instanceof Vb)n={update:Lw(t,e.key,e.data),updateMask:Jw(e.fieldMask)};else{if(!(e instanceof Gb))return Uy();n={verify:Nw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof wb)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tb)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Eb)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sb)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Uy()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Sw(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Uy()}(t,e.precondition)),n}function jw(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Pb.updateTime(kw(t.updateTime)):void 0!==t.exists?Pb.exists(t.exists):Pb.none()}(e.currentDocument):Pb.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(jy("REQUEST_TIME"===e.setToServerValue),n=new wb):"appendMissingElements"in e?n=new Tb(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Eb(e.removeAllFromArray.values||[]):"increment"in e?n=new Sb(t,e.increment):Uy();var r=t_.fromServerFormat(e.fieldPath);return new xb(r,n)}(t,e)}):[];if(e.update){var i=Pw(t,e.update.name),o=new A_({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new e_((t.fieldPaths||[]).map(function(t){return t_.fromServerFormat(t)}))}(e.updateMask);return new Vb(i,o,s,n,r)}return new jb(i,o,n,r)}if(e.delete){var a=Pw(t,e.delete);return new Wb(a,n)}if(e.verify){var u=Pw(t,e.verify);return new Gb(u,n)}return Uy()}function Vw(t,e){return{documents:[Rw(t,e.path)]}}function qw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Rw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Rw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(C_(t.value))return{unaryFilter:{field:$w(t.field),op:"IS_NAN"}};if(E_(t.value))return{unaryFilter:{field:$w(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(C_(t.value))return{unaryFilter:{field:$w(t.field),op:"IS_NOT_NAN"}};if(E_(t.value))return{unaryFilter:{field:$w(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$w(t.field),op:Gw(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:$w(t.field),direction:Ww(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||l_(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Kw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Kw(e.endAt)),n}function Bw(t){var e=Ow(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){jy(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Hw(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new G_(Qw(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return l_(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=zw(n.startAt));var l=null;return n.endAt&&(l=zw(n.endAt)),J_(e,i,a,s,u,"F",c,l)}function Hw(t){return t?void 0!==t.unaryFilter?[Xw(t)]:void 0!==t.fieldFilter?[Yw(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Hw(t)}).reduce(function(t,e){return t.concat(e)}):Uy():[]}function Kw(t){return{before:t.before,values:t.position}}function zw(t){return new z_(t.values||[],!!t.before)}function Ww(t){return ww[t]}function Gw(t){return Tw[t]}function $w(t){return{fieldPath:t.canonicalString()}}function Qw(t){return t_.fromServerFormat(t.fieldPath)}function Yw(t){return L_.create(Qw(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Uy()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qw(t.unaryFilter.field);return L_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qw(t.unaryFilter.field);return L_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qw(t.unaryFilter.field);return L_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qw(t.unaryFilter.field);return L_.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Uy()}}function Jw(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Zw(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function tT(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nT(e)),e=eT(t.get(n),e);return nT(e)}function eT(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function nT(t){return t+"\x01\x01"}function rT(t){var e=t.length;if(jy(e>=2),2===e)return jy("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Jy.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Uy(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Uy()}o=s+2}return new Jy(r)}var iT=function(t,e){this.seconds=t,this.nanoseconds=e},oT=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};oT.store="owner",oT.key="owner";var sT=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};sT.store="mutationQueues",sT.keyPath="userId";var aT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};aT.store="mutations",aT.keyPath="batchId",aT.userMutationsIndex="userMutationsIndex",aT.userMutationsKeyPath=["userId","batchId"];var uT=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,tT(e)]},t.key=function(t,e,n){return[t,tT(e),n]},t}();uT.store="documentMutations",uT.PLACEHOLDER=new uT;var cT=function(t,e){this.path=t,this.readTime=e},lT=function(t,e){this.path=t,this.version=e},hT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};hT.store="remoteDocuments",hT.readTimeIndex="readTimeIndex",hT.readTimeIndexPath="readTime",hT.collectionReadTimeIndex="collectionReadTimeIndex",hT.collectionReadTimeIndexPath=["parentPath","readTime"];var fT=function(t){this.byteSize=t};fT.store="remoteDocumentGlobal",fT.key="remoteDocumentGlobalKey";var dT=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};dT.store="targets",dT.keyPath="targetId",dT.queryTargetsIndexName="queryTargetsIndex",dT.queryTargetsKeyPath=["canonicalId","targetId"];var pT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};pT.store="targetDocuments",pT.keyPath=["targetId","path"],pT.documentTargetsIndex="documentTargetsIndex",pT.documentTargetsKeyPath=["path","targetId"];var gT=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};gT.key="targetGlobalKey",gT.store="targetGlobal";var vT=function(t,e){this.collectionId=t,this.parent=e};vT.store="collectionParents",vT.keyPath=["collectionId","parent"];var mT=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};mT.store="clientMetadata",mT.keyPath="clientId";var yT=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};yT.store="bundles",yT.keyPath="bundleId";var _T=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};_T.store="namedQueries",_T.keyPath="name";var bT=(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],[sT.store,aT.store,uT.store,hT.store,dT.store,oT.store,gT.store,pT.store]),[mT.store])),[fT.store])),[vT.store])),[yT.store,_T.store]),wT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",TT=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),IT=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ET=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Uy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),CT=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new IT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new AT(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=OT(e.target.error);n.ft.reject(new AT(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new AT(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Dy("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new NT(e)},t}(),ST=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,yp.getUA)())&&My("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Dy("SimpleDb","Removing database:",t),PT(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,yp.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Dy("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new AT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Py(Ny.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new AT(t,n))},i.onupgradeneeded=function(t){Dy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Dy("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Ay.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=CT.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),ET.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Dy("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),kT=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return PT(this.Pt.delete())},t}(),AT=function(t){function e(e,n){var r=this;return(r=t.call(this,Ny.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Ay.__extends)(e,t),e}(Py);function xT(t){return"IndexedDbTransactionError"===t.name}var NT=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Dy("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Dy("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),PT(n)},t.prototype.add=function(t){return Dy("SimpleDb","ADD",this.store.name,t,t),PT(this.store.add(t))},t.prototype.get=function(t){var e=this;return PT(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Dy("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Dy("SimpleDb","DELETE",this.store.name,t),PT(this.store.delete(t))},t.prototype.count=function(){return Dy("SimpleDb","COUNT",this.store.name),PT(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Dy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ET(function(n,r){e.onerror=function(t){var e=OT(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new ET(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new kT(i),s=e(i.primaryKey,i.value,o);if(s instanceof ET){var a=s.catch(function(t){return o.done(),ET.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return ET.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function PT(t){return new ET(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=OT(t.target.error);n(e)}})}var RT=!1;function OT(t){var e=ST._t((0,yp.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Py("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return RT||(RT=!0,setTimeout(function(){throw r},0)),r}}return t}var DT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Ay.__extends)(e,t),e}(TT);function MT(t,e){var n=Vy(t);return ST.It(n.Mt,e)}var LT=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Db(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Mb(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Mb(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Gy.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},cw())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ky(this.mutations,t.mutations,function(t,e){return Fb(t,e)})&&Ky(this.baseMutations,t.baseMutations,function(t,e){return Fb(t,e)})},t}(),FT=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){jy(e.mutations.length===r.length);for(var i=aw(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),UT=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Gy.min()),void 0===o&&(o=Gy.min()),void 0===s&&(s=n_.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),jT=function(t){this.Lt=t};function VT(t,e){if(e.document)return Fw(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=d_.fromSegments(e.noDocument.path),r=zT(e.noDocument.readTime),i=N_.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=d_.fromSegments(e.unknownDocument.path);return r=zT(e.unknownDocument.version),N_.newUnknownDocument(o,r)}return Uy()}function qT(t,e,n){var r=BT(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Nw(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ew(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new hT(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=KT(e.version);return s=e.hasCommittedMutations,new hT(null,new cT(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=KT(e.version);return new hT(new lT(c,l),null,null,!0,r,i)}return Uy()}function BT(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function HT(t){var e=new Wy(t[0],t[1]);return Gy.fromTimestamp(e)}function KT(t){var e=t.toTimestamp();return new iT(e.seconds,e.nanoseconds)}function zT(t){var e=new Wy(t.seconds,t.nanoseconds);return Gy.fromTimestamp(e)}function WT(t,e){for(var n=(e.baseMutations||[]).map(function(e){return jw(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return jw(t.Lt,e)}),o=Wy.fromMillis(e.localWriteTimeMs);return new LT(e.batchId,o,n,i)}function GT(t){var e,n,r=zT(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?zT(t.lastLimboFreeSnapshotVersion):Gy.min();return void 0!==t.query.documents?(jy(1===(n=t.query).documents.length),e=sb(Z_(Ow(n.documents[0])))):e=function(t){return sb(Bw(t))}(t.query),new UT(e,t.targetId,0,t.lastListenSequenceNumber,r,i,n_.fromBase64String(t.resumeToken))}function $T(t,e){var n,r=KT(e.snapshotVersion),i=KT(e.lastLimboFreeSnapshotVersion);n=M_(e.target)?Vw(t.Lt,e.target):qw(t.Lt,e.target);var o=e.resumeToken.toBase64();return new dT(e.targetId,O_(e.target),r,o,e.sequenceNumber,i,n)}function QT(t){var e=Bw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ab(e,e.limit,"L"):e}var YT=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return XT(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:zT(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return XT(t).put({bundleId:(n=e).id,createTime:KT(kw(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return JT(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:QT(e.bundledQuery),readTime:zT(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return JT(t).put(function(t){return{name:t.name,readTime:KT(kw(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function XT(t){return MT(t,yT.store)}function JT(t){return MT(t,_T.store)}var ZT=function(){function t(){this.Bt=new tI}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ET.resolve()},t.prototype.getCollectionParents=function(t,e){return ET.resolve(this.Bt.getEntries(e))},t}(),tI=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new tw(Jy.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new tw(Jy.comparator)).toArray()},t}(),eI=function(){function t(){this.qt=new tI}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:tT(i)};return nI(t).put(o)}return ET.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[zy(e),""],!1,!0);return nI(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(rT(o.parent))}return n})},t}();function nI(t){return MT(t,vT.store)}var rI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iI=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function oI(t,e,n){var r=t.store(aT.store),i=t.store(uT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){jy(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=uT.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ET.waitFor(o).next(function(){return c})}function sI(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Uy();e=t.noDocument}return JSON.stringify(e).length}iI.DEFAULT_COLLECTION_PERCENTILE=10,iI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iI.DEFAULT=new iI(41943040,iI.DEFAULT_COLLECTION_PERCENTILE,iI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iI.DISABLED=new iI(-1,0,0);var aI=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return jy(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cI(t).$t({index:aT.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=lI(t),s=cI(t);return s.add({}).next(function(a){jy("number"==typeof a);for(var u=new LT(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Uw(t.Lt,e)}),i=n.mutations.map(function(e){return Uw(t.Lt,e)});return new aT(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new tw(function(t,e){return Hy(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=uT.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,uT.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),ET.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return cI(t).get(e).next(function(t){return t?(jy(t.userId===n.userId),WT(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?ET.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return cI(t).$t({index:aT.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(jy(e.batchId>=r),o=WT(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return cI(t).$t({index:aT.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cI(t).Nt(aT.userMutationsIndex,n).next(function(t){return t.map(function(t){return WT(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=uT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return lI(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=rT(r[1]);if(a===n.userId&&e.path.isEqual(c))return cI(t).get(u).next(function(t){if(!t)throw Uy();jy(t.userId===n.userId),o.push(WT(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new tw(Hy),i=[];return e.forEach(function(e){var o=uT.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=lI(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=rT(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),ET.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=uT.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new tw(Hy);return lI(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=rT(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(cI(t).get(e).next(function(t){if(null===t)throw Uy();jy(t.userId===n.userId),r.push(WT(n.R,t))}))}),ET.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return oI(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),ET.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return ET.resolve();var r=IDBKeyRange.lowerBound(uT.prefixForUser(e.userId)),i=[];return lI(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=rT(t[1]);i.push(o)}else r.done()}).next(function(){jy(0===i.length)})})},t.prototype.containsKey=function(t,e){return uI(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return hI(t).get(this.userId).next(function(t){return t||new sT(e.userId,-1,"")})},t}();function uI(t,e,n){var r=uT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return lI(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function cI(t){return MT(t,aT.store)}function lI(t){return MT(t,uT.store)}function hI(t){return MT(t,sT.store)}var fI=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dI=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new fI(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Gy.fromTimestamp(new Wy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return pI(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return jy(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return pI(t).$t(function(s,a){var u=GT(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return ET.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return pI(t).$t(function(t,n){var r=GT(n);e(r)})},t.prototype.Xt=function(t){return gI(t).get(gT.key).next(function(t){return jy(null!==t),t})},t.prototype.Zt=function(t,e){return gI(t).put(gT.key,e)},t.prototype.te=function(t,e){return pI(t).put($T(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=O_(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return pI(t).$t({range:r,index:dT.queryTargetsIndexName},function(t,n,r){var o=GT(n);D_(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=vI(t);return e.forEach(function(e){var s=tT(e.path);i.push(o.put(new pT(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),ET.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=vI(t);return ET.forEach(e,function(e){var o=tT(e.path);return ET.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=vI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=vI(t),i=cw();return r.$t({range:n,kt:!0},function(t,e,n){var r=rT(t[1]),o=new d_(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=tT(e.path),r=IDBKeyRange.bound([n],[zy(n)],!1,!0),i=0;return vI(t).$t({index:pT.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return pI(t).get(e).next(function(t){return t?GT(t):null})},t}();function pI(t){return MT(t,dT.store)}function gI(t){return MT(t,gT.store)}function vI(t){return MT(t,pT.store)}function mI(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){if(t.code!==Ny.FAILED_PRECONDITION||t.message!==wT)throw t;return Dy("LocalStore","Unexpectedly lost primary lease"),[2]})})}function yI(t,e){var n=t[1],r=e[1],i=Hy(t[0],e[0]);return 0===i?Hy(n,r):i}var _I=function(){function t(t){this.ne=t,this.buffer=new tw(yI),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yI(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),bI=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Dy("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return xT(e=n.sent())?(Dy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),wI=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ET.resolve(xy.o);var r=new _I(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Dy("LruGarbageCollector","Garbage collection skipped; disabled"),ET.resolve(rI)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Dy("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),rI):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Dy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Oy()<=_p.LogLevel.DEBUG&&Dy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),ET.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),TI=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new wI(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return II(t,n)},t.prototype.removeReference=function(t,e,n){return II(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return II(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return hI(t).Ot(function(r){return uI(t,r,e).next(function(t){return t&&(n=!0),ET.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),vI(t).delete([0,tT(s.path)])})});i.push(u)}}).next(function(){return ET.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return II(t,e)},t.prototype.we=function(t,e){var n,r=vI(t),i=xy.o;return r.$t({index:pT.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==xy.o&&e(new d_(rT(n)),i),i=s,n=o):i=xy.o}).next(function(){i!==xy.o&&e(new d_(rT(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function II(t,e){return vI(t).put(function(t,e){return new pT(0,tT(t.path),e)}(e,t.currentSequenceNumber))}var EI=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qy(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Yy(this.inner)},t}(),CI=function(){function t(){this.changes=new EI(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Gy.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:N_.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ET.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),SI=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return xI(t).put(NI(e),n)},t.prototype.removeEntry=function(t,e){var n=xI(t),r=NI(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return xI(t).get(NI(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return xI(t).get(NI(e)).next(function(t){return{document:n.ye(e,t),size:sI(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=rw();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=rw(),i=new Xb(d_.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,sI(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ET.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return xI(t).$t({range:r},function(t,e,r){for(var s=d_.fromSegments(t);o&&d_.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=rw(),o=e.path.length+1,s={};if(n.isEqual(Gy.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=BT(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=hT.collectionReadTimeIndex}return xI(t).$t(s,function(t,n,s){if(t.length===o){var a=VT(r.R,n);e.path.isPrefixOf(a.key.path)?hb(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new kI(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return AI(t).get(fT.key).next(function(t){return jy(!!t),t})},t.prototype.me=function(t,e){return AI(t).put(fT.key,e)},t.prototype.ye=function(t,e){if(e){var n=VT(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Gy.min()))return n}return N_.newInvalidDocument(t)},t}(),kI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new EI(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Ay.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new tw(function(t,e){return Hy(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=qT(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=sI(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=qT(e.Ie.R,N_.newNoDocument(o,Gy.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),ET.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(CI);function AI(t){return MT(t,fT.store)}function xI(t){return MT(t,hT.store)}function NI(t){return t.path.toArray()}var PI=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;jy(n<r&&n>=0&&r<=11);var o=new CT("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(oT.store)}(t),function(t){t.createObjectStore(sT.store,{keyPath:sT.keyPath}),t.createObjectStore(aT.store,{keyPath:aT.keyPath,autoIncrement:!0}).createIndex(aT.userMutationsIndex,aT.userMutationsKeyPath,{unique:!0}),t.createObjectStore(uT.store)}(t),RI(t),function(t){t.createObjectStore(hT.store)}(t));var s=ET.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(pT.store),t.deleteObjectStore(dT.store),t.deleteObjectStore(gT.store)}(t),RI(t)),s=s.next(function(){return function(t){var e=t.store(gT.store),n=new gT(0,0,Gy.min().toTimestamp(),0);return e.put(gT.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(aT.store).Nt().next(function(n){t.deleteObjectStore(aT.store),t.createObjectStore(aT.store,{keyPath:aT.keyPath,autoIncrement:!0}).createIndex(aT.userMutationsIndex,aT.userMutationsKeyPath,{unique:!0});var r=e.store(aT.store),i=n.map(function(t){return r.put(t)});return ET.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(mT.store,{keyPath:mT.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(fT.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(hT.store);e.createIndex(hT.readTimeIndex,hT.readTimeIndexPath,{unique:!1}),e.createIndex(hT.collectionReadTimeIndex,hT.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(yT.store,{keyPath:yT.keyPath})}(t),function(t){t.createObjectStore(_T.store,{keyPath:_T.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(hT.store).$t(function(t,n){e+=sI(n)}).next(function(){var n=new fT(e);return t.store(fT.store).put(fT.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(sT.store),r=t.store(aT.store);return n.Nt().next(function(n){return ET.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(aT.userMutationsIndex,i).next(function(r){return ET.forEach(r,function(r){jy(r.userId===n.userId);var i=WT(e.R,r);return oI(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(pT.store),n=t.store(hT.store);return t.store(gT.store).get(gT.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Jy(n),s=function(t){return[0,tT(t)]}(o);r.push(e.get(s).next(function(n){return n?ET.resolve():function(n){return e.put(new pT(0,tT(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return ET.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(vT.store,{keyPath:vT.keyPath});var n=e.store(vT.store),r=new tI,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:tT(i)})}};return e.store(hT.store).$t({kt:!0},function(t,e){var n=new Jy(t);return i(n.popLast())}).next(function(){return e.store(uT.store).$t({kt:!0},function(t,e){var n=rT(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(dT.store);return n.$t(function(t,r){var i=GT(r),o=$T(e.R,i);return n.put(o)})},t}();function RI(t){t.createObjectStore(pT.store,{keyPath:pT.keyPath}).createIndex(pT.documentTargetsIndex,pT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dT.store,{keyPath:dT.keyPath}).createIndex(dT.queryTargetsIndexName,dT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gT.store)}var OI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DI=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Py(Ny.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TI(this,i),this.Le=n+"main",this.R=new jT(u),this.Be=new ST(this.Le,11,new PI(this.R)),this.qe=new dI(this.referenceDelegate,this.R),this.Ut=new eI,this.Ue=function(t,e){return new SI(t,e)}(this.R,this.Ut),this.Qe=new YT,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&My("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Py(Ny.FAILED_PRECONDITION,OI);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new xy(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Ay.__awaiter)(e,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Ay.__awaiter)(e,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return LI(e).put(new mT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(xT(e))return Dy("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Dy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return MI(t).get(oT.key).next(function(t){return ET.resolve(e.tn(t))})},t.prototype.en=function(t){return LI(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=MT(t,mT.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return ET.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ET.resolve(!0):MI(t).get(oT.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Py(Ny.FAILED_PRECONDITION,OI);return!1}}return!(!e.networkEnabled||!e.inForeground)||LI(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Dy("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t=this;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[oT.store,mT.store],function(e){var n=new DT(e,xy.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return LI(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return aI.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Dy("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",bT,function(o){return r=new DT(o,i.Ne?i.Ne.next():xy.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw My("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Py(Ny.FAILED_PRECONDITION,wT);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return MI(t).get(oT.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Py(Ny.FAILED_PRECONDITION,OI)})},t.prototype.Ze=function(t){var e=new oT(this.clientId,this.allowTabSynchronization,Date.now());return MI(t).put(oT.key,e)},t.yt=function(){return ST.yt()},t.prototype.Xe=function(t){var e=this,n=MI(t);return n.get(oT.key).next(function(t){return e.tn(t)?(Dy("IndexedDbPersistence","Releasing primary lease."),n.delete(oT.key)):ET.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(My("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Dy("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return My("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){My("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function MI(t){return MT(t,oT.store)}function LI(t){return MT(t,mT.store)}function FI(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var UI=function(t,e){this.progress=t,this.wn=e},jI=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return d_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ib(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new d_(e)).next(function(t){var e=ow();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ow();return this.Ut.getCollectionParents(t,i).next(function(s){return ET.forEach(s,function(s){var a=function(t,e){return new X_(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=N_.newInvalidDocument(c),r=r.insert(c,l)),Mb(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){hb(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=cw(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Vb&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),VI=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=cw(),i=cw(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qI=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Gy.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(tb(e)||eb(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Oy()<=_p.LogLevel.DEBUG&&Dy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lb(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new tw(fb(t));return e.forEach(function(e,r){hb(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Oy()<=_p.LogLevel.DEBUG&&Dy("QueryEngine","Using full collection scan to execute query:",lb(e)),this.Sn.getDocumentsMatchingQuery(t,e,Gy.min())},t}(),BI=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Xb(Hy),this.kn=new EI(function(t){return O_(t)},D_),this.$n=Gy.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new jI(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function HI(t,e,n,r){return new BI(t,e,n,r)}function KI(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return n=Vy(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new jI(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=cw(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function zI(t,e){var n=Vy(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ET.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);jy(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function WI(t){var e=Vy(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function GI(t,e){var n=Vy(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return jy(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=rw();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push($I(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Gy.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return ET.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function $I(t,e,n,r,i){var o=cw();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=rw();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Gy.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Dy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function QI(t,e){var n=Vy(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function YI(t,e){var n=Vy(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?ET.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new UT(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function XI(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:r=Vy(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!xT(s=a.sent()))throw s;return Dy("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function JI(t,e,n){var r=Vy(t),i=Gy.min(),o=cw();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Vy(t),i=r.kn.get(n);return void 0!==i?ET.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,sb(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Gy.min(),n?o:cw())}).next(function(t){return{documents:t,Bn:o}})})}function ZI(t,e){var n=Vy(t),r=Vy(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function tE(t){var e=Vy(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Vy(t),i=rw(),o=BT(n),s=xI(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:hT.readTimeIndex,range:a},function(t,e){var n=VT(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:HT(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function eE(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){return[2,(e=Vy(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=xI(t),n=Gy.min();return e.$t({index:hT.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=HT(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function nE(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Ay.__generator)(this,function(p){switch(p.label){case 0:for(i=Vy(t),o=cw(),s=rw(),a=aw(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,YI(i,function(t){return sb(Z_(Jy.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return $I(t,f,s,Gy.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function rE(t,e,n){return void 0===n&&(n=cw()),(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return[4,YI(t,sb(QT(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Vy(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=kw(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(n_.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var iE=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ET.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:kw(n.createTime)}),ET.resolve()},t.prototype.getNamedQuery=function(t,e){return ET.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:QT(t.bundledQuery),readTime:kw(t.readTime)}}(e)),ET.resolve()},t}(),oE=function(){function t(){this.Wn=new tw(sE.Gn),this.zn=new tw(sE.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new sE(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new sE(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new d_(new Jy([])),r=new sE(n,t),i=new sE(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new d_(new Jy([])),n=new sE(e,t),r=new sE(e,t+1),i=cw();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new sE(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),sE=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return d_.comparator(t.key,e.key)||Hy(t.ns,e.ns)},t.Hn=function(t,e){return Hy(t.ns,e.ns)||d_.comparator(t.key,e.key)},t}(),aE=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new tw(sE.Gn)}return t.prototype.checkEmpty=function(t){return ET.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new LT(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new sE(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ET.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ET.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return ET.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ET.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ET.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new sE(e,0),i=new sE(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),ET.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new tw(Hy);return e.forEach(function(t){var e=new sE(t,0),i=new sE(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),ET.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;d_.isDocumentKey(i)||(i=i.child(""));var o=new sE(new d_(i),0),s=new tw(Hy);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),ET.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;jy(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ET.forEach(e.mutations,function(i){var o=new sE(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new sE(e,0),r=this.rs.firstAfterOrEqual(n);return ET.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return ET.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),uE=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Xb(d_.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ET.resolve(n?n.document.clone():N_.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=rw();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():N_.newInvalidDocument(t))}),ET.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=rw(),i=new d_(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||hb(e,u)&&(r=r.insert(u.key,u.clone()))}return ET.resolve(r)},t.prototype.fs=function(t,e){return ET.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new cE(this)},t.prototype.getSize=function(t){return ET.resolve(this.size)},t}(),cE=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Ay.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),ET.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(CI),lE=function(){function t(t){this.persistence=t,this.ds=new EI(function(t){return O_(t)},D_),this.lastRemoteSnapshotVersion=Gy.min(),this.highestTargetId=0,this.ws=0,this._s=new oE,this.targetCount=0,this.ys=fI.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),ET.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ET.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ET.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ET.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ET.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new fI(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ET.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ET.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ET.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),ET.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return ET.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ET.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ET.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),ET.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ET.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ET.resolve(n)},t.prototype.containsKey=function(t,e){return ET.resolve(this._s.containsKey(e))},t}(),hE=function(){function t(t,e){var n=this;this.gs={},this.Ne=new xy(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new lE(this),this.Ut=new ZT,this.Ue=function(t,e){return new uE(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new jT(e),this.Qe=new iE(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new aE(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Dy("MemoryPersistence","Starting transaction:",t);var i=new fE(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return ET.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),fE=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Ay.__extends)(e,t),e}(TT),dE=function(){function t(t){this.persistence=t,this.As=new oE,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Uy()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ET.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ET.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ET.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ET.forEach(this.vs,function(r){var i=d_.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ET.or([function(){return ET.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),pE=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function gE(t,e){return"firestore_clients_"+t+"_"+e}function vE(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function mE(t,e){return"firestore_targets_"+t+"_"+e}pE.UNAUTHENTICATED=new pE(null),pE.GOOGLE_CREDENTIALS=new pE("google-credentials-uid"),pE.FIRST_PARTY=new pE("first-party-uid");var yE=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Py(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(My("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_E=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Py(i.error.code,i.error.message)),o?new t(e,i.state,r):(My("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bE=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=hw(),s=0;i&&s<r.activeTargetIds.length;++s)i=f_(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(My("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wE=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(My("SharedClientState","Failed to parse online state: "+e),null)},t}(),TE=function(){function t(){this.activeTargetIds=hw()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),IE=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Xb(Hy),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=gE(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new TE),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Ay.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(gE(this.persistenceKey,r)))&&(o=bE.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(mE(this.persistenceKey,t));if(n){var r=_E.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(mE(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Dy("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Dy("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Dy("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Dy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void My("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Ay.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=xy.o;if(null!=t)try{var n=JSON.parse(t);jy("number"==typeof n),e=n}catch(t){My("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==xy.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new yE(this.currentUser,t,e,n),i=vE(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=vE(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=mE(this.persistenceKey,t),i=new _E(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return bE.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return yE.Vs(new pE(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return _E.Vs(r,e)},t.prototype.js=function(t){return wE.Vs(t)},t.prototype.ii=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Dy("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=hw();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),EE=function(){function t(){this.li=new TE,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new TE,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),CE=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),SE=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Dy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Dy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},AE=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),xE=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Ay.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new ky;s.listenOnce(Iy.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ty.NO_ERROR:var e=s.getResponseJson();Dy("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ty.TIMEOUT:Dy("Connection",'RPC "'+t+'" timed out'),o(new Py(Ny.DEADLINE_EXCEEDED,"Request time out"));break;case Ty.HTTP_ERROR:var n=s.getStatus();if(Dy("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ny).indexOf(e)>=0?e:Ny.UNKNOWN}(r.status);o(new Py(a,r.message))}else o(new Py(Ny.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Py(Ny.UNAVAILABLE,"Connection failed."));break;default:Uy()}}finally{Dy("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new hy,i=pv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Cy({})),this.Fi(o.initMessageHeaders,e),(0,yp.isMobileCordova)()||(0,yp.isReactNative)()||(0,yp.isElectron)()||(0,yp.isIE)()||(0,yp.isUWP)()||(0,yp.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Dy("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new AE({Ei:function(t){c?Dy("Connection","Not sending because WebChannel is closed:",t):(u||(Dy("Connection","Opening WebChannel transport."),a.open(),u=!0),Dy("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Sy.EventType.OPEN,function(){c||Dy("Connection","WebChannel transport opened.")}),h(a,Sy.EventType.CLOSE,function(){c||(c=!0,Dy("Connection","WebChannel transport closed"),l.Vi())}),h(a,Sy.EventType.ERROR,function(t){c||(c=!0,Ly("Connection","WebChannel transport errored:",t),l.Vi(new Py(Ny.UNAVAILABLE,"The operation could not be completed")))}),h(a,Sy.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];jy(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Dy("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Kb[t];if(void 0!==e)return Yb(e)}(i),s=r.message;void 0===o&&(o=Ny.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Py(o,s)),a.close()}else Dy("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ey.STAT_EVENT,function(t){10===t.stat?Dy("Connection","Detected buffering proxy"):11===t.stat&&Dy("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Dy("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Dy("RestConnection","Received: ",t),t},function(e){throw Ly("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+kE[t]},t}());function NE(){return"undefined"!=typeof window?window:null}function PE(){return"undefined"!=typeof document?document:null}function RE(t){return new Iw(t,!0)}var OE=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Dy("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),DE=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new OE(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ny.RESOURCE_EXHAUSTED?(My(e.toString()),My("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ny.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Py(Ny.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Ay.__awaiter)(t,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Dy("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Dy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ME=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Ay.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Uy()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(jy(void 0===e||"string"==typeof e),n_.fromBase64String(e||"")):(jy(void 0===e||e instanceof Uint8Array),n_.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ny.UNKNOWN:Yb(t.code);return new Py(e,t.message||"")}(a);n=new vw(r,i,o,s||null)}else if("documentChange"in e){i=Pw(t,(r=e.documentChange).document.name),o=kw(r.document.updateTime);var a=new A_({mapValue:{fields:r.document.fields}}),u=(s=N_.newFoundDocument(i,o,a),r.targetIds||[]);n=new pw(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Pw(t,(r=e.documentDelete).document),o=r.readTime?kw(r.readTime):Gy.min(),a=N_.newNoDocument(i,o),n=new pw([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Pw(t,(r=e.documentRemove).document),n=new pw([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Uy();var c=e.filter;i=new $b(r=c.count||0),n=new gw(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Gy.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gy.min():e.readTime?kw(e.readTime):Gy.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Dw(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=M_(r)?{documents:Vw(t,r)}:{query:qw(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Cw(t,e.resumeToken):e.snapshotVersion.compareTo(Gy.min())>0&&(n.readTime=Ew(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Uy()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Dw(this.R),e.removeTarget=t,this.cr(e)},e}(DE),LE=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Ay.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(jy(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(jy(void 0!==e),t.map(function(t){return function(t,e){var n=kw(t.updateTime?t.updateTime:e);return n.isEqual(Gy.min())&&(n=kw(e)),new Nb(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=kw(t.commitTime);return this.listener.Tr(n,e)}return jy(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Dw(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Uw(e.R,t)})};this.cr(n)},e}(DE),FE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Ay.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new Py(Ny.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ny.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Py(Ny.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ny.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Py(Ny.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),UE=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(My(e),this.Vr=!1):Dy("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),jE=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Ay.__awaiter)(o,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return $E(this)?(Dy("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return(e=Vy(t)).Or.add(4),[4,qE(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,VE(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new UE(n,r)};function VE(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:if(!$E(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qE(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function BE(t,e){var n=Vy(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),GE(n)?WE(n):cC(n).er()&&KE(n,e))}function HE(t,e){var n=Vy(t),r=cC(n);n.$r.delete(e),r.er()&&zE(n,e),0===n.$r.size&&(r.er()?r.ir():$E(n)&&n.Br.set("Unknown"))}function KE(t,e){t.qr.U(e.targetId),cC(t).mr(e)}function zE(t,e){t.qr.U(e),cC(t).yr(e)}function WE(t){t.qr=new yw({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),cC(t).start(),t.Br.Sr()}function GE(t){return $E(t)&&!cC(t).tr()&&t.$r.size>0}function $E(t){return 0===Vy(t).Or.size}function QE(t){t.qr=void 0}function YE(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return t.$r.forEach(function(e,n){KE(t,e)}),[2]})})}function XE(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){return QE(t),GE(t)?(t.Br.Nr(e),WE(t)):t.Br.set("Unknown"),[2]})})}function JE(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof vw&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Dy("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ZE(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof pw?t.qr.X(e):e instanceof gw?t.qr.rt(e):t.qr.et(e),n.isEqual(Gy.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,WI(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(n_.EMPTY_BYTE_STRING,n.snapshotVersion)),zE(t,e);var r=new UT(n.target,e,1,n.sequenceNumber);KE(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Dy("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ZE(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ZE(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:if(!xT(e))throw e;return t.Or.add(1),[4,qE(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return WI(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Ay.__awaiter)(r,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return Dy("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,VE(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function tC(t,e){return e().catch(function(n){return ZE(t,n,e)})}function eC(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:e=Vy(t),n=lC(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return $E(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,QI(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=lC(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ZE(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return nC(e)&&rC(e),[2]}})})}function nC(t){return $E(t)&&!lC(t).tr()&&t.kr.length>0}function rC(t){lC(t).start()}function iC(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return lC(t).Ar(),[2]})})}function oC(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){for(e=lC(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function sC(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=FT.from(r,e,n),[4,tC(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,eC(t)];case 2:return o.sent(),[2]}})})}function aC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e&&lC(t).pr?[4,function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return Qb(r=e.code)&&r!==Ny.ABORTED?(n=t.kr.shift(),lC(t).sr(),[4,tC(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,eC(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return nC(t)&&rC(t),[2]}})})}function uC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return n=Vy(t),e?(n.Or.delete(2),[4,VE(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,qE(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function cC(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Vy(t);return r.br(),new ME(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:YE.bind(null,t),Ri:XE.bind(null,t),_r:JE.bind(null,t)}),t.Mr.push(function(n){return(0,Ay.__awaiter)(e,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),GE(t)?WE(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),QE(t),e.label=3;case 3:return[2]}})})})),t.Ur}function lC(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Vy(t);return r.br(),new LE(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:iC.bind(null,t),Ri:aC.bind(null,t),Ir:oC.bind(null,t),Tr:sC.bind(null,t)}),t.Mr.push(function(n){return(0,Ay.__awaiter)(e,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,eC(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Dy("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var hC=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new IT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Py(Ny.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fC(t,e){if(My("AsyncQueue",e+": "+t),xT(t))return new Py(Ny.UNAVAILABLE,e+": "+t);throw t}var dC=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||d_.comparator(e.key,n.key)}:function(t,e){return d_.comparator(t.key,e.key)},this.keyedMap=ow(),this.sortedSet=new Xb(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),pC=function(){function t(){this.Kr=new Xb(d_.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Uy():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),gC=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,dC.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ub(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),vC=function(){this.Wr=void 0,this.listeners=[]},mC=function(){this.queries=new EI(function(t){return cb(t)},ub),this.onlineState="Unknown",this.Gr=new Set};function yC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:if(n=Vy(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new vC),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=fC(a,"Initialization of query '"+lb(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&TC(n),[2]}})})}function _C(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){return n=Vy(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function bC(t,e){for(var n=Vy(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&TC(n)}function wC(t,e,n){var r=Vy(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function TC(t){t.Gr.forEach(function(t){t.next()})}var IC=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=gC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),EC=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),CC=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Pw(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Fw(this.R,t.document,!1):N_.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return kw(t)},t}(),SC=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=kC(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new CC(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||cw()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return[4,nE(this.localStore,new CC(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,rE(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new UI(Object.assign({},this.progress),t))]}})})},t}();function kC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var AC=function(t){this.key=t},xC=function(t){this.key=t},NC=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=cw(),this.mutatedKeys=cw(),this.lo=fb(t),this.fo=new dC(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new pC,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=tb(this.query)&&i.size===this.query.limit?i.last():null,c=eb(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=hb(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),tb(this.query)||eb(this.query))for(;s.size>this.query.limit;){var l=tb(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Uy()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new gC(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new pC,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=cw(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new xC(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new AC(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=cw();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return gC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),PC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},RC=function(t){this.key=t,this.bo=!1},OC=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new EI(function(t){return cb(t)},ub),this.Vo=new Map,this.So=new Set,this.Do=new Xb(d_.comparator),this.Co=new Map,this.No=new oE,this.xo={},this.Fo=new Map,this.ko=fI.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function DC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return n=cS(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,YI(n.localStore,sb(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,MC(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&BE(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function MC(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Ay.__generator)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,JI(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,($C(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,JI(t.localStore,e,!0)];case 1:return i=l.sent(),o=new NC(e,i.Bn),s=o._o(i.documents),a=dw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),$C(t,n,u.To),c=new PC(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function LC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return n=Vy(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ub(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,XI(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),HE(n.remoteStore,r.targetId),WC(n,r.targetId)}).catch(mI)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return WC(n,r.targetId),[4,XI(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function FC(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:r=lS(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Vy(t),i=Wy.now(),o=e.reduce(function(t,e){return t.add(e.key)},cw());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Lb(c,n.get(c.key));null!=l&&s.push(new Vb(c.key,l,x_(l.value.mapValue),Pb.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Xb(Hy)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,XC(r,i.changes)];case 3:return a.sent(),[4,eC(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=fC(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function UC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:n=Vy(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,GI(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(jy(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?jy(r.bo):t.removedDocuments.size>0&&(jy(r.bo),r.bo=!1))}),[4,XC(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mI(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function jC(t,e,n){var r=Vy(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Vy(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&TC(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function VC(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:return(r=Vy(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Xb(d_.comparator)).insert(o,N_.newNoDocument(o,Gy.min())),a=cw().add(o),u=new fw(Gy.min(),new Map,new tw(Hy),s,a),[4,UC(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),YC(r),[3,4];case 2:return[4,XI(r.localStore,e,!1).then(function(){return WC(r,e,n)}).catch(mI)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function qC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:n=Vy(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,zI(n.localStore,e)];case 2:return i=o.sent(),zC(n,r,null),KC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,XC(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function BC(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:r=Vy(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Vy(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return jy(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),zC(r,e,n),KC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,XC(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function HC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:$E((n=Vy(t)).remoteStore)||Dy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Vy(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=fC(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function KC(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function zC(t,e,n){var r=Vy(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function WC(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||GC(t,e)})}function GC(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(HE(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),YC(t))}function $C(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof AC?(t.No.addReference(o.key,e),QC(t,o)):o instanceof xC?(Dy("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||GC(t,o.key)):Uy()}}function QC(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Dy("SyncEngine","New document in limbo: "+n),t.So.add(r),YC(t))}function YC(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new d_(Jy.fromString(e)),r=t.ko.next();t.Co.set(r,new RC(n)),t.Do=t.Do.insert(n,r),BE(t.remoteStore,new UT(sb(Z_(n.path)),r,2,xy.o))}}function XC(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return r=Vy(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=VI.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Ay.__generator)(this,function(l){switch(l.label){case 0:n=Vy(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return ET.forEach(e,function(e){return ET.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return ET.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!xT(r=l.sent()))throw r;return Dy("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function JC(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return(n=Vy(t)).currentUser.isEqual(e)?[3,3]:(Dy("SyncEngine","User change. New user:",e.toKey()),[4,KI(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Py(Ny.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,XC(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ZC(t,e){var n=Vy(t),r=n.Co.get(e);if(r&&r.bo)return cw().add(r.key);var i=cw(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function tS(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return[4,JI((n=Vy(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&$C(n,e.targetId,i.To),i)]}})})}function eS(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){return[2,tE((e=Vy(t)).localStore).then(function(t){return XC(e,t)})]})})}function nS(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Vy(t),r=Vy(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):ET.resolve(null)})})}((i=Vy(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,eC(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zC(i,e,r||null),KC(i,e),function(t,e){Vy(Vy(t)._n).Gt(e)}(i.localStore,e)):Uy(),s.label=4;case 4:return[4,XC(i,o)];case 5:return s.sent(),[3,7];case 6:Dy("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function rS(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:return cS(n=Vy(t)),lS(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,iS(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,uC(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)BE(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return WC(n,e),XI(n.localStore,e,!0)}),HE(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,iS(n,a)];case 5:return c.sent(),function(t){var e=Vy(t);e.Co.forEach(function(t,n){HE(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Xb(d_.comparator)}(n),n.$o=!1,[4,uC(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function iS(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Ay.__generator)(this,function(g){switch(g.label){case 0:n=Vy(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,YI(n.localStore,sb(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,tS(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ZI(n.localStore,a)];case 8:return p=g.sent(),[4,YI(n.localStore,p)];case 9:return u=g.sent(),[4,MC(n,oS(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function oS(t){return J_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sS(t){var e=Vy(t);return Vy(Vy(e.localStore).persistence).fn()}function aS(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return(i=Vy(t)).$o?(Dy("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,tE(i.localStore)];case 3:return o=a.sent(),s=fw.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,XC(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,XI(i.localStore,e,!0)];case 6:return a.sent(),WC(i,e,r),[3,8];case 7:Uy(),a.label=8;case 8:return[2]}})})}function uS(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Ay.__generator)(this,function(f){switch(f.label){case 0:if(!(r=cS(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Dy("SyncEngine","Adding an already active target "+s),[3,5]):[4,ZI(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,YI(r.localStore,a)];case 3:return u=f.sent(),[4,MC(r,oS(a),u.targetId,!1)];case 4:f.sent(),BE(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,XI(r.localStore,t,!1).then(function(){HE(r.remoteStore,t),WC(r,t)}).catch(mI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function cS(t){var e=Vy(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VC.bind(null,e),e.vo._r=bC.bind(null,e.eventManager),e.vo.Mo=wC.bind(null,e.eventManager),e}function lS(t){var e=Vy(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BC.bind(null,e),e}function hS(t,e,n){var r=Vy(t);(function(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Vy(t),r=kw(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.Qe.getBundleMetadata(t,e.id)}).then(function(t){return!!t&&t.createTime.compareTo(r)>=0})}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(kC(r)),i=new SC(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,XC(t,a.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Vy(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.Qe.saveBundleMetadata(t,e)})}(t.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return Ly("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var fS=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return this.R=RE(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return HI(this.persistence,new qI,t.initialUser,this.R)},t.prototype.qo=function(t){return new hE(dE.bs,this.R)},t.prototype.Bo=function(t){return new EE},t.prototype.terminate=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),dS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Ay.__extends)(e,t),e.prototype.initialize=function(e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,eE(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,lS(this.Ko.syncEngine)];case 4:return n.sent(),[4,eC(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return HI(this.persistence,new qI,t.initialUser,this.R)},e.prototype.Uo=function(t){return new bI(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=FI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?iI.withCacheSize(this.cacheSizeBytes):iI.DEFAULT;return new DI(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,NE(),PE(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new EE},e}(fS),pS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Ay.__extends)(e,t),e.prototype.initialize=function(e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof IE?(this.sharedClientState.syncEngine={ui:nS.bind(null,n),ai:aS.bind(null,n),hi:uS.bind(null,n),fn:sS.bind(null,n),ci:eS.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Ay.__awaiter)(r,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return[4,rS(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=NE();if(!IE.yt(e))throw new Py(Ny.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=FI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new IE(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(dS),gS=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return jC(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=JC.bind(null,this.syncEngine),[4,uC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new mC},t.prototype.createDatastore=function(t){var e=RE(t.databaseInfo.databaseId),n=new xE(t.databaseInfo);return function(t,e,n){return new FE(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return jC(s.syncEngine,t,0)},o=SE.yt()?new SE:new CE,new jE(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new OC(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=Vy(t),Dy("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,qE(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();function vS(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r;return(0,Ay.__generator)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var mS=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),yS=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new IT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new EC(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),_S=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Py(Ny.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return n=Vy(t),r=Dw(n.R)+"/documents",i={documents:e.map(function(t){return Nw(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){jy(!!e.found);var n=Pw(t,e.found.name),r=kw(e.found.updateTime),i=new A_({mapValue:{fields:e.found.fields}});return N_.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){jy(!!e.missing),jy(!!e.readTime);var n=Pw(t,e.missing),r=kw(e.readTime);return N_.newNoDocument(n,r)}(t,e):Uy()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());jy(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Wb(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=d_.fromPath(n);e.mutations.push(new Gb(r,e.precondition(r)))}),[4,function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return n=Vy(t),r=Dw(n.R)+"/documents",i={writes:e.map(function(t){return Uw(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Uy();e=Gy.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Py(Ny.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Pb.updateTime(e):Pb.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Gy.min()))throw new Py(Ny.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pb.updateTime(e)}return Pb.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),bS=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new OE(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Ay.__awaiter)(t,void 0,void 0,function(){var t,e,n=this;return(0,Ay.__generator)(this,function(r){return t=new _S(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!l_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Qb(e)}return!1},t}(),wS=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=pE.UNAUTHENTICATED,this.clientId=By.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Ay.__awaiter)(r,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return Dy("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Py(Ny.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new IT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ay.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=fC(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function TS(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Dy("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Ay.__awaiter)(i,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,KI(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function IS(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ES(t)];case 1:return n=i.sent(),Dy("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return(n=Vy(t)).asyncQueue.verifyOperationInProgress(),Dy("RemoteStore","RemoteStore received new credentials"),r=$E(n),n.Or.add(3),[4,qE(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,VE(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function ES(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Dy("FirestoreClient","Using default OfflineComponentProvider"),[4,TS(t,new fS)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function CS(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Dy("FirestoreClient","Using default OnlineComponentProvider"),[4,IS(t,new gS)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function SS(t){return ES(t).then(function(t){return t.persistence})}function kS(t){return ES(t).then(function(t){return t.localStore})}function AS(t){return CS(t).then(function(t){return t.remoteStore})}function xS(t){return CS(t).then(function(t){return t.syncEngine})}function NS(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,CS(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=DC.bind(null,e.syncEngine),n.onUnlisten=LC.bind(null,e.syncEngine),n)]}})})}function PS(t,e,n){var r=this;void 0===n&&(n={});var i=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mS({next:function(o){e.enqueueAndForget(function(){return _C(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Py(Ny.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Py(Ny.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new IC(Z_(n.path),o,{includeMetadataChanges:!0,so:!0});return yC(t,s)},[4,NS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function RS(t,e,n){var r=this;void 0===n&&(n={});var i=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mS({next:function(n){e.enqueueAndForget(function(){return _C(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Py(Ny.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new IC(n,o,{includeMetadataChanges:!0,so:!0});return yC(t,s)},[4,NS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var OS=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},DS=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),MS=new Map,LS=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},FS=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(pE.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),US=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jS=function(){function t(t){var e=this;this.currentUser=pE.UNAUTHENTICATED,this.oc=new IT,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Dy("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Dy("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Dy("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(jy("string"==typeof n.accessToken),new LS(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return jy(null===t||"string"==typeof t),new pE(t)},t}(),VS=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=pE.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),qS=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new VS(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(pE.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function BS(t,e,n){if(!n)throw new Py(Ny.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function HS(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Py(Ny.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function KS(t,e,n,r){if(!0===e&&!0===r)throw new Py(Ny.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function zS(t){if(!d_.isDocumentKey(t))throw new Py(Ny.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function WS(t){if(d_.isDocumentKey(t))throw new Py(Ny.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function GS(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Uy()}function $S(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Py(Ny.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=GS(t);throw new Py(Ny.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function QS(t,e){if(e<=0)throw new Py(Ny.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var YS=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Py(Ny.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Py(Ny.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,KS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),XS=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YS({}),this._settingsFrozen=!1,t instanceof DS?(this._databaseId=t,this._credentials=new FS):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Py(Ny.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DS(t.options.projectId)}(t),this._credentials=new jS(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Py(Ny.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Py(Ny.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YS(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new FS;switch(t.type){case"gapi":var e=t.client;return jy(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new qS(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Py(Ny.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=MS.get(this))&&(Dy("ComponentProvider","Removing Datastore"),MS.delete(this),t.terminate()),Promise.resolve();var t},t}(),JS=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tk(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ZS=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),tk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Z_(r))||this)._path=r,i.type="collection",i}return(0,Ay.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new JS(this.firestore,null,new d_(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ZS);function ek(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,yp.getModularInstance)(t),BS("collection","path",e),t instanceof XS)return WS(n=Jy.fromString.apply(Jy,(0,Ay.__spreadArray)([e],r))),new tk(t,null,n);if(!(t instanceof JS||t instanceof tk))throw new Py(Ny.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return WS(n=Jy.fromString.apply(Jy,(0,Ay.__spreadArray)([t.path],r)).child(Jy.fromString(e))),new tk(t.firestore,null,n)}function nk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,yp.getModularInstance)(t),1===arguments.length&&(e=By.u()),BS("doc","path",e),t instanceof XS)return zS(n=Jy.fromString.apply(Jy,(0,Ay.__spreadArray)([e],r))),new JS(t,null,new d_(n));if(!(t instanceof JS||t instanceof tk))throw new Py(Ny.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zS(n=t._path.child(Jy.fromString.apply(Jy,(0,Ay.__spreadArray)([e],r)))),new JS(t.firestore,t instanceof tk?t.converter:null,new d_(n))}function rk(t,e){return t=(0,yp.getModularInstance)(t),e=(0,yp.getModularInstance)(e),(t instanceof JS||t instanceof tk)&&(e instanceof JS||e instanceof tk)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ik(t,e){return t=(0,yp.getModularInstance)(t),e=(0,yp.getModularInstance)(e),t instanceof ZS&&e instanceof ZS&&t.firestore===e.firestore&&ub(t._query,e._query)&&t.converter===e.converter}var ok=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new OE(this,"async_queue_retry"),this.Tc=function(){var e=PE();e&&Dy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=PE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=PE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e=this;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!xT(t=n.sent()))throw t;return Dy("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,My("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=hC.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Uy()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function sk(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ak=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new IT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),uk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ok,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Ay.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||lk(this),this._firestoreClient.terminate()},e}(XS);function ck(t){return t._firestoreClient||lk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lk(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new OS(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new wS(t._credentials,t._queue,r)}function hk(t,e,n){var r=this,i=new IT;return t.asyncQueue.enqueue(function(){return(0,Ay.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,TS(t,n)];case 1:return o.sent(),[4,IS(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ny.FAILED_PRECONDITION||t.code===Ny.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function fk(t){if(t._initialized||t._terminated)throw new Py(Ny.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dk=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Py(Ny.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new t_(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pk=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(n_.fromBase64String(e))}catch(e){throw new Py(Ny.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(n_.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),gk=function(t){this._methodName=t},vk=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Py(Ny.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Py(Ny.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hy(this._lat,t._lat)||Hy(this._long,t._long)},t}(),mk=/^__.*__$/,yk=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Vb(t,this.data,this.fieldMask,e,this.fieldTransforms):new jb(t,this.data,e,this.fieldTransforms)},t}(),_k=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Vb(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function bk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Uy()}}var wk=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return qk(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(bk(this.Cc)&&mk.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Tk=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||RE(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new wk({Cc:t,methodName:e,Bc:n,path:t_.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ik(t){var e=t._freezeSettings(),n=RE(t._databaseId);return new Tk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ek(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Fk("Data must be an object, but it was:",s,r);var a,u,c=Mk(r,s);if(o.merge)a=new e_(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Uk(e,f[h],n);if(!s.contains(d))throw new Py(Ny.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Bk(l,d)||l.push(d)}a=new e_(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new yk(new A_(c),a,u)}var Ck=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(gk);function Sk(t,e,n){return new wk({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var kk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new xb(t.path,new wb)},e.prototype.isEqual=function(t){return t instanceof e},e}(gk),Ak=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Ay.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Sk(this,t,!0),n=this.Uc.map(function(t){return Dk(t,e)}),r=new Tb(n);return new xb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gk),xk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Ay.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Sk(this,t,!0),n=this.Uc.map(function(t){return Dk(t,e)}),r=new Eb(n);return new xb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(gk),Nk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Ay.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new Sb(t.R,vb(t.R,this.Qc));return new xb(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(gk);function Pk(t,e,n,r){var i=t.qc(1,e,n);Fk("Data must be an object, but it was:",i,r);var o=[],s=A_.empty();Qy(r,function(t,r){var a=Vk(e,t,n);r=(0,yp.getModularInstance)(r);var u=i.$c(a);if(r instanceof Ck)o.push(a);else{var c=Dk(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new e_(o);return new _k(s,a,i.fieldTransforms)}function Rk(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Uk(e,r,n)],u=[i];if(o.length%2!=0)throw new Py(Ny.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Uk(e,o[c])),u.push(o[c+1]);for(var l=[],h=A_.empty(),f=a.length-1;f>=0;--f)if(!Bk(l,a[f])){var d=a[f],p=u[f];p=(0,yp.getModularInstance)(p);var g=s.$c(d);if(p instanceof Ck)l.push(d);else{var v=Dk(p,g);null!=v&&(l.push(d),h.set(d,v))}}var m=new e_(l);return new _k(h,m,s.fieldTransforms)}function Ok(t,e,n,r){return void 0===r&&(r=!1),Dk(n,t.qc(r?4:3,e))}function Dk(t,e){if(Lk(t=(0,yp.getModularInstance)(t)))return Fk("Unsupported field value:",e,t),Mk(t,e);if(t instanceof gk)return function(t,e){if(!bk(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Dk(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,yp.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vb(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wy.fromDate(t);return{timestampValue:Ew(e.R,n)}}if(t instanceof Wy)return n=new Wy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ew(e.R,n)};if(t instanceof vk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pk)return{bytesValue:Cw(e.R,t._byteString)};if(t instanceof JS){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Aw(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+GS(t))}(t,e)}function Mk(t,e){var n={};return Yy(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qy(t,function(t,r){var i=Dk(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Lk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wy||t instanceof vk||t instanceof pk||t instanceof JS||t instanceof gk)}function Fk(t,e,n){if(!Lk(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=GS(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Uk(t,e,n){if((e=(0,yp.getModularInstance)(e))instanceof dk)return e._internalPath;if("string"==typeof e)return Vk(t,e);throw qk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jk=new RegExp("[~\\*/\\[\\]]");function Vk(t,e,n){if(e.search(jk)>=0)throw qk("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dk.bind.apply(dk,(0,Ay.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(Lp){throw qk("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qk(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Py(Ny.INVALID_ARGUMENT,(a+=". ")+t+u)}function Bk(t,e){return t.some(function(t){return t.isEqual(e)})}var Hk=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new JS(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zk("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Kk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Hk);function zk(t,e){return"string"==typeof e?Vk(t,e):e instanceof dk?e._internalPath:e._delegate._internalPath}var Wk=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gk=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Ay.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new $k(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zk("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Hk),$k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Gk),Qk=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Wk(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new $k(n._firestore,n._userDataWriter,r.key,r,new Wk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Py(Ny.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new $k(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new $k(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Wk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Yk(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Yk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Uy()}}function Xk(t,e){return t instanceof Gk&&e instanceof Gk?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qk&&e instanceof Qk&&t._firestore===e._firestore&&ik(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Jk(t){if(eb(t)&&0===t.explicitOrderBy.length)throw new Py(Ny.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Zk=function(){};function tA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var eA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Ay.__extends)(e,t),e.prototype._apply=function(t){var e=Ik(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Py(Ny.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){uA(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(aA(r,t,l[c]));a={arrayValue:{values:u}}}else a=aA(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||uA(s,o),a=Ok(n,"where",s,"in"===o||"not-in"===o);var h=L_.create(i,o,a);return function(t,e){if(e.g()){var n=rb(t);if(null!==n&&!n.isEqual(e.field))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=nb(t);null!==r&&cA(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Py(Ny.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new ZS(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new X_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Zk),nA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return(0,Ay.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new G_(e,n);return function(t,e){if(null===nb(t)){var n=rb(t);null!==n&&cA(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new ZS(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new X_(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Zk),rA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Ay.__extends)(e,t),e.prototype._apply=function(t){return new ZS(t.firestore,t.converter,ab(t._query,this.zc,this.Hc))},e}(Zk),iA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Ay.__extends)(e,t),e.prototype._apply=function(t){var e=sA(t,this.type,this.Jc,this.Yc);return new ZS(t.firestore,t.converter,function(t,e){return new X_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Zk),oA=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Ay.__extends)(e,t),e.prototype._apply=function(t){var e=sA(t,this.type,this.Jc,this.Yc);return new ZS(t.firestore,t.converter,function(t,e){return new X_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Zk);function sA(t,e,n,r){if(n[0]=(0,yp.getModularInstance)(n[0]),n[0]instanceof Hk)return function(t,e,n,r,i){if(!r)throw new Py(Ny.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ob(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(w_(e,r.key));else{var c=r.data.field(u.field);if(a_(c))throw new Py(Ny.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new z_(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ik(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Py(Ny.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ib(t)&&-1!==c.indexOf("/"))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Jy.fromString(c));if(!d_.isDocumentKey(l))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new d_(l);a.push(w_(e,h))}else{var f=Ok(n,r,c);a.push(f)}}return new z_(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function aA(t,e,n){if("string"==typeof(n=(0,yp.getModularInstance)(n))){if(""===n)throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ib(e)&&-1!==n.indexOf("/"))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Jy.fromString(n));if(!d_.isDocumentKey(r))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return w_(t,new d_(r))}if(n instanceof JS)return w_(t,n._key);throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+GS(n)+".")}function uA(t,e){if(!Array.isArray(t)||0===t.length)throw new Py(Ny.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Py(Ny.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function cA(t,e,n){if(!n.isEqual(e))throw new Py(Ny.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var lA=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),p_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return o_(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(s_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Uy()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Qy(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new vk(o_(t.latitude),o_(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=u_(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(c_(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=i_(t);return new Wy(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Jy.fromString(t);jy(Zw(n));var r=new DS(n.get(1),n.get(3)),i=new d_(n.popFirst(5));return r.isEqual(e)||My("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function hA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ay.__extends)(e,t),e.prototype.convertBytes=function(t){return new pk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new JS(this.firestore,null,e)},e}(lA),dA=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ik(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pA(t,this._firestore),i=hA(r.converter,e,n),o=Ek(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Pb.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=pA(t,this._firestore);return o="string"==typeof(e=(0,yp.getModularInstance)(e))||e instanceof dk?Rk(this._dataReader,"WriteBatch.update",s._key,e,n,r):Pk(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Pb.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pA(t,this._firestore);return this._mutations=this._mutations.concat(new Wb(e._key,Pb.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Py(Ny.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pA(t,e){if((t=(0,yp.getModularInstance)(t)).firestore!==e)throw new Py(Ny.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var gA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ay.__extends)(e,t),e.prototype.convertBytes=function(t){return new pk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new JS(this.firestore,null,e)},e}(lA);function vA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=$S(t,JS);var o=$S(t.firestore,uk),s=Ik(o);return yA(o,[("string"==typeof(e=(0,yp.getModularInstance)(e))||e instanceof dk?Rk(s,"updateDoc",t._key,e,n,r):Pk(s,"updateDoc",t._key,e)).toMutation(t._key,Pb.exists(!0))])}function mA(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,yp.getModularInstance)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sk(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(sk(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof JS)c=$S(t.firestore,uk),l=Z_(t._key.path),u={next:function(e){i[a]&&i[a](_A(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=$S(t,ZS);c=$S(d.firestore,uk),l=d._query;var p=new gA(c);u={next:function(t){i[a]&&i[a](new Qk(c,p,d,t))},error:i[a+1],complete:i[a+2]},Jk(t._query)}return function(t,e,n,r){var i=this,o=new mS(r),s=new IC(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(i,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=yC,[4,NS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(i,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=_C,[4,NS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ck(c),l,h,u)}function yA(t,e){return function(t,e){var n=this,r=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return n=FC,[4,xS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ck(t),e)}function _A(t,e,n){var r=n.docs.get(e._key),i=new gA(t);return new Gk(t,i,e._key,r,new Wk(n.hasPendingWrites,n.fromCache),e.converter)}var bA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Ay.__extends)(e,t),e.prototype.get=function(e){var n=this,r=pA(e,this._firestore),i=new gA(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Gk(n._firestore,i,r._key,t._document,new Wk(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ik(t)}return t.prototype.get=function(t){var e=this,n=pA(t,this._firestore),r=new fA(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Uy();var i=t[0];if(i.isFoundDocument())return new Hk(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Hk(e._firestore,r,n._key,null,n.converter);throw Uy()})},t.prototype.set=function(t,e,n){var r=pA(t,this._firestore),i=hA(r.converter,e,n),o=Ek(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=pA(t,this._firestore);return o="string"==typeof(e=(0,yp.getModularInstance)(e))||e instanceof dk?Rk(this._dataReader,"Transaction.update",s._key,e,n,r):Pk(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=pA(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wA(){if("undefined"==typeof Uint8Array)throw new Py(Ny.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function TA(){if("undefined"==typeof atob)throw new Py(Ny.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var IA=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return TA(),new t(pk.fromBase64String(e))},t.fromUint8Array=function(e){return wA(),new t(pk.fromUint8Array(e))},t.prototype.toBase64=function(){return TA(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wA(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),EA=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fk(t=$S(t,uk));var n=ck(t),r=t._freezeSettings(),i=new gS;return hk(n,i,new dS(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fk(t=$S(t,uk));var e=ck(t),n=t._freezeSettings(),r=new gS;return hk(e,r,new pS(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Py(Ny.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new IT;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return ST.yt()?[4,ST.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(FI(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),CA=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof DS||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ly("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=$S(t,XS))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Ly("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,yp.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Py(Ny.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new US(new LS(o,new pE(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,SS(t)];case 1:return e=r.sent(),[4,AS(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Vy(t);return e.Or.delete(0),VE(e)}(n))]}})})})}(ck($S(this._delegate,uk)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,SS(t)];case 1:return e=r.sent(),[4,AS(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return(e=Vy(t)).Or.add(0),[4,qE(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(ck($S(this._delegate,uk)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&KS("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(e,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return e=HC,[4,xS(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ck($S(this._delegate,uk)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new mS(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Vy(t).Gr.add(e),e.next()},[4,NS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=function(t,e){Vy(t).Gr.delete(e)},[4,NS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ck(t=$S(t,uk)),sk(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Py(Ny.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jA(this,ek(this._delegate,t))}catch(t){throw PA(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new NA(this,nk(this._delegate,t))}catch(t){throw PA(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new LA(this,function(t,e){if(t=$S(t,XS),BS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Py(Ny.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ZS(t,null,function(t){return new X_(Jy.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw PA(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,function(t){return CS(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new bS(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ck(t),function(n){return e(new bA(t,n))})}(this._delegate,function(n){return t(new kA(e,n))})},t.prototype.batch=function(){var t=this;return ck(this._delegate),new AA(new dA(this._delegate,function(e){return yA(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Py(Ny.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Py(Ny.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),SA=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ay.__extends)(e,t),e.prototype.convertBytes=function(t){return new IA(new pk(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return NA.tu(e,this.firestore,null)},e}(lA),kA=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new SA(t)}return t.prototype.get=function(t){var e=this,n=VA(t);return this._delegate.get(n).then(function(t){return new DA(e._firestore,new Gk(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=VA(t);return n?(HS("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=VA(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ay.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=VA(t);return this._delegate.delete(e),this},t}(),AA=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=VA(t);return n?(HS("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=VA(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ay.__spreadArray)([s,e,n],i)),this},t.prototype.delete=function(t){var e=VA(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),xA=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new $k(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new MA(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new SA(e),n),i.set(n,o)),o},t}();xA.nu=new WeakMap;var NA=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SA(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Py(Ny.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new JS(n._delegate,r,new d_(e)))},t.tu=function(e,n,r){return new t(n,new JS(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new jA(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jA(this.firestore,ek(this._delegate,t))}catch(t){throw PA(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,yp.getModularInstance)(t))instanceof JS&&rk(this._delegate,t)},t.prototype.set=function(t,e){e=HS("DocumentReference.set",e);try{return function(t,e,n){t=$S(t,JS);var r=$S(t.firestore,uk),i=hA(t.converter,e,n);return yA(r,[Ek(Ik(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Pb.none())])}(this._delegate,t,e)}catch(t){throw PA(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?vA(this._delegate,t):vA.apply(void 0,(0,Ay.__spreadArray)([this._delegate,t,e],n))}catch(t){throw PA(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return yA($S((t=this._delegate).firestore,uk),[new Wb(t._key,Pb.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=RA(e),i=OA(e,function(e){return new DA(t.firestore,new Gk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return mA(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$S(t,JS);var e=$S(t.firestore,uk),n=ck(e),r=new gA(e);return function(t,e){var n=this,r=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Vy(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Py(Ny.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=fC(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,kS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Gk(e,r,t._key,n,new Wk(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$S(t,JS);var e=$S(t.firestore,uk);return PS(ck(e),t._key,{source:"server"}).then(function(n){return _A(e,t,n)})}(this._delegate):function(t){t=$S(t,JS);var e=$S(t.firestore,uk);return PS(ck(e),t._key).then(function(n){return _A(e,t,n)})}(this._delegate)).then(function(t){return new DA(e.firestore,new Gk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xA.eu(this.firestore,e):null))},t}();function PA(t,e,n){return t.message=t.message.replace(e,n),t}function RA(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sk(r))return r}return{}}function OA(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sk(t[0])?t[0]:sk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var DA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new NA(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Xk(this._delegate,t._delegate)},t}(),MA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ay.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(DA),LA=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new SA(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,tA(this._delegate,function(t,e,n){var r=e,i=zk("where",t);return new eA(i,r,n)}(e,n,r)))}catch(e){throw PA(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,tA(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zk("orderBy",t);return new nA(r,n)}(e,n)))}catch(e){throw PA(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,tA(this._delegate,function(t){return QS("limit",t),new rA("limit",t,"F")}(e)))}catch(e){throw PA(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,tA(this._delegate,function(t){return QS("limitToLast",t),new rA("limitToLast",t,"L")}(e)))}catch(e){throw PA(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iA("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw PA(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iA("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw PA(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw PA(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tA(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw PA(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ik(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$S(t,ZS);var e=$S(t.firestore,uk),n=ck(e),r=new gA(e);return function(t,e){var n=this,r=new IT;return t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,JI(t,e,!0)];case 1:return a=u.sent(),r=new NC(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=fC(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,kS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Qk(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$S(t,ZS);var e=$S(t.firestore,uk),n=ck(e),r=new gA(e);return RS(n,t._query,{source:"server"}).then(function(n){return new Qk(e,r,t,n)})}(this._delegate):function(t){t=$S(t,ZS);var e=$S(t.firestore,uk),n=ck(e),r=new gA(e);return Jk(t._query),RS(n,t._query).then(function(n){return new Qk(e,r,t,n)})}(this._delegate)).then(function(t){return new UA(e.firestore,new Qk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=RA(e),i=OA(e,function(e){return new UA(t.firestore,new Qk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return mA(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?xA.eu(this.firestore,e):null))},t}(),FA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new MA(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),UA=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new LA(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new MA(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new FA(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new MA(n._firestore,r))})},t.prototype.isEqual=function(t){return Xk(this._delegate,t._delegate)},t}(),jA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Ay.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new NA(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new NA(this.firestore,void 0===t?nk(this._delegate):nk(this._delegate,t))}catch(t){throw PA(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=$S(t.firestore,uk),r=nk(t),i=hA(t.converter,e);return yA(n,[Ek(Ik(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Pb.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new NA(e.firestore,t)})},e.prototype.isEqual=function(t){return rk(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?xA.eu(this.firestore,t):null))},e}(LA);function VA(t){return $S(t,JS)}var qA,BA,HA=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dk.bind.apply(dk,(0,Ay.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(t_.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,yp.getModularInstance)(t))instanceof dk&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),KA=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new kk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ck("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ak("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xk("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Nk("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),zA=n(119),WA={Firestore:CA,GeoPoint:vk,Timestamp:Wy,Blob:IA,Transaction:kA,WriteBatch:AA,DocumentReference:NA,DocumentSnapshot:DA,Query:LA,QueryDocumentSnapshot:MA,QuerySnapshot:UA,CollectionReference:jA,FieldPath:HA,FieldValue:KA,setLogLevel:function(t){Ry.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new zA.Component("firestore",function(t){return function(t,e){return new CA(t,new uk(t,e),new EA)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},WA)))})(qA=mp.default),qA.registerVersion("@firebase/firestore","2.3.7"),(BA=CA).prototype.loadBundle=function(t){return function(t,e){var n=ck(t=$S(t,uk)),r=new ak;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new yS(t,e)}(function(t,e){if(t instanceof Uint8Array)return vS(t,e);if(t instanceof ArrayBuffer)return vS(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,RE(e));t.asyncQueue.enqueueAndForget(function(){return(0,Ay.__awaiter)(i,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return e=hS,[4,xS(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t._databaseId,e,r),r}(this._delegate,t)},BA.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue(function(){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=Vy(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Qe.getNamedQuery(t,e)})},[4,kS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(ck(e=$S(e,uk)),n).then(function(t){return t?new ZS(e,null,t.query):null})).then(function(t){return t?new LA(r,t):null})};var GA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$A=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,Ay.__extends)(e,t),e}(Error),QA=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getContext=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function YA(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var XA,JA,ZA,tx=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return YA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?YA(t,function(t){return e.decode(t)}):t},t}(),ex=function(){function t(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new tx,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new QA(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(qA){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},t.prototype.getAppCheckToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype.call=function(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return(0,Ay.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new $A("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([nx(u,this.postJSON(r,i,o)),c,nx(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new $A("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!GA[a])return new $A("internal","internal");r=GA[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(qA){}return"ok"===r?null:new $A(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new $A("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new $A("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function nx(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}XA=mp.default,JA=fetch.bind(self),ZA={Functions:ex},XA.INTERNAL.registerComponent(new zA.Component("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new ex(r,i,s,o,n,JA)},"PUBLIC").setServiceProps(ZA).setMultipleInstances(!0)),mp.default.registerVersion("@firebase/functions","0.6.12");var rx,ix=n(87),ox="w:0.4.29",sx=((rx={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',rx["not-registered"]="Firebase Installation is not registered.",rx["installation-not-found"]="Firebase Installation not found.",rx["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',rx["app-offline"]="Could not process request. Application offline.",rx["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",rx),ax=new yp.ErrorFactory("installations","Installations",sx);function ux(t){return t instanceof yp.FirebaseError&&t.code.includes("request-failed")}function cx(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function lx(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function hx(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,ax.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function fx(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function dx(t,e){var n=e.refreshToken,r=fx(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function px(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function gx(t,e){var n=e.fid;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return e=cx(t),r=fx(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:ox})},[4,px(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:lx(s.authToken)}];case 3:return[4,hx("Create Installation",o)];case 4:throw a.sent()}})})}function vx(t){return new Promise(function(e){setTimeout(e,t)})}var mx=/^[cdef][\w-]{21}$/;function yx(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,Ay.__spreadArray)([],(0,Ay.__read)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return mx.test(e)?e:""}catch(Sk){return""}}function _x(t){return t.appName+"!"+t.appId}var bx=new Map;function wx(t,e){var n=_x(t);Tx(n,e),function(t,e){var n=Ex();n&&n.postMessage({key:t,fid:e}),Cx()}(n,e)}function Tx(t,e){var n,r,i=bx.get(t);if(i)try{for(var o=(0,Ay.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Ix=null;function Ex(){return!Ix&&"BroadcastChannel"in self&&((Ix=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Tx(t.data.key,t.data.fid)}),Ix}function Cx(){0===bx.size&&Ix&&(Ix.close(),Ix=null)}var Sx,kx="firebase-installations-store",Ax=null;function xx(){return Ax||(Ax=(0,ix.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(kx)}})),Ax}function Nx(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return n=_x(t),[4,xx()];case 1:return r=a.sent(),i=r.transaction(kx,"readwrite"),[4,(o=i.objectStore(kx)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||wx(t,e.fid),[2,e]}})})}function Px(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return e=_x(t),[4,xx()];case 1:return n=i.sent(),[4,(r=n.transaction(kx,"readwrite")).objectStore(kx).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Rx(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return n=_x(t),[4,xx()];case 1:return r=u.sent(),i=r.transaction(kx,"readwrite"),[4,(o=i.objectStore(kx)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||wx(t,a.fid),[2,a]}})})}function Ox(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,Rx(t,function(n){var r=function(t){return Lx(t||{fid:yx(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ax.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,gx(t,e)];case 1:return n=i.sent(),[2,Nx(t,n)];case 2:return ux(r=i.sent())&&409===r.customData.serverCode?[4,Px(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Nx(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Dx(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function Dx(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return[4,Mx(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,vx(100)];case 3:return o.sent(),[4,Mx(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Ox(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Mx(t){return Rx(t,function(t){if(!t)throw ax.create("installation-not-found");return Lx(t)})}function Lx(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Fx(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return cx(t)+"/"+n+"/authTokens:generate"}(n,e),i=dx(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:ox}})},[4,px(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,lx(u.sent())];case 3:return[4,hx("Generate Auth Token",a)];case 4:throw u.sent()}})})}function Ux(t,e){return void 0===e&&(e=!1),(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return[4,Rx(t.appConfig,function(r){if(!Vx(r))throw ax.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,jx(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,vx(100)];case 3:return i.sent(),[4,jx(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Ux(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw ax.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,Ay.__assign)((0,Ay.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Fx(t,e)];case 1:return n=o.sent(),i=(0,Ay.__assign)((0,Ay.__assign)({},e),{authToken:n}),[4,Nx(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!ux(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Px(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,Ay.__assign)((0,Ay.__assign)({},e),{authToken:{requestStatus:0}}),[4,Nx(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function jx(t){return Rx(t,function(t){if(!Vx(t))throw ax.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,Ay.__assign)((0,Ay.__assign)({},t),{authToken:{requestStatus:0}}):t})}function Vx(t){return void 0!==t&&2===t.registrationStatus}function qx(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,Ox(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function Bx(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return cx(t)+"/"+n}(t,e),r=dx(t,e),i={method:"DELETE",headers:r},[4,px(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,hx("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function Hx(t){return ax.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new zA.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Hx("App Configuration");if(!t.name)throw Hx("App Name");try{for(var r=(0,Ay.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Hx(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,Ox(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Ux(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,qx(t.appConfig)];case 1:return n.sent(),[4,Ux(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,Rx(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw ax.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ax.create("app-offline");case 3:return[4,Bx(e,n)];case 4:return r.sent(),[4,Px(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Ex();var n=_x(t),r=bx.get(n);r||(r=new Set,bx.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=_x(t),r=bx.get(n);r&&(r.delete(e),0===r.size&&bx.delete(n),Cx())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.29")}(mp.default);var Kx=((Sx={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sx["only-available-in-window"]="This method is available in a Window context.",Sx["only-available-in-sw"]="This method is available in a service worker context.",Sx["permission-default"]="The notification permission was not granted and dismissed instead.",Sx["permission-blocked"]="The notification permission was not granted and blocked instead.",Sx["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Sx["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Sx["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Sx["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Sx["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Sx["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Sx["token-update-no-token"]="FCM returned no token when updating the user to push.",Sx["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Sx["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Sx["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Sx["invalid-vapid-key"]="The public VAPID key must be a string.",Sx["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Sx),zx=new yp.ErrorFactory("messaging","Messaging",Kx),Wx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gx=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function $x(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,Ay.__spreadArray)([],(0,Ay.__read)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qx(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Yx="fcm_token_details_db",Xx="fcm_token_object_Store";function Jx(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(Yx))return[2,null];r.label=2;case 2:return e=null,[4,(0,ix.openDb)(Yx,5,function(r){return(0,Ay.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Xx)?[4,(n=r.transaction.objectStore(Xx)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:$x(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:$x(o.auth),p256dh:$x(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:$x(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,ix.deleteDb)(Yx)];case 4:return r.sent(),[4,(0,ix.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,ix.deleteDb)("undefined")];case 6:return r.sent(),[2,Zx(e)?e:null]}})})}function Zx(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var tN="firebase-messaging-store",eN=null;function nN(){return eN||(eN=(0,ix.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(tN)}})),eN}function rN(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return e=sN(t),[4,nN()];case 1:return[4,i.sent().transaction(tN).objectStore(tN).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Jx(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,iN(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function iN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return n=sN(t),[4,nN()];case 1:return r=o.sent(),[4,(i=r.transaction(tN,"readwrite")).objectStore(tN).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function oN(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return e=sN(t),[4,nN()];case 1:return n=i.sent(),[4,(r=n.transaction(tN,"readwrite")).objectStore(tN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function sN(t){return t.appConfig.appId}function aN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return[4,hN(t)];case 1:n=a.sent(),r=fN(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(lN(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),zx.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw zx.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw zx.create("token-subscribe-no-token");return[2,o.token]}})})}function uN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return[4,hN(t)];case 1:n=a.sent(),r=fN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(lN(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),zx.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw zx.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw zx.create("token-update-no-token");return[2,o.token]}})})}function cN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return[4,hN(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(lN(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw zx.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),zx.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function lN(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function hN(t){var e=t.appConfig,n=t.installations;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function fN(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==Wx&&(n.web.applicationPubKey=e),n}function dN(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw zx.create("permission-blocked");return[4,mN(e,n)];case 1:return r=a.sent(),[4,rN(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:$x(r.getKey("auth")),p256dh:$x(r.getKey("p256dh"))},i?[3,3]:[2,vN(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,cN(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,vN(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,gN({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function pN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,rN(t)];case 1:return(n=i.sent())?[4,cN(t,n.token)]:[3,4];case 2:return i.sent(),[4,oN(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function gN(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,uN(e,t)];case 1:return r=s.sent(),i=(0,Ay.__assign)((0,Ay.__assign)({},t),{token:r,createTime:Date.now()}),[4,iN(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,pN(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function vN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,aN(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,iN(t,r)];case 2:return i.sent(),[2,r.token]}})})}function mN(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qx(e)})]}})})}function yN(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function _N(t){return new Promise(function(e){setTimeout(e,t)})}var bN=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw zx.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,rN(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Wx,r.label=2;case 2:return[2,dN(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return pN(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw zx.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zx.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zx.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw zx.create("only-available-in-window")},t.prototype.onMessage=function(){throw zx.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw zx.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,EN()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,IN(n,e)]:(r=!1,e.notification?[4,CN(wN(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,_N(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,pN(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,rN(this.firebaseDependencies)];case 3:return r=i.sent(),[4,pN(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,dN(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Wx)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(yN(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,TN(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,_N(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Gx.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function wN(t){var e,n=(0,Ay.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function TN(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return[4,EN()];case 1:e=u.sent();try{for(n=(0,Ay.__values)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function IN(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Gx.PUSH_RECEIVED;try{for(var i=(0,Ay.__values)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function EN(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function CN(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var SN=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Gx.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),yN(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw zx.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,dN(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Wx),[2]})})},t.prototype.updateSwReg=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw zx.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),zx.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,pN(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw zx.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zx.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zx.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw zx.create("invalid-sw-registration");if(this.swRegistration)throw zx.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw zx.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw zx.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case Gx.NOTIFICATION_CLICKED:return"notification_open";case Gx.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function kN(t){return zx.create("missing-app-config-values",{valueName:t})}var AN={isSupported:xN};function xN(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}mp.default.INTERNAL.registerComponent(new zA.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw kN("App Configuration Object");if(!t.name)throw kN("App Name");var r=t.options;try{for(var i=(0,Ay.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw kN(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!xN())throw zx.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new bN(n):new SN(n)},"PUBLIC").setServiceProps(AN));var NN="firebasestorage.googleapis.com",PN=function(t){function e(n,r){var i=t.call(this,RN(n),"Firebase Storage: "+r+" ("+RN(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Ay.__extends)(e,t),e.prototype._codeEquals=function(t){return RN(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(yp.FirebaseError);function RN(t){return"storage/"+t}function ON(){return new PN("unknown","An unknown error occurred, please check the error payload for server response.")}function DN(){return new PN("canceled","User canceled the upload/download.")}function MN(){return new PN("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function LN(t){return new PN("invalid-argument",t)}function FN(){return new PN("app-deleted","The Firebase app was deleted.")}function UN(t){return new PN("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jN(t,e){return new PN("invalid-format","String does not match format '"+t+"': "+e)}function VN(t){throw new PN("internal-error","Internal error: "+t)}var qN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},BN=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function HN(t,e){switch(t){case qN.RAW:return new BN(KN(e));case qN.BASE64:case qN.BASE64URL:return new BN(zN(t,e));case qN.DATA_URL:return new BN((n=new WN(e)).base64?zN(qN.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(qA){throw jN(qN.DATA_URL,"Malformed data URL.")}return KN(e)}(n.rest),new WN(e).contentType)}var n;throw ON()}function KN(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zN(t,e){switch(t){case qN.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw jN(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qN.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw jN(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(qA){throw jN(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var WN=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw jN(qN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),GN={STATE_CHANGED:"state_changed"},$N={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function QN(t){switch(t){case"running":case"pausing":case"canceling":return $N.RUNNING;case"paused":return $N.PAUSED;case"success":return $N.SUCCESS;case"canceled":return $N.CANCELED;case"error":default:return $N.ERROR}}var YN=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),XN=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=YN.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=YN.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=YN.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw VN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw VN("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw VN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(qA){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw VN("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),JN=function(){function t(){}return t.prototype.createXhrIo=function(){return new XN},t}(),ZN=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(qA){return new t(e,"")}if(""===r.path)return r;throw new PN("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===NN?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new PN("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),tP=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function eP(t){return"string"==typeof t||t instanceof String}function nP(t){return rP()&&t instanceof Blob}function rP(){return"undefined"!=typeof Blob}function iP(t,e,n,r){if(r<e)throw LN("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw LN("Invalid value for '"+t+"'. Expected "+n+" or less.")}function oP(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function sP(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var aP=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(qA){o(qA)}else null!==s?((r=ON()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?FN():DN():new PN("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new uP(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new uP(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===YN.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new uP(s,n))}else{var a=n.getErrorCode()===YN.ABORT;e(!1,new uP(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Ay.__spreadArray)([null,t],e));else{var r;u()||s?l.call.apply(l,(0,Ay.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),uP=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function cP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function lP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=cP();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(rP())return new Blob(t);throw new PN("unsupported-environment","This browser doesn't seem to support creating Blobs")}var hP=function(){function t(t,e){var n=0,r="";nP(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(nP(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(rP()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(lP.apply(null,r))}var i=e.map(function(t){return eP(t)?HN(qN.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function fP(t){var e;try{e=JSON.parse(t)}catch(qA){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function dP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function pP(t,e){return e}var gP=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||pP}}(),vP=null;function mP(){if(vP)return vP;var t=[];t.push(new gP("bucket")),t.push(new gP("generation")),t.push(new gP("metageneration")),t.push(new gP("name","fullPath",!0));var e=new gP("name");e.xform=function(t,e){return function(t){return!eP(t)||t.length<2?t:dP(t)}(e)},t.push(e);var n=new gP("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new gP("timeCreated")),t.push(new gP("updated")),t.push(new gP("md5Hash",null,!0)),t.push(new gP("cacheControl",null,!0)),t.push(new gP("contentDisposition",null,!0)),t.push(new gP("contentEncoding",null,!0)),t.push(new gP("contentLanguage",null,!0)),t.push(new gP("contentType",null,!0)),t.push(new gP("metadata","customMetadata",!0)),vP=t}function yP(t,e,n){var r=fP(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new ZN(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function _P(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var bP=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function wP(t){if(!t)throw ON()}function TP(t,e){return function(n,r){var i=yP(t,r,e);return wP(null!==i),i}}function IP(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new PN("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new PN("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new PN("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new PN("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function EP(t){var e=IP(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new PN("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function CP(t,e,n){var r=oP(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new bP(r,"GET",TP(t,n),i);return o.errorHandler=EP(e),o}function SP(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var kP=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function AP(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(qA){wP(!1)}return wP(!!n&&-1!==(e||["active"]).indexOf(n)),n}var xP=262144,NP=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function PP(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var RP=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=mP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=SP(e,r,i),a={name:s.fullPath},u=oP(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=_P(s,n),h=new bP(u,"POST",function(t){var e;AP(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(qA){wP(!1)}return wP(eP(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=IP(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new bP(n,"POST",function(t){var e=AP(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(qA){wP(!1)}n||wP(!1);var i=Number(n);return wP(!isNaN(i)),new kP(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=IP(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=xP*this._chunkMultiplier,n=new kP(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new kP(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new PN("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw MN();var p=new bP(n,"POST",function(t,n){var i,s=AP(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?TP(e,o)(t,n):null,new kP(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=IP(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(qA){return t._error=qA,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){xP*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=CP(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=SP(e,r,i),c=_P(u,n),l=hP.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw MN();var h={name:u.fullPath},f=oP(o,t.host),d=t.maxUploadRetryTime,p=new bP(f,"POST",TP(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=IP(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=DN(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=QN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new NP(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(QN(this._state)){case $N.SUCCESS:PP(this._resolve.bind(null,this.snapshot))();break;case $N.CANCELED:case $N.ERROR:PP(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(QN(this._state)){case $N.RUNNING:case $N.PAUSED:t.next&&PP(t.next.bind(t,this.snapshot))();break;case $N.SUCCESS:t.complete&&PP(t.complete.bind(t))();break;case $N.CANCELED:case $N.ERROR:t.error&&PP(t.error.bind(t,this._error))();break;default:t.error&&PP(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),OP=function(){function t(t,e){this._service=t,this._location=e instanceof ZN?e:ZN.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ZN(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return dP(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ZN(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw UN(t)},t}();function DP(t){var e={prefixes:[],items:[]};return MP(t,e).then(function(){return e})}function MP(t,e,n){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return[4,LP(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,MP(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function LP(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&iP("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=oP(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new bP(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=fP(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new ZN(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new ZN(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return wP(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=IP(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function FP(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ZN(t._location.bucket,n);return new OP(t.storage,r)}function UP(t){return/^[A-Za-z]+:\/\//.test(t)}function jP(t,e){if(t instanceof BP){var n=t;if(null==n._bucket)throw new PN("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new OP(n,n._bucket);return null!=e?jP(r,e):r}if(void 0!==e){if(e.includes(".."))throw LN('`path` param cannot contain ".."');return FP(t,e)}return t}function VP(t,e){if(e&&UP(e)){if(t instanceof BP)return new OP(t,e);throw LN("To use ref(service, url), the first argument must be a Storage instance.")}return jP(t,e)}function qP(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:ZN.makeFromBucketSpec(n,t)}var BP=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=NN,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ZN.makeFromBucketSpec(i,this._host):qP(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?ZN.makeFromBucketSpec(this._url,t):qP(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){iP("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){iP("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new OP(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new tP(FN());var i=function(t,e,n,r,i,o){var s=sP(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new aP(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function HP(t,e){return VP(t=(0,yp.getModularInstance)(t),e)}var KP=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),zP=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new KP(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new KP(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new KP(t,i,i._ref))}:{next:e.next?function(t){return e.next(new KP(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),WP=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new GP(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new GP(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),GP=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return FP(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new zP(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new RP(t,new hP(e),n)}(t=(0,yp.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=qN.RAW),this._throwIfRoot("putString");var r=HN(e,t),i=(0,Ay.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zP(new RP(this._delegate,new hP(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return DP(t=(0,yp.getModularInstance)(t))}(this._delegate).then(function(e){return new WP(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return LP(t=(0,yp.getModularInstance)(t),e)}(this._delegate,t||void 0).then(function(t){return new WP(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=CP(t.storage,t._location,mP()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,yp.getModularInstance)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=oP(e.fullServerUrl(),t.host),o=_P(n,r),s=t.maxOperationRetryTime,a=new bP(i,"PATCH",TP(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=EP(e),a}(t.storage,t._location,e,mP()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,yp.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=oP(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new bP(r,"GET",function(t,e){return function(n,r){var i=yP(t,r,e);return wP(null!==i),function(t,e,n){var r=fP(e);if(null===r)return null;if(!eP(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return oP("/b/"+o(t.bucket)+"/o/"+o(r),n)+sP({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=EP(e),o}(t.storage,t._location,mP()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new PN("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,yp.getModularInstance)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=oP(e.fullServerUrl(),t.host),r=new bP(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=EP(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,yp.getModularInstance)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw UN(t)},t}(),$P=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(UP(t))throw LN("ref() expected a child path but got a URL, use refFromURL instead.");return new GP(HP(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!UP(t))throw LN("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ZN.makeFromUrl(t,this._delegate.host)}catch(qA){throw LN("refFromUrl() expected a valid full URL but got an invalid one.")}return new GP(HP(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function QP(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new $P(r,new BP(r,i,o,new JN,n,mp.default.SDK_VERSION))}!function(t){var e={TaskState:$N,TaskEvent:GN,StringFormat:qN,Storage:BP,Reference:GP};t.INTERNAL.registerComponent(new zA.Component("storage",QP,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.5")}(mp.default);var YP,XP,JP,ZP="0.4.15",tR=ZP,eR="FB-PERF-TRACE-MEASURE",nR="_wt_",rR="_fcp",iR="_fid",oR="@firebase/performance/config",sR="@firebase/performance/configexpire",aR="Performance",uR=((YP={})["trace started"]="Trace {$traceName} was started before.",YP["trace stopped"]="Trace {$traceName} is not running.",YP["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",YP["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",YP["no window"]="Window is not available.",YP["no app id"]="App id is not available.",YP["no project id"]="Project id is not available.",YP["no api key"]="Api key is not available.",YP["invalid cc log"]="Attempted to queue invalid cc event",YP["FB not default"]="Performance can only start when Firebase app instance is the default one.",YP["RC response not ok"]="RC response is not ok",YP["invalid attribute name"]="Attribute name {$attributeName} is invalid.",YP["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",YP["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",YP["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",YP),cR=new yp.ErrorFactory("performance",aR,uR),lR=new _p.Logger(aR);lR.logLevel=_p.LogLevel.INFO;var hR,fR=function(){function t(t){if(this.window=t,!t)throw cR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,yp.isIndexedDBAvailable)()||(lR.info("IndexedDB is not supported by current browswer"),!1):(lR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===XP&&(XP=new t(JP)),XP},t}();function dR(t,e){var n=t.length-e.length;if(n<0||n>1)throw cR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var pR,gR=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=dR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=dR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw cR.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw cR.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw cR.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===hR&&(hR=new t),hR},t}();function vR(){return pR}var mR=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),yR=["firebase_","google_","ga_"],_R=new RegExp("^[a-zA-Z]\\w*$");function bR(){var t=fR.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function wR(){switch(fR.getInstance().document.visibilityState){case"visible":return mR.VISIBLE;case"hidden":return mR.HIDDEN;default:return mR.UNKNOWN}}function TR(){var t=fR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function IR(t){if(!t)return t;var e=gR.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=ER(e.tracesSamplingRate),e.logNetworkAfterSampling=ER(e.networkRequestsSamplingRate),t}function ER(t){return Math.random()<=t}var CR,SR=1;function kR(){return SR=2,CR=CR||function(){var t=fR.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=gR.getInstance().installationsService.getId()).then(function(t){pR=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=fR.getInstance().localStorage;if(t){var e=t.getItem(sR);if(e&&Number(e)>Date.now()){var n=t.getItem(oR);if(n)try{return JSON.parse(n)}catch(Sk){return}}}}();return e?(IR(e),Promise.resolve()):function(t){return(e=gR.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+gR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+gR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:gR.getInstance().getAppId(),app_version:tR,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw cR.create("RC response not ok")})}).catch(function(){lR.info("Could not fetch config, will use default configs")});var e}(t).then(IR).then(function(t){return function(t){var e=fR.getInstance().localStorage;t&&e&&(e.setItem(oR,JSON.stringify(t)),e.setItem(sR,String(Date.now()+60*gR.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return AR()},function(){return AR()})}function AR(){SR=3}var xR,NR=1e4,PR=3,RR=[],OR=!1;function DR(t){setTimeout(function(){var t,e;if(0!==PR)return RR.length?(e=(t=RR.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=gR.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||lR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=NR;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(RR=(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],e),RR),lR.info("Retry transport request later.")),PR=3,DR(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:gR.getInstance().logSource,log_event:e},t).catch(function(){RR=(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],t),RR),PR--,lR.info("Tries left: "+PR+"."),DR(NR)})):DR(NR)},t)}function MR(t){if(!t.eventTime||!t.message)throw cR.create("invalid cc log");RR=(0,Ay.__spreadArray)((0,Ay.__spreadArray)([],RR),[t])}function LR(t,e){xR||(xR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];MR({message:t.apply(void 0,e),eventTime:Date.now()})}}(jR)),xR(t,e)}function FR(t){var e=gR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&fR.getInstance().requiredApisAvailable()&&(t.isAuto&&wR()!==mR.VISIBLE||(3===SR?UR(t):kR().then(function(){return UR(t)},function(){return UR(t)})))}function UR(t){if(vR()){var e=gR.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return LR(t,1)},0)}}function jR(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:VR(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:VR(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function VR(){return{google_app_id:gR.getInstance().getAppId(),app_instance_id:vR(),web_app_info:{sdk_version:tR,page_url:fR.getInstance().getUrl(),service_worker_status:bR(),visibility_state:wR(),effective_connection_type:TR()},application_process_state:0}}var qR=["_fp",rR,iR],BR=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=fR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw cR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw cR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),FR(this)},t.prototype.record=function(t,e,n){if(t<=0)throw cR.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw cR.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,Ay.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}FR(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith(nR)&&qR.indexOf(i)>-1)&&i.startsWith("_"))throw cR.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&lR.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||yR.some(function(t){return n.startsWith(t)})||!n.match(_R)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw cR.create("invalid attribute name",{attributeName:t});if(!i)throw cR.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,Ay.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=fR.getInstance().getUrl();if(i){var o=new t(nR+i,!0),s=Math.floor(1e3*fR.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(rR,Math.floor(1e3*u.startTime)),r&&o.putMetric(iR,Math.floor(1e3*r))}FR(o)}},t.createUserTimingTrace=function(e){FR(new t(e,!1,e))},t}();function HR(t){var e=t;if(e&&void 0!==e.responseStart){var n=fR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=gR.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return LR(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function KR(){vR()&&(setTimeout(function(){return function(){var t=fR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){BR.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),BR.createOobTrace(e,n,t))})}else BR.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=fR.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)HR(n[e]);t.setupObserver("resource",HR)}()},0),setTimeout(function(){return function(){for(var t=fR.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)zR(n[e]);t.setupObserver("measure",zR)}()},0))}function zR(t){var e=t.name;e.substring(0,eR.length)!==eR&&BR.createUserTimingTrace(e)}var WR=function(){function t(t){this.app=t,fR.getInstance().requiredApisAvailable()&&(0,yp.validateIndexedDBOpenable)().then(function(t){t&&(OR||(DR(5500),OR=!0),kR().then(KR,KR))}).catch(function(t){lR.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new BR(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return gR.getInstance().instrumentationEnabled},set:function(t){gR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return gR.getInstance().dataCollectionEnabled},set:function(t){gR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new zA.Component("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw cR.create("FB not default");if("undefined"==typeof window)throw cR.create("no window");return function(t){JP=t}(window),gR.getInstance().firebaseAppInstance=t,gR.getInstance().installationsService=e,new WR(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",ZP)}(mp.default);var GR,$R="https://www.googletagmanager.com/gtag/js",QR=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),YR=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),XR=new _p.Logger("@firebase/analytics");function JR(t,e,n,r,i,o){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return(0,Ay.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),XR.error(c),[3,8];case 8:return t(QR.CONFIG,i,o),[2]}})})}function ZR(t,e,n,r,i){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return(0,Ay.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(QR.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),XR.error(h),[3,5];case 5:return[2]}})})}var tO=((GR={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",GR["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",GR["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",GR["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",GR["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",GR["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",GR["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",GR["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',GR["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',GR),eO=new yp.ErrorFactory("analytics","Analytics",tO),nO=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function rO(t){var e;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw eO.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function iO(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=nO),(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return(0,Ay.__generator)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,oO(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return XR.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,rO(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof yp.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return XR.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?(0,yp.calculateBackoffMillis)(o,r.intervalMillis,30):(0,yp.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),XR.debug("Calling attemptFetch again in "+l+" millis"),[2,iO(t,h,n,r)];case 7:return[2]}})})}function oO(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(eO.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var sO,aO,uO=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),cO={},lO=[],hO={},fO="dataLayer",dO="gtag",pO=!1;function gO(t){if(pO)throw eO.create("already-initialized");t.dataLayerName&&(fO=t.dataLayerName),t.gtagName&&(dO=t.gtagName)}var vO="analytics";function mO(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:if((0,yp.isBrowserExtension)())return[2,!1];if(!(0,yp.areCookiesEnabled)())return[2,!1];if(!(0,yp.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,yp.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new zA.Component(vO,function(t){return function(t,e){!function(){var t=[];if((0,yp.isBrowserExtension)()&&t.push("This is a browser extension environment."),(0,yp.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=eO.create("invalid-analytics-context",{errorInfo:e});XR.warn(n.message)}}();var n=t.options.appId;if(!n)throw eO.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw eO.create("no-api-key");XR.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=cO[n])throw eO.create("already-exists",{id:n});if(!pO){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(fO);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var a;return(0,Ay.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==QR.EVENT?[3,2]:[4,ZR(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==QR.CONFIG?[3,4]:[4,JR(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(QR.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),XR.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(cO,lO,hO,fO,dO);aO=r.wrappedGtag,sO=r.gtagCore,pO=!0}return cO[n]=function(t,e,n,r,i,o){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return(0,Ay.__generator)(this,function(d){switch(d.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=nO),(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return(0,Ay.__generator)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw eO.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw eO.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new uO,setTimeout(function(){return(0,Ay.__awaiter)(u,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){return a.abort(),[2]})})},6e4),[2,iO({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&XR.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return XR.error(t)}),e.push(s),a=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ay.__generator)(this,function(e){switch(e.label){case 0:return(0,yp.isIndexedDBAvailable)()?[3,1]:(XR.warn(eO.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,yp.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),XR.warn(eO.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes($R))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=$R+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(QR.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,lO,hO,e,sO,fO),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var o,s;return(0,Ay.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(QR.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=(0,Ay.__assign)((0,Ay.__assign)({},r),{send_to:o}),t(QR.EVENT,n,s),a.label=3;case 3:return[2]}})})})(aO,cO[n],t,e,r).catch(function(t){return XR.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(QR.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(QR.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(aO,cO[n],t,e).catch(function(t){return XR.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i;return(0,Ay.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(QR.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(QR.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(aO,cO[n],t,e).catch(function(t){return XR.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ay.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(QR.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(QR.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(aO,cO[n],t,e).catch(function(t){return XR.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(cO[n],t).catch(function(t){return XR.error(t)})},INTERNAL:{delete:function(){return delete cO[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:gO,EventName:YR,isSupported:mO})),t.INTERNAL.registerComponent(new zA.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(vO).getImmediate().logEvent}}catch(qA){throw eO.create("interop-component-reg-failed",{reason:qA})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.13")}(mp.default);var yO,_O=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),bO=((yO={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",yO["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",yO["registration-api-key"]="Undefined API key. Check Firebase app initialization.",yO["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",yO["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",yO["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",yO["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",yO["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",yO["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",yO["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',yO["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',yO["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",yO["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",yO),wO=new yp.ErrorFactory("remoteconfig","Remote Config",bO),TO=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v;return(0,Ay.__generator)(this,function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw c=m.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),wO.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw v=m.sent(),wO.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw wO.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},t}(),IO=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),EO=["1","true","t","yes","y","on"],CO=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&EO.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),SO=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=_p.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=_p.LogLevel.SILENT;break;default:this._logger.logLevel=_p.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:t=new IO,setTimeout(function(){return(0,Ay.__awaiter)(r,void 0,void 0,function(){return(0,Ay.__generator)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof yp.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){return(0,Ay.__generator)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,Ay.__assign)((0,Ay.__assign)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new CO("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new CO("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new CO("static"))},t}();function kO(t,e){var n=t.target.error||void 0;return wO.create(e,{originalErrorMessage:n&&n.message})}var AO="app_namespace_store",xO=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(kO(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(AO,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([AO],"readonly").objectStore(AO),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(kO(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(qA){i(wO.create("storage-get",{originalErrorMessage:qA&&qA.message}))}})]}})})},t.prototype.set=function(t,e){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Ay.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([AO],"readwrite").objectStore(AO),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(kO(t,"storage-set"))},u.onsuccess=function(){i()}}catch(qA){o(wO.create("storage-set",{originalErrorMessage:qA&&qA.message}))}})]}})})},t.prototype.delete=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,Ay.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([AO],"readwrite").objectStore(AO),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(kO(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(qA){i(wO.create("storage-delete",{originalErrorMessage:qA&&qA.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),NO=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function PO(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(wO.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var RO,OO=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ay.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,Ay.__awaiter)(this,void 0,void 0,function(){var e,i,o;return(0,Ay.__generator)(this,function(s){switch(s.label){case 0:return[4,PO(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof yp.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,yp.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),DO="@firebase/remote-config";(RO=mp.default).INTERNAL.registerComponent(new zA.Component("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw wO.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw wO.create("registration-project-id");if(!a)throw wO.create("registration-api-key");if(!u)throw wO.create("registration-app-id");var c=new xO(u,r.name,n=n||"firebase"),l=new NO(c),h=new _p.Logger(DO);h.logLevel=_p.LogLevel.ERROR;var f=new TO(i,RO.SDK_VERSION,n,s,a,u),d=new OO(f,c),p=new _O(d,c,l,h),g=new SO(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),RO.registerVersion(DO,"0.1.40"),n(934);var MO="8.6.8";mp.default.registerVersion("firebase",MO,"app"),mp.default.SDK_VERSION=MO,console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),mp.default.registerVersion("firebase","8.6.8");class LO{sendMessageToConsole(t){console.log(t)}}let FO=(()=>{class t{constructor(t,e){this.router=t,this.loggingService=e}login(t,e){mp.default.auth().signInWithEmailAndPassword(t,e).then(t=>{var e;null===(e=mp.default.auth().currentUser)||void 0===e||e.getIdToken().then(t=>{this.token=t,this.router.navigate(["/"])})})}getIdToken(){return this.token}isAuthenticated(){return null!=this.token&&""!=this.token}logout(){mp.default.auth().signOut().then(()=>{this.token="",this.router.navigate(["login"])}).catch(t=>this.loggingService.sendMessageToConsole(`Error de logout ${t}`))}}return t.\u0275fac=function(e){return new(e||t)(Jn($d),Jn(LO))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),UO=(()=>{class t{constructor(t,e){this.LoginService=t,this.router=e}canActivate(t,e){return!!this.LoginService.isAuthenticated()||(this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(Jn(FO),Jn($d))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),jO=(()=>{class t{constructor(t){this.loginService=t}ngOnInit(){}login(t){this.loginService.login(t.value.email,t.value.password)}}return t.\u0275fac=function(e){return new(e||t)(ko(FO))},t.\u0275cmp=qt({type:t,selectors:[["app-login"]],decls:9,vars:0,consts:[[1,"box"],[1,"item",3,"ngSubmit"],["f","ngForm"],["type","email","name","email","placeholder","Email","required","","size","20","ngModel",""],["type","password","name","password","placeholder","Password","required","","size","15","ngModel",""],["type","submit",2,"cursor","pointer"]],template:function(t,e){if(1&t){const t=Oo();No(0,"div",0),No(1,"form",1,2),Lo("ngSubmit",function(){ke(t);const n=So(2);return n.form.valid&&e.login(n)}),No(3,"div"),Ro(4,"input",3),Po(),No(5,"div"),Ro(6,"input",4),Po(),No(7,"button",5),Go(8,"+"),Po(),Po(),Po()}},directives:[_l,$c,gl,Rc,Tl,Gc,yl],styles:[""]}),t})();class VO{constructor(t,e){this.name=t,this.lastname=e}}class qO{}class BO{}class HO{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof HO?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new HO;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof HO?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class KO{encodeKey(t){return zO(t)}encodeValue(t){return zO(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function zO(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function WO(t){return`${t}`}class GO{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new KO,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new GO({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(WO(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(WO(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class $O{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function QO(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function YO(t){return"undefined"!=typeof Blob&&t instanceof Blob}function XO(t){return"undefined"!=typeof FormData&&t instanceof FormData}class JO{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new HO),this.context||(this.context=new $O),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new GO,this.urlWithParams=e}serializeBody(){return null===this.body?null:QO(this.body)||YO(this.body)||XO(this.body)||"string"==typeof this.body?this.body:this.body instanceof GO?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XO(this.body)?null:YO(this.body)?this.body.type||null:QO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof GO?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new JO(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var ZO=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class tD{constructor(t,e=200,n="OK"){this.headers=t.headers||new HO,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class eD extends tD{constructor(t={}){super(t),this.type=ZO.ResponseHeader}clone(t={}){return new eD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class nD extends tD{constructor(t={}){super(t),this.type=ZO.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new nD({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class rD extends tD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function iD(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let oD=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof JO)r=t;else{let i,o;i=n.headers instanceof HO?n.headers:new HO(n.headers),n.params&&(o=n.params instanceof GO?n.params:new GO({fromObject:n.params})),r=new JO(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Cl(r).pipe(th(t=>this.handler.handle(t)));if(t instanceof JO||"events"===n.observe)return i;const o=i.pipe($l(t=>t instanceof nD));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(S(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(S(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(S(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(S(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new GO).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,iD(n,e))}post(t,e,n={}){return this.request("POST",t,iD(n,e))}put(t,e,n={}){return this.request("PUT",t,iD(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Jn(qO))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class sD{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const aD=new Ln("HTTP_INTERCEPTORS");let uD=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const cD=/^\)\]\}',?\n/;let lD=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new HO(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new eD({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(cD,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new nD({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new rD({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new rD({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:ZO.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:ZO.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:ZO.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(Jn(Qu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const hD=new Ln("XSRF_COOKIE_NAME"),fD=new Ln("XSRF_HEADER_NAME");class dD{}let pD=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Uu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(Jn(mu),Jn(Ea),Jn(hD))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),gD=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(dD),Jn(fD))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),vD=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(aD,[]);this.chain=t.reduceRight((t,e)=>new sD(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(BO),Jn(lo))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),mD=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:gD,useClass:uD}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:hD,useValue:e.cookieName}:[],e.headerName?{provide:fD,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({providers:[gD,{provide:aD,useExisting:gD,multi:!0},{provide:dD,useClass:pD},{provide:hD,useValue:"XSRF-TOKEN"},{provide:fD,useValue:"X-XSRF-TOKEN"}]}),t})(),yD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({providers:[oD,{provide:qO,useClass:vD},lD,{provide:BO,useExisting:lD}],imports:[[mD.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),_D=(()=>{class t{constructor(t,e,n){this.httpClient=t,this.loggingService=e,this.loginService=n,this.baseUrl="https://contactscheduleapp-default-rtdb.firebaseio.com/datos.json"}getPersons(){const t=this.loginService.getIdToken();return this.httpClient.get(`${this.baseUrl}?auth=${t}`)}storePerson(t){const e=this.loginService.getIdToken();this.httpClient.put(`${this.baseUrl}?auth=${e}`,t).subscribe(t=>this.loggingService.sendMessageToConsole(`Guardar personas ${t}`),t=>this.loggingService.sendMessageToConsole(`Error guardar persons ${t}`))}updatePerson(t,e){let n;n=`https://contactscheduleapp-default-rtdb.firebaseio.com/datos/${t}.json?auth=${this.loginService.getIdToken()}`,this.httpClient.put(n,e).subscribe(t=>this.loggingService.sendMessageToConsole(`Modificar persona ${t}`),t=>this.loggingService.sendMessageToConsole(`Error modificar persona: ${t}`))}deletePerson(t){let e;e=`https://contactscheduleapp-default-rtdb.firebaseio.com/datos/${t}.json?auth=${this.loginService.getIdToken()}`,this.httpClient.delete(e).subscribe(t=>this.loggingService.sendMessageToConsole(`Eliminar persona ${t}`),t=>this.loggingService.sendMessageToConsole(`Error eliminar persona: ${t}`))}}return t.\u0275fac=function(e){return new(e||t)(Jn(oD),Jn(LO),Jn(FO))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),bD=(()=>{class t{constructor(t,e){this.loggingService=t,this.dataService=e,this.persons=[],this.greeting=new ma}setPersons(t){this.persons=t}getPersons(){return this.dataService.getPersons()}storePerson(t){null==this.persons&&(this.persons=[]),this.persons.push(t),this.dataService.storePerson(this.persons)}findPerson(t){return this.persons[t]}updatePerson(t,e){let n=this.persons[t];n.name=e.name,n.lastname=e.lastname,this.dataService.updatePerson(t,e)}deletePerson(t){this.persons.splice(t,1),this.dataService.deletePerson(t),this.updatePersons()}updatePersons(){null!=this.persons&&this.dataService.storePerson(this.persons)}}return t.\u0275fac=function(e){return new(e||t)(Jn(LO),Jn(_D))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function wD(t,e){if(1&t){const t=Oo();No(0,"button",7),Lo("click",function(){return ke(t),jo().deletePerson()}),Go(1," - "),Po()}}let TD=(()=>{class t{constructor(t,e,n,r){this.logginService=t,this.personsService=e,this.router=n,this.route=r,this.nameInput="",this.lastnameInput=""}ngOnInit(){if(this.index=this.route.snapshot.params.id,this.editionMode=+this.route.snapshot.queryParams.editionMode,null!=this.editionMode&&1===this.editionMode){let t=this.personsService.findPerson(this.index);this.nameInput=t.name,this.lastnameInput=t.lastname}}handleSavePerson(){let t=new VO(this.nameInput,this.lastnameInput);null!=this.editionMode&&1===this.editionMode?this.personsService.updatePerson(this.index,t):this.personsService.storePerson(t),this.router.navigate(["persons"])}deletePerson(){null!=this.index&&this.personsService.deletePerson(this.index),this.router.navigate(["persons"])}}return t.\u0275fac=function(e){return new(e||t)(ko(LO),ko(bD),ko($d),ko(Sf))},t.\u0275cmp=qt({type:t,selectors:[["app-form"]],decls:8,vars:3,consts:[[1,"box"],["action","",1,"item",3,"ngSubmit"],["f","ngForm"],["type","text","id","name","name","name","placeholder","Nombre","required","",3,"ngModel","ngModelChange"],["type","text","id","lastname","name","lastname","placeholder","Apellido","required","",3,"ngModel","ngModelChange"],["type","submit",2,"cursor","pointer"],["class","btn-delete","style","cursor: pointer;","type","submit",3,"click",4,"ngIf"],["type","submit",1,"btn-delete",2,"cursor","pointer",3,"click"]],template:function(t,e){if(1&t){const t=Oo();No(0,"div",0),No(1,"form",1,2),Lo("ngSubmit",function(){return ke(t),So(2).form.valid&&e.handleSavePerson()}),No(3,"input",3),Lo("ngModelChange",function(t){return e.nameInput=t}),Po(),No(4,"input",4),Lo("ngModelChange",function(t){return e.lastnameInput=t}),Po(),No(5,"button",5),Go(6," + "),Po(),Co(7,wD,2,0,"button",6),Po(),Po()}2&t&&(ei(3),Ao("ngModel",e.nameInput),ei(1),Ao("ngModel",e.lastnameInput),ei(3),Ao("ngIf",null!=e.index))},directives:[_l,$c,gl,Rc,Tl,Gc,yl,Bu],styles:[""]}),t})();const ID=function(t){return["/persons",t]},ED=function(){return{editionMode:"1"}};let CD=(()=>{class t{constructor(t){this.personsService=t}ngOnInit(){}emitGreeting(){this.personsService.greeting.emit(this.i)}}return t.\u0275fac=function(e){return new(e||t)(ko(bD))},t.\u0275cmp=qt({type:t,selectors:[["app-person"]],inputs:{person:"person",i:"i"},decls:5,vars:7,consts:[[1,"item"],[3,"routerLink","queryParams"]],template:function(t,e){var n,r,i,o;1&t&&(No(0,"div",0),No(1,"ul"),No(2,"li"),No(3,"a",1),Go(4),Po(),Po(),Po(),Po()),2&t&&(ei(3),Ao("routerLink",(n=4,r=ID,i=e.i,function(t,e,n,r,i,o){const s=e+n;return Io(t,s,i)?To(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ti?void 0:n}(t,s+1)}(Ce(),De(),n,r,i,o)))("queryParams",function(t,e,n){const r=De()+6,i=Ce();return i[r]===ti?To(i,r,e()):function(t,e){return t[e]}(i,r)}(0,ED)),ei(1),Yo(" ",e.person.name," ",e.person.lastname," "))},directives:[Qd],styles:[""]}),t})();function SD(t,e){if(1&t&&Ro(0,"app-person",4),2&t){const t=e.index;Ao("person",e.$implicit)("i",t)}}let kD=(()=>{class t{constructor(t,e,n){this.logginService=t,this.personsService=e,this.router=n,this.persons=[],this.personsService.greeting.subscribe(t=>alert(`El \xedndice es: ${t}`))}ngOnInit(){this.personsService.getPersons().subscribe(t=>{this.persons=t,this.personsService.setPersons(t)})}personStored(t){this.personsService.storePerson(t)}newRegister(){this.router.navigate(["persons/create"])}}return t.\u0275fac=function(e){return new(e||t)(ko(LO),ko(bD),ko($d))},t.\u0275cmp=qt({type:t,selectors:[["app-persons"]],decls:6,vars:1,consts:[[2,"text-align","center"],[2,"cursor","pointer",3,"click"],[1,"box"],[3,"person","i",4,"ngFor","ngForOf"],[3,"person","i"]],template:function(t,e){1&t&&(No(0,"div",0),No(1,"button",1),Lo("click",function(){return e.newRegister()}),Go(2,"+"),Po(),Po(),No(3,"div",2),Co(4,SD,1,2,"app-person",3),Po(),Ro(5,"router-outlet")),2&t&&(ei(4),Ao("ngForOf",e.persons))},directives:[Vu,Xd,CD],styles:[""]}),t})();const AD=[{path:"",component:kD,canActivate:[UO]},{path:"persons",component:kD,canActivate:[UO],children:[{path:"create",component:TD},{path:":id",component:TD}]},{path:"login",component:jO},{path:"**",component:vp}];let xD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=ht({imports:[[ap.forRoot(AD)],ap]}),t})();function ND(t,e){1&t&&(No(0,"div",2),No(1,"a",3),Go(2,"Login"),Po(),Po())}function PD(t,e){if(1&t){const t=Oo();No(0,"div",2),No(1,"a",4),Lo("click",function(){return ke(t),jo().logout()}),Go(2,"Salir"),Po(),Po()}}let RD=(()=>{class t{constructor(t){this.loginService=t,this.title="AngularListPersonApp"}ngOnInit(){mp.default.initializeApp({apiKey:"AIzaSyBKHSgVQeGO5nJs7qQY_Hav5ngXLj5Xdrw",authDomain:"contactscheduleapp.firebaseapp.com"})}isAuthenticated(){return this.loginService.isAuthenticated()}logout(){this.loginService.logout()}}return t.\u0275fac=function(e){return new(e||t)(ko(FO))},t.\u0275cmp=qt({type:t,selectors:[["app-root"]],decls:6,vars:3,consts:[["class","box text-center",4,"ngIf"],["id","heading",1,"box","text-center"],[1,"box","text-center"],["routerLink","/login"],[2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(Co(0,ND,3,0,"div",0),Co(1,PD,3,0,"div",0),No(2,"div",1),No(3,"h1"),Go(4),Po(),Po(),Ro(5,"router-outlet")),2&t&&(Ao("ngIf",!e.isAuthenticated()),ei(1),Ao("ngIf",e.isAuthenticated()),ei(3),$o(e.title))},directives:[Bu,Xd,Qd],styles:[""]}),t})(),OD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t,bootstrap:[RD]}),t.\u0275inj=ht({providers:[LO,bD,_D,FO,UO],imports:[[Cc,El,xD,yD]]}),t})();(function(){if(Ja)throw new Error("Cannot enable prod mode after platform setup.");Xa=!1})(),Ic().bootstrapModule(OD).catch(t=>console.error(t))},762:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>c,__awaiter:()=>l,__generator:()=>h,__createBinding:()=>f,__exportStar:()=>d,__values:()=>p,__read:()=>g,__spread:()=>v,__spreadArrays:()=>m,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>b,__asyncDelegator:()=>w,__asyncValues:()=>T,__makeTemplateObject:()=>I,__importStar:()=>C,__importDefault:()=>S,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>A});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof _?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:_(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return E(e,t),e}function S(t){return t&&t.__esModule?t:{default:t}}function k(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function A(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}}},t=>{"use strict";t(t.s=459)}]);